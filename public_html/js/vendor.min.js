
/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/
(function (e, t) {
    var n, r, i = typeof t, o = e.document, a = e.location, s = e.jQuery, u = e.$, l = {}, c = [], p = "1.9.1", f = c.concat, d = c.push, h = c.slice, g = c.indexOf, m = l.toString, y = l.hasOwnProperty, v = p.trim, b = function (e, t) { return new b.fn.init(e, t, r) }, x = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, w = /\S+/g, T = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, N = /^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/, C = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, k = /^[\],:{}\s]*$/, E = /(?:^|:|,)(?:\s*\[)+/g, S = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g, A = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g, j = /^-ms-/, D = /-([\da-z])/gi, L = function (e, t) { return t.toUpperCase() }, H = function (e) { (o.addEventListener || "load" === e.type || "complete" === o.readyState) && (q(), b.ready()) }, q = function () { o.addEventListener ? (o.removeEventListener("DOMContentLoaded", H, !1), e.removeEventListener("load", H, !1)) : (o.detachEvent("onreadystatechange", H), e.detachEvent("onload", H)) }; b.fn = b.prototype = { jquery: p, constructor: b, init: function (e, n, r) { var i, a; if (!e) return this; if ("string" == typeof e) { if (i = "<" === e.charAt(0) && ">" === e.charAt(e.length - 1) && e.length >= 3 ? [null, e, null] : N.exec(e), !i || !i[1] && n) return !n || n.jquery ? (n || r).find(e) : this.constructor(n).find(e); if (i[1]) { if (n = n instanceof b ? n[0] : n, b.merge(this, b.parseHTML(i[1], n && n.nodeType ? n.ownerDocument || n : o, !0)), C.test(i[1]) && b.isPlainObject(n)) for (i in n) b.isFunction(this[i]) ? this[i](n[i]) : this.attr(i, n[i]); return this } if (a = o.getElementById(i[2]), a && a.parentNode) { if (a.id !== i[2]) return r.find(e); this.length = 1, this[0] = a } return this.context = o, this.selector = e, this } return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : b.isFunction(e) ? r.ready(e) : (e.selector !== t && (this.selector = e.selector, this.context = e.context), b.makeArray(e, this)) }, selector: "", length: 0, size: function () { return this.length }, toArray: function () { return h.call(this) }, get: function (e) { return null == e ? this.toArray() : 0 > e ? this[this.length + e] : this[e] }, pushStack: function (e) { var t = b.merge(this.constructor(), e); return t.prevObject = this, t.context = this.context, t }, each: function (e, t) { return b.each(this, e, t) }, ready: function (e) { return b.ready.promise().done(e), this }, slice: function () { return this.pushStack(h.apply(this, arguments)) }, first: function () { return this.eq(0) }, last: function () { return this.eq(-1) }, eq: function (e) { var t = this.length, n = +e + (0 > e ? t : 0); return this.pushStack(n >= 0 && t > n ? [this[n]] : []) }, map: function (e) { return this.pushStack(b.map(this, function (t, n) { return e.call(t, n, t) })) }, end: function () { return this.prevObject || this.constructor(null) }, push: d, sort: [].sort, splice: [].splice }, b.fn.init.prototype = b.fn, b.extend = b.fn.extend = function () { var e, n, r, i, o, a, s = arguments[0] || {}, u = 1, l = arguments.length, c = !1; for ("boolean" == typeof s && (c = s, s = arguments[1] || {}, u = 2), "object" == typeof s || b.isFunction(s) || (s = {}), l === u && (s = this, --u); l > u; u++) if (null != (o = arguments[u])) for (i in o) e = s[i], r = o[i], s !== r && (c && r && (b.isPlainObject(r) || (n = b.isArray(r))) ? (n ? (n = !1, a = e && b.isArray(e) ? e : []) : a = e && b.isPlainObject(e) ? e : {}, s[i] = b.extend(c, a, r)) : r !== t && (s[i] = r)); return s }, b.extend({ noConflict: function (t) { return e.$ === b && (e.$ = u), t && e.jQuery === b && (e.jQuery = s), b }, isReady: !1, readyWait: 1, holdReady: function (e) { e ? b.readyWait++ : b.ready(!0) }, ready: function (e) { if (e === !0 ? ! --b.readyWait : !b.isReady) { if (!o.body) return setTimeout(b.ready); b.isReady = !0, e !== !0 && --b.readyWait > 0 || (n.resolveWith(o, [b]), b.fn.trigger && b(o).trigger("ready").off("ready")) } }, isFunction: function (e) { return "function" === b.type(e) }, isArray: Array.isArray || function (e) { return "array" === b.type(e) }, isWindow: function (e) { return null != e && e == e.window }, isNumeric: function (e) { return !isNaN(parseFloat(e)) && isFinite(e) }, type: function (e) { return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? l[m.call(e)] || "object" : typeof e }, isPlainObject: function (e) { if (!e || "object" !== b.type(e) || e.nodeType || b.isWindow(e)) return !1; try { if (e.constructor && !y.call(e, "constructor") && !y.call(e.constructor.prototype, "isPrototypeOf")) return !1 } catch (n) { return !1 } var r; for (r in e); return r === t || y.call(e, r) }, isEmptyObject: function (e) { var t; for (t in e) return !1; return !0 }, error: function (e) { throw Error(e) }, parseHTML: function (e, t, n) { if (!e || "string" != typeof e) return null; "boolean" == typeof t && (n = t, t = !1), t = t || o; var r = C.exec(e), i = !n && []; return r ? [t.createElement(r[1])] : (r = b.buildFragment([e], t, i), i && b(i).remove(), b.merge([], r.childNodes)) }, parseJSON: function (n) { return e.JSON && e.JSON.parse ? e.JSON.parse(n) : null === n ? n : "string" == typeof n && (n = b.trim(n), n && k.test(n.replace(S, "@").replace(A, "]").replace(E, ""))) ? Function("return " + n)() : (b.error("Invalid JSON: " + n), t) }, parseXML: function (n) { var r, i; if (!n || "string" != typeof n) return null; try { e.DOMParser ? (i = new DOMParser, r = i.parseFromString(n, "text/xml")) : (r = new ActiveXObject("Microsoft.XMLDOM"), r.async = "false", r.loadXML(n)) } catch (o) { r = t } return r && r.documentElement && !r.getElementsByTagName("parsererror").length || b.error("Invalid XML: " + n), r }, noop: function () { }, globalEval: function (t) { t && b.trim(t) && (e.execScript || function (t) { e.eval.call(e, t) })(t) }, camelCase: function (e) { return e.replace(j, "ms-").replace(D, L) }, nodeName: function (e, t) { return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase() }, each: function (e, t, n) { var r, i = 0, o = e.length, a = M(e); if (n) { if (a) { for (; o > i; i++) if (r = t.apply(e[i], n), r === !1) break } else for (i in e) if (r = t.apply(e[i], n), r === !1) break } else if (a) { for (; o > i; i++) if (r = t.call(e[i], i, e[i]), r === !1) break } else for (i in e) if (r = t.call(e[i], i, e[i]), r === !1) break; return e }, trim: v && !v.call("\ufeff\u00a0") ? function (e) { return null == e ? "" : v.call(e) } : function (e) { return null == e ? "" : (e + "").replace(T, "") }, makeArray: function (e, t) { var n = t || []; return null != e && (M(Object(e)) ? b.merge(n, "string" == typeof e ? [e] : e) : d.call(n, e)), n }, inArray: function (e, t, n) { var r; if (t) { if (g) return g.call(t, e, n); for (r = t.length, n = n ? 0 > n ? Math.max(0, r + n) : n : 0; r > n; n++) if (n in t && t[n] === e) return n } return -1 }, merge: function (e, n) { var r = n.length, i = e.length, o = 0; if ("number" == typeof r) for (; r > o; o++) e[i++] = n[o]; else while (n[o] !== t) e[i++] = n[o++]; return e.length = i, e }, grep: function (e, t, n) { var r, i = [], o = 0, a = e.length; for (n = !!n; a > o; o++) r = !!t(e[o], o), n !== r && i.push(e[o]); return i }, map: function (e, t, n) { var r, i = 0, o = e.length, a = M(e), s = []; if (a) for (; o > i; i++) r = t(e[i], i, n), null != r && (s[s.length] = r); else for (i in e) r = t(e[i], i, n), null != r && (s[s.length] = r); return f.apply([], s) }, guid: 1, proxy: function (e, n) { var r, i, o; return "string" == typeof n && (o = e[n], n = e, e = o), b.isFunction(e) ? (r = h.call(arguments, 2), i = function () { return e.apply(n || this, r.concat(h.call(arguments))) }, i.guid = e.guid = e.guid || b.guid++, i) : t }, access: function (e, n, r, i, o, a, s) { var u = 0, l = e.length, c = null == r; if ("object" === b.type(r)) { o = !0; for (u in r) b.access(e, n, u, r[u], !0, a, s) } else if (i !== t && (o = !0, b.isFunction(i) || (s = !0), c && (s ? (n.call(e, i), n = null) : (c = n, n = function (e, t, n) { return c.call(b(e), n) })), n)) for (; l > u; u++) n(e[u], r, s ? i : i.call(e[u], u, n(e[u], r))); return o ? e : c ? n.call(e) : l ? n(e[0], r) : a }, now: function () { return (new Date).getTime() } }), b.ready.promise = function (t) { if (!n) if (n = b.Deferred(), "complete" === o.readyState) setTimeout(b.ready); else if (o.addEventListener) o.addEventListener("DOMContentLoaded", H, !1), e.addEventListener("load", H, !1); else { o.attachEvent("onreadystatechange", H), e.attachEvent("onload", H); var r = !1; try { r = null == e.frameElement && o.documentElement } catch (i) { } r && r.doScroll && function a() { if (!b.isReady) { try { r.doScroll("left") } catch (e) { return setTimeout(a, 50) } q(), b.ready() } } () } return n.promise(t) }, b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (e, t) { l["[object " + t + "]"] = t.toLowerCase() }); function M(e) { var t = e.length, n = b.type(e); return b.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === n || "function" !== n && (0 === t || "number" == typeof t && t > 0 && t - 1 in e) } r = b(o); var _ = {}; function F(e) { var t = _[e] = {}; return b.each(e.match(w) || [], function (e, n) { t[n] = !0 }), t } b.Callbacks = function (e) { e = "string" == typeof e ? _[e] || F(e) : b.extend({}, e); var n, r, i, o, a, s, u = [], l = !e.once && [], c = function (t) { for (r = e.memory && t, i = !0, a = s || 0, s = 0, o = u.length, n = !0; u && o > a; a++) if (u[a].apply(t[0], t[1]) === !1 && e.stopOnFalse) { r = !1; break } n = !1, u && (l ? l.length && c(l.shift()) : r ? u = [] : p.disable()) }, p = { add: function () { if (u) { var t = u.length; (function i(t) { b.each(t, function (t, n) { var r = b.type(n); "function" === r ? e.unique && p.has(n) || u.push(n) : n && n.length && "string" !== r && i(n) }) })(arguments), n ? o = u.length : r && (s = t, c(r)) } return this }, remove: function () { return u && b.each(arguments, function (e, t) { var r; while ((r = b.inArray(t, u, r)) > -1) u.splice(r, 1), n && (o >= r && o--, a >= r && a--) }), this }, has: function (e) { return e ? b.inArray(e, u) > -1 : !(!u || !u.length) }, empty: function () { return u = [], this }, disable: function () { return u = l = r = t, this }, disabled: function () { return !u }, lock: function () { return l = t, r || p.disable(), this }, locked: function () { return !l }, fireWith: function (e, t) { return t = t || [], t = [e, t.slice ? t.slice() : t], !u || i && !l || (n ? l.push(t) : c(t)), this }, fire: function () { return p.fireWith(this, arguments), this }, fired: function () { return !!i } }; return p }, b.extend({ Deferred: function (e) { var t = [["resolve", "done", b.Callbacks("once memory"), "resolved"], ["reject", "fail", b.Callbacks("once memory"), "rejected"], ["notify", "progress", b.Callbacks("memory")]], n = "pending", r = { state: function () { return n }, always: function () { return i.done(arguments).fail(arguments), this }, then: function () { var e = arguments; return b.Deferred(function (n) { b.each(t, function (t, o) { var a = o[0], s = b.isFunction(e[t]) && e[t]; i[o[1]](function () { var e = s && s.apply(this, arguments); e && b.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[a + "With"](this === r ? n.promise() : this, s ? [e] : arguments) }) }), e = null }).promise() }, promise: function (e) { return null != e ? b.extend(e, r) : r } }, i = {}; return r.pipe = r.then, b.each(t, function (e, o) { var a = o[2], s = o[3]; r[o[1]] = a.add, s && a.add(function () { n = s }, t[1 ^ e][2].disable, t[2][2].lock), i[o[0]] = function () { return i[o[0] + "With"](this === i ? r : this, arguments), this }, i[o[0] + "With"] = a.fireWith }), r.promise(i), e && e.call(i, i), i }, when: function (e) { var t = 0, n = h.call(arguments), r = n.length, i = 1 !== r || e && b.isFunction(e.promise) ? r : 0, o = 1 === i ? e : b.Deferred(), a = function (e, t, n) { return function (r) { t[e] = this, n[e] = arguments.length > 1 ? h.call(arguments) : r, n === s ? o.notifyWith(t, n) : --i || o.resolveWith(t, n) } }, s, u, l; if (r > 1) for (s = Array(r), u = Array(r), l = Array(r); r > t; t++) n[t] && b.isFunction(n[t].promise) ? n[t].promise().done(a(t, l, n)).fail(o.reject).progress(a(t, u, s)) : --i; return i || o.resolveWith(l, n), o.promise() } }), b.support = function () { var t, n, r, a, s, u, l, c, p, f, d = o.createElement("div"); if (d.setAttribute("className", "t"), d.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", n = d.getElementsByTagName("*"), r = d.getElementsByTagName("a")[0], !n || !r || !n.length) return {}; s = o.createElement("select"), l = s.appendChild(o.createElement("option")), a = d.getElementsByTagName("input")[0], r.style.cssText = "top:1px;float:left;opacity:.5", t = { getSetAttribute: "t" !== d.className, leadingWhitespace: 3 === d.firstChild.nodeType, tbody: !d.getElementsByTagName("tbody").length, htmlSerialize: !!d.getElementsByTagName("link").length, style: /top/.test(r.getAttribute("style")), hrefNormalized: "/a" === r.getAttribute("href"), opacity: /^0.5/.test(r.style.opacity), cssFloat: !!r.style.cssFloat, checkOn: !!a.value, optSelected: l.selected, enctype: !!o.createElement("form").enctype, html5Clone: "<:nav></:nav>" !== o.createElement("nav").cloneNode(!0).outerHTML, boxModel: "CSS1Compat" === o.compatMode, deleteExpando: !0, noCloneEvent: !0, inlineBlockNeedsLayout: !1, shrinkWrapBlocks: !1, reliableMarginRight: !0, boxSizingReliable: !0, pixelPosition: !1 }, a.checked = !0, t.noCloneChecked = a.cloneNode(!0).checked, s.disabled = !0, t.optDisabled = !l.disabled; try { delete d.test } catch (h) { t.deleteExpando = !1 } a = o.createElement("input"), a.setAttribute("value", ""), t.input = "" === a.getAttribute("value"), a.value = "t", a.setAttribute("type", "radio"), t.radioValue = "t" === a.value, a.setAttribute("checked", "t"), a.setAttribute("name", "t"), u = o.createDocumentFragment(), u.appendChild(a), t.appendChecked = a.checked, t.checkClone = u.cloneNode(!0).cloneNode(!0).lastChild.checked, d.attachEvent && (d.attachEvent("onclick", function () { t.noCloneEvent = !1 }), d.cloneNode(!0).click()); for (f in { submit: !0, change: !0, focusin: !0 }) d.setAttribute(c = "on" + f, "t"), t[f + "Bubbles"] = c in e || d.attributes[c].expando === !1; return d.style.backgroundClip = "content-box", d.cloneNode(!0).style.backgroundClip = "", t.clearCloneStyle = "content-box" === d.style.backgroundClip, b(function () { var n, r, a, s = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;", u = o.getElementsByTagName("body")[0]; u && (n = o.createElement("div"), n.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px", u.appendChild(n).appendChild(d), d.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", a = d.getElementsByTagName("td"), a[0].style.cssText = "padding:0;margin:0;border:0;display:none", p = 0 === a[0].offsetHeight, a[0].style.display = "", a[1].style.display = "none", t.reliableHiddenOffsets = p && 0 === a[0].offsetHeight, d.innerHTML = "", d.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;", t.boxSizing = 4 === d.offsetWidth, t.doesNotIncludeMarginInBodyOffset = 1 !== u.offsetTop, e.getComputedStyle && (t.pixelPosition = "1%" !== (e.getComputedStyle(d, null) || {}).top, t.boxSizingReliable = "4px" === (e.getComputedStyle(d, null) || { width: "4px" }).width, r = d.appendChild(o.createElement("div")), r.style.cssText = d.style.cssText = s, r.style.marginRight = r.style.width = "0", d.style.width = "1px", t.reliableMarginRight = !parseFloat((e.getComputedStyle(r, null) || {}).marginRight)), typeof d.style.zoom !== i && (d.innerHTML = "", d.style.cssText = s + "width:1px;padding:1px;display:inline;zoom:1", t.inlineBlockNeedsLayout = 3 === d.offsetWidth, d.style.display = "block", d.innerHTML = "<div></div>", d.firstChild.style.width = "5px", t.shrinkWrapBlocks = 3 !== d.offsetWidth, t.inlineBlockNeedsLayout && (u.style.zoom = 1)), u.removeChild(n), n = d = a = r = null) }), n = s = u = l = r = a = null, t } (); var O = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/, B = /([A-Z])/g; function P(e, n, r, i) { if (b.acceptData(e)) { var o, a, s = b.expando, u = "string" == typeof n, l = e.nodeType, p = l ? b.cache : e, f = l ? e[s] : e[s] && s; if (f && p[f] && (i || p[f].data) || !u || r !== t) return f || (l ? e[s] = f = c.pop() || b.guid++ : f = s), p[f] || (p[f] = {}, l || (p[f].toJSON = b.noop)), ("object" == typeof n || "function" == typeof n) && (i ? p[f] = b.extend(p[f], n) : p[f].data = b.extend(p[f].data, n)), o = p[f], i || (o.data || (o.data = {}), o = o.data), r !== t && (o[b.camelCase(n)] = r), u ? (a = o[n], null == a && (a = o[b.camelCase(n)])) : a = o, a } } function R(e, t, n) { if (b.acceptData(e)) { var r, i, o, a = e.nodeType, s = a ? b.cache : e, u = a ? e[b.expando] : b.expando; if (s[u]) { if (t && (o = n ? s[u] : s[u].data)) { b.isArray(t) ? t = t.concat(b.map(t, b.camelCase)) : t in o ? t = [t] : (t = b.camelCase(t), t = t in o ? [t] : t.split(" ")); for (r = 0, i = t.length; i > r; r++) delete o[t[r]]; if (!(n ? $ : b.isEmptyObject)(o)) return } (n || (delete s[u].data, $(s[u]))) && (a ? b.cleanData([e], !0) : b.support.deleteExpando || s != s.window ? delete s[u] : s[u] = null) } } } b.extend({ cache: {}, expando: "jQuery" + (p + Math.random()).replace(/\D/g, ""), noData: { embed: !0, object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000", applet: !0 }, hasData: function (e) { return e = e.nodeType ? b.cache[e[b.expando]] : e[b.expando], !!e && !$(e) }, data: function (e, t, n) { return P(e, t, n) }, removeData: function (e, t) { return R(e, t) }, _data: function (e, t, n) { return P(e, t, n, !0) }, _removeData: function (e, t) { return R(e, t, !0) }, acceptData: function (e) { if (e.nodeType && 1 !== e.nodeType && 9 !== e.nodeType) return !1; var t = e.nodeName && b.noData[e.nodeName.toLowerCase()]; return !t || t !== !0 && e.getAttribute("classid") === t } }), b.fn.extend({ data: function (e, n) { var r, i, o = this[0], a = 0, s = null; if (e === t) { if (this.length && (s = b.data(o), 1 === o.nodeType && !b._data(o, "parsedAttrs"))) { for (r = o.attributes; r.length > a; a++) i = r[a].name, i.indexOf("data-") || (i = b.camelCase(i.slice(5)), W(o, i, s[i])); b._data(o, "parsedAttrs", !0) } return s } return "object" == typeof e ? this.each(function () { b.data(this, e) }) : b.access(this, function (n) { return n === t ? o ? W(o, e, b.data(o, e)) : null : (this.each(function () { b.data(this, e, n) }), t) }, null, n, arguments.length > 1, null, !0) }, removeData: function (e) { return this.each(function () { b.removeData(this, e) }) } }); function W(e, n, r) { if (r === t && 1 === e.nodeType) { var i = "data-" + n.replace(B, "-$1").toLowerCase(); if (r = e.getAttribute(i), "string" == typeof r) { try { r = "true" === r ? !0 : "false" === r ? !1 : "null" === r ? null : +r + "" === r ? +r : O.test(r) ? b.parseJSON(r) : r } catch (o) { } b.data(e, n, r) } else r = t } return r } function $(e) { var t; for (t in e) if (("data" !== t || !b.isEmptyObject(e[t])) && "toJSON" !== t) return !1; return !0 } b.extend({ queue: function (e, n, r) { var i; return e ? (n = (n || "fx") + "queue", i = b._data(e, n), r && (!i || b.isArray(r) ? i = b._data(e, n, b.makeArray(r)) : i.push(r)), i || []) : t }, dequeue: function (e, t) { t = t || "fx"; var n = b.queue(e, t), r = n.length, i = n.shift(), o = b._queueHooks(e, t), a = function () { b.dequeue(e, t) }; "inprogress" === i && (i = n.shift(), r--), o.cur = i, i && ("fx" === t && n.unshift("inprogress"), delete o.stop, i.call(e, a, o)), !r && o && o.empty.fire() }, _queueHooks: function (e, t) { var n = t + "queueHooks"; return b._data(e, n) || b._data(e, n, { empty: b.Callbacks("once memory").add(function () { b._removeData(e, t + "queue"), b._removeData(e, n) }) }) } }), b.fn.extend({ queue: function (e, n) { var r = 2; return "string" != typeof e && (n = e, e = "fx", r--), r > arguments.length ? b.queue(this[0], e) : n === t ? this : this.each(function () { var t = b.queue(this, e, n); b._queueHooks(this, e), "fx" === e && "inprogress" !== t[0] && b.dequeue(this, e) }) }, dequeue: function (e) { return this.each(function () { b.dequeue(this, e) }) }, delay: function (e, t) { return e = b.fx ? b.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function (t, n) { var r = setTimeout(t, e); n.stop = function () { clearTimeout(r) } }) }, clearQueue: function (e) { return this.queue(e || "fx", []) }, promise: function (e, n) { var r, i = 1, o = b.Deferred(), a = this, s = this.length, u = function () { --i || o.resolveWith(a, [a]) }; "string" != typeof e && (n = e, e = t), e = e || "fx"; while (s--) r = b._data(a[s], e + "queueHooks"), r && r.empty && (i++, r.empty.add(u)); return u(), o.promise(n) } }); var I, z, X = /[\t\r\n]/g, U = /\r/g, V = /^(?:input|select|textarea|button|object)$/i, Y = /^(?:a|area)$/i, J = /^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i, G = /^(?:checked|selected)$/i, Q = b.support.getSetAttribute, K = b.support.input; b.fn.extend({ attr: function (e, t) { return b.access(this, b.attr, e, t, arguments.length > 1) }, removeAttr: function (e) { return this.each(function () { b.removeAttr(this, e) }) }, prop: function (e, t) { return b.access(this, b.prop, e, t, arguments.length > 1) }, removeProp: function (e) { return e = b.propFix[e] || e, this.each(function () { try { this[e] = t, delete this[e] } catch (n) { } }) }, addClass: function (e) { var t, n, r, i, o, a = 0, s = this.length, u = "string" == typeof e && e; if (b.isFunction(e)) return this.each(function (t) { b(this).addClass(e.call(this, t, this.className)) }); if (u) for (t = (e || "").match(w) || []; s > a; a++) if (n = this[a], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(X, " ") : " ")) { o = 0; while (i = t[o++]) 0 > r.indexOf(" " + i + " ") && (r += i + " "); n.className = b.trim(r) } return this }, removeClass: function (e) { var t, n, r, i, o, a = 0, s = this.length, u = 0 === arguments.length || "string" == typeof e && e; if (b.isFunction(e)) return this.each(function (t) { b(this).removeClass(e.call(this, t, this.className)) }); if (u) for (t = (e || "").match(w) || []; s > a; a++) if (n = this[a], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(X, " ") : "")) { o = 0; while (i = t[o++]) while (r.indexOf(" " + i + " ") >= 0) r = r.replace(" " + i + " ", " "); n.className = e ? b.trim(r) : "" } return this }, toggleClass: function (e, t) { var n = typeof e, r = "boolean" == typeof t; return b.isFunction(e) ? this.each(function (n) { b(this).toggleClass(e.call(this, n, this.className, t), t) }) : this.each(function () { if ("string" === n) { var o, a = 0, s = b(this), u = t, l = e.match(w) || []; while (o = l[a++]) u = r ? u : !s.hasClass(o), s[u ? "addClass" : "removeClass"](o) } else (n === i || "boolean" === n) && (this.className && b._data(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : b._data(this, "__className__") || "") }) }, hasClass: function (e) { var t = " " + e + " ", n = 0, r = this.length; for (; r > n; n++) if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(X, " ").indexOf(t) >= 0) return !0; return !1 }, val: function (e) { var n, r, i, o = this[0]; { if (arguments.length) return i = b.isFunction(e), this.each(function (n) { var o, a = b(this); 1 === this.nodeType && (o = i ? e.call(this, n, a.val()) : e, null == o ? o = "" : "number" == typeof o ? o += "" : b.isArray(o) && (o = b.map(o, function (e) { return null == e ? "" : e + "" })), r = b.valHooks[this.type] || b.valHooks[this.nodeName.toLowerCase()], r && "set" in r && r.set(this, o, "value") !== t || (this.value = o)) }); if (o) return r = b.valHooks[o.type] || b.valHooks[o.nodeName.toLowerCase()], r && "get" in r && (n = r.get(o, "value")) !== t ? n : (n = o.value, "string" == typeof n ? n.replace(U, "") : null == n ? "" : n) } } }), b.extend({ valHooks: { option: { get: function (e) { var t = e.attributes.value; return !t || t.specified ? e.value : e.text } }, select: { get: function (e) { var t, n, r = e.options, i = e.selectedIndex, o = "select-one" === e.type || 0 > i, a = o ? null : [], s = o ? i + 1 : r.length, u = 0 > i ? s : o ? i : 0; for (; s > u; u++) if (n = r[u], !(!n.selected && u !== i || (b.support.optDisabled ? n.disabled : null !== n.getAttribute("disabled")) || n.parentNode.disabled && b.nodeName(n.parentNode, "optgroup"))) { if (t = b(n).val(), o) return t; a.push(t) } return a }, set: function (e, t) { var n = b.makeArray(t); return b(e).find("option").each(function () { this.selected = b.inArray(b(this).val(), n) >= 0 }), n.length || (e.selectedIndex = -1), n } } }, attr: function (e, n, r) { var o, a, s, u = e.nodeType; if (e && 3 !== u && 8 !== u && 2 !== u) return typeof e.getAttribute === i ? b.prop(e, n, r) : (a = 1 !== u || !b.isXMLDoc(e), a && (n = n.toLowerCase(), o = b.attrHooks[n] || (J.test(n) ? z : I)), r === t ? o && a && "get" in o && null !== (s = o.get(e, n)) ? s : (typeof e.getAttribute !== i && (s = e.getAttribute(n)), null == s ? t : s) : null !== r ? o && a && "set" in o && (s = o.set(e, r, n)) !== t ? s : (e.setAttribute(n, r + ""), r) : (b.removeAttr(e, n), t)) }, removeAttr: function (e, t) { var n, r, i = 0, o = t && t.match(w); if (o && 1 === e.nodeType) while (n = o[i++]) r = b.propFix[n] || n, J.test(n) ? !Q && G.test(n) ? e[b.camelCase("default-" + n)] = e[r] = !1 : e[r] = !1 : b.attr(e, n, ""), e.removeAttribute(Q ? n : r) }, attrHooks: { type: { set: function (e, t) { if (!b.support.radioValue && "radio" === t && b.nodeName(e, "input")) { var n = e.value; return e.setAttribute("type", t), n && (e.value = n), t } } } }, propFix: { tabindex: "tabIndex", readonly: "readOnly", "for": "htmlFor", "class": "className", maxlength: "maxLength", cellspacing: "cellSpacing", cellpadding: "cellPadding", rowspan: "rowSpan", colspan: "colSpan", usemap: "useMap", frameborder: "frameBorder", contenteditable: "contentEditable" }, prop: function (e, n, r) { var i, o, a, s = e.nodeType; if (e && 3 !== s && 8 !== s && 2 !== s) return a = 1 !== s || !b.isXMLDoc(e), a && (n = b.propFix[n] || n, o = b.propHooks[n]), r !== t ? o && "set" in o && (i = o.set(e, r, n)) !== t ? i : e[n] = r : o && "get" in o && null !== (i = o.get(e, n)) ? i : e[n] }, propHooks: { tabIndex: { get: function (e) { var n = e.getAttributeNode("tabindex"); return n && n.specified ? parseInt(n.value, 10) : V.test(e.nodeName) || Y.test(e.nodeName) && e.href ? 0 : t } }} }), z = { get: function (e, n) { var r = b.prop(e, n), i = "boolean" == typeof r && e.getAttribute(n), o = "boolean" == typeof r ? K && Q ? null != i : G.test(n) ? e[b.camelCase("default-" + n)] : !!i : e.getAttributeNode(n); return o && o.value !== !1 ? n.toLowerCase() : t }, set: function (e, t, n) { return t === !1 ? b.removeAttr(e, n) : K && Q || !G.test(n) ? e.setAttribute(!Q && b.propFix[n] || n, n) : e[b.camelCase("default-" + n)] = e[n] = !0, n } }, K && Q || (b.attrHooks.value = { get: function (e, n) { var r = e.getAttributeNode(n); return b.nodeName(e, "input") ? e.defaultValue : r && r.specified ? r.value : t }, set: function (e, n, r) { return b.nodeName(e, "input") ? (e.defaultValue = n, t) : I && I.set(e, n, r) } }), Q || (I = b.valHooks.button = { get: function (e, n) { var r = e.getAttributeNode(n); return r && ("id" === n || "name" === n || "coords" === n ? "" !== r.value : r.specified) ? r.value : t }, set: function (e, n, r) { var i = e.getAttributeNode(r); return i || e.setAttributeNode(i = e.ownerDocument.createAttribute(r)), i.value = n += "", "value" === r || n === e.getAttribute(r) ? n : t } }, b.attrHooks.contenteditable = { get: I.get, set: function (e, t, n) { I.set(e, "" === t ? !1 : t, n) } }, b.each(["width", "height"], function (e, n) { b.attrHooks[n] = b.extend(b.attrHooks[n], { set: function (e, r) { return "" === r ? (e.setAttribute(n, "auto"), r) : t } }) })), b.support.hrefNormalized || (b.each(["href", "src", "width", "height"], function (e, n) { b.attrHooks[n] = b.extend(b.attrHooks[n], { get: function (e) { var r = e.getAttribute(n, 2); return null == r ? t : r } }) }), b.each(["href", "src"], function (e, t) { b.propHooks[t] = { get: function (e) { return e.getAttribute(t, 4) } } })), b.support.style || (b.attrHooks.style = { get: function (e) { return e.style.cssText || t }, set: function (e, t) { return e.style.cssText = t + "" } }), b.support.optSelected || (b.propHooks.selected = b.extend(b.propHooks.selected, { get: function (e) { var t = e.parentNode; return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex), null } })), b.support.enctype || (b.propFix.enctype = "encoding"), b.support.checkOn || b.each(["radio", "checkbox"], function () { b.valHooks[this] = { get: function (e) { return null === e.getAttribute("value") ? "on" : e.value } } }), b.each(["radio", "checkbox"], function () { b.valHooks[this] = b.extend(b.valHooks[this], { set: function (e, n) { return b.isArray(n) ? e.checked = b.inArray(b(e).val(), n) >= 0 : t } }) }); var Z = /^(?:input|select|textarea)$/i, et = /^key/, tt = /^(?:mouse|contextmenu)|click/, nt = /^(?:focusinfocus|focusoutblur)$/, rt = /^([^.]*)(?:\.(.+)|)$/; function it() { return !0 } function ot() { return !1 } b.event = { global: {}, add: function (e, n, r, o, a) { var s, u, l, c, p, f, d, h, g, m, y, v = b._data(e); if (v) { r.handler && (c = r, r = c.handler, a = c.selector), r.guid || (r.guid = b.guid++), (u = v.events) || (u = v.events = {}), (f = v.handle) || (f = v.handle = function (e) { return typeof b === i || e && b.event.triggered === e.type ? t : b.event.dispatch.apply(f.elem, arguments) }, f.elem = e), n = (n || "").match(w) || [""], l = n.length; while (l--) s = rt.exec(n[l]) || [], g = y = s[1], m = (s[2] || "").split(".").sort(), p = b.event.special[g] || {}, g = (a ? p.delegateType : p.bindType) || g, p = b.event.special[g] || {}, d = b.extend({ type: g, origType: y, data: o, handler: r, guid: r.guid, selector: a, needsContext: a && b.expr.match.needsContext.test(a), namespace: m.join(".") }, c), (h = u[g]) || (h = u[g] = [], h.delegateCount = 0, p.setup && p.setup.call(e, o, m, f) !== !1 || (e.addEventListener ? e.addEventListener(g, f, !1) : e.attachEvent && e.attachEvent("on" + g, f))), p.add && (p.add.call(e, d), d.handler.guid || (d.handler.guid = r.guid)), a ? h.splice(h.delegateCount++, 0, d) : h.push(d), b.event.global[g] = !0; e = null } }, remove: function (e, t, n, r, i) { var o, a, s, u, l, c, p, f, d, h, g, m = b.hasData(e) && b._data(e); if (m && (c = m.events)) { t = (t || "").match(w) || [""], l = t.length; while (l--) if (s = rt.exec(t[l]) || [], d = g = s[1], h = (s[2] || "").split(".").sort(), d) { p = b.event.special[d] || {}, d = (r ? p.delegateType : p.bindType) || d, f = c[d] || [], s = s[2] && RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)"), u = o = f.length; while (o--) a = f[o], !i && g !== a.origType || n && n.guid !== a.guid || s && !s.test(a.namespace) || r && r !== a.selector && ("**" !== r || !a.selector) || (f.splice(o, 1), a.selector && f.delegateCount--, p.remove && p.remove.call(e, a)); u && !f.length && (p.teardown && p.teardown.call(e, h, m.handle) !== !1 || b.removeEvent(e, d, m.handle), delete c[d]) } else for (d in c) b.event.remove(e, d + t[l], n, r, !0); b.isEmptyObject(c) && (delete m.handle, b._removeData(e, "events")) } }, trigger: function (n, r, i, a) { var s, u, l, c, p, f, d, h = [i || o], g = y.call(n, "type") ? n.type : n, m = y.call(n, "namespace") ? n.namespace.split(".") : []; if (l = f = i = i || o, 3 !== i.nodeType && 8 !== i.nodeType && !nt.test(g + b.event.triggered) && (g.indexOf(".") >= 0 && (m = g.split("."), g = m.shift(), m.sort()), u = 0 > g.indexOf(":") && "on" + g, n = n[b.expando] ? n : new b.Event(g, "object" == typeof n && n), n.isTrigger = !0, n.namespace = m.join("."), n.namespace_re = n.namespace ? RegExp("(^|\\.)" + m.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, n.result = t, n.target || (n.target = i), r = null == r ? [n] : b.makeArray(r, [n]), p = b.event.special[g] || {}, a || !p.trigger || p.trigger.apply(i, r) !== !1)) { if (!a && !p.noBubble && !b.isWindow(i)) { for (c = p.delegateType || g, nt.test(c + g) || (l = l.parentNode); l; l = l.parentNode) h.push(l), f = l; f === (i.ownerDocument || o) && h.push(f.defaultView || f.parentWindow || e) } d = 0; while ((l = h[d++]) && !n.isPropagationStopped()) n.type = d > 1 ? c : p.bindType || g, s = (b._data(l, "events") || {})[n.type] && b._data(l, "handle"), s && s.apply(l, r), s = u && l[u], s && b.acceptData(l) && s.apply && s.apply(l, r) === !1 && n.preventDefault(); if (n.type = g, !(a || n.isDefaultPrevented() || p._default && p._default.apply(i.ownerDocument, r) !== !1 || "click" === g && b.nodeName(i, "a") || !b.acceptData(i) || !u || !i[g] || b.isWindow(i))) { f = i[u], f && (i[u] = null), b.event.triggered = g; try { i[g]() } catch (v) { } b.event.triggered = t, f && (i[u] = f) } return n.result } }, dispatch: function (e) { e = b.event.fix(e); var n, r, i, o, a, s = [], u = h.call(arguments), l = (b._data(this, "events") || {})[e.type] || [], c = b.event.special[e.type] || {}; if (u[0] = e, e.delegateTarget = this, !c.preDispatch || c.preDispatch.call(this, e) !== !1) { s = b.event.handlers.call(this, e, l), n = 0; while ((o = s[n++]) && !e.isPropagationStopped()) { e.currentTarget = o.elem, a = 0; while ((i = o.handlers[a++]) && !e.isImmediatePropagationStopped()) (!e.namespace_re || e.namespace_re.test(i.namespace)) && (e.handleObj = i, e.data = i.data, r = ((b.event.special[i.origType] || {}).handle || i.handler).apply(o.elem, u), r !== t && (e.result = r) === !1 && (e.preventDefault(), e.stopPropagation())) } return c.postDispatch && c.postDispatch.call(this, e), e.result } }, handlers: function (e, n) { var r, i, o, a, s = [], u = n.delegateCount, l = e.target; if (u && l.nodeType && (!e.button || "click" !== e.type)) for (; l != this; l = l.parentNode || this) if (1 === l.nodeType && (l.disabled !== !0 || "click" !== e.type)) { for (o = [], a = 0; u > a; a++) i = n[a], r = i.selector + " ", o[r] === t && (o[r] = i.needsContext ? b(r, this).index(l) >= 0 : b.find(r, this, null, [l]).length), o[r] && o.push(i); o.length && s.push({ elem: l, handlers: o }) } return n.length > u && s.push({ elem: this, handlers: n.slice(u) }), s }, fix: function (e) { if (e[b.expando]) return e; var t, n, r, i = e.type, a = e, s = this.fixHooks[i]; s || (this.fixHooks[i] = s = tt.test(i) ? this.mouseHooks : et.test(i) ? this.keyHooks : {}), r = s.props ? this.props.concat(s.props) : this.props, e = new b.Event(a), t = r.length; while (t--) n = r[t], e[n] = a[n]; return e.target || (e.target = a.srcElement || o), 3 === e.target.nodeType && (e.target = e.target.parentNode), e.metaKey = !!e.metaKey, s.filter ? s.filter(e, a) : e }, props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "), fixHooks: {}, keyHooks: { props: "char charCode key keyCode".split(" "), filter: function (e, t) { return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e } }, mouseHooks: { props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "), filter: function (e, n) { var r, i, a, s = n.button, u = n.fromElement; return null == e.pageX && null != n.clientX && (i = e.target.ownerDocument || o, a = i.documentElement, r = i.body, e.pageX = n.clientX + (a && a.scrollLeft || r && r.scrollLeft || 0) - (a && a.clientLeft || r && r.clientLeft || 0), e.pageY = n.clientY + (a && a.scrollTop || r && r.scrollTop || 0) - (a && a.clientTop || r && r.clientTop || 0)), !e.relatedTarget && u && (e.relatedTarget = u === e.target ? n.toElement : u), e.which || s === t || (e.which = 1 & s ? 1 : 2 & s ? 3 : 4 & s ? 2 : 0), e } }, special: { load: { noBubble: !0 }, click: { trigger: function () { return b.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(), !1) : t } }, focus: { trigger: function () { if (this !== o.activeElement && this.focus) try { return this.focus(), !1 } catch (e) { } }, delegateType: "focusin" }, blur: { trigger: function () { return this === o.activeElement && this.blur ? (this.blur(), !1) : t }, delegateType: "focusout" }, beforeunload: { postDispatch: function (e) { e.result !== t && (e.originalEvent.returnValue = e.result) } } }, simulate: function (e, t, n, r) { var i = b.extend(new b.Event, n, { type: e, isSimulated: !0, originalEvent: {} }); r ? b.event.trigger(i, null, t) : b.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault() } }, b.removeEvent = o.removeEventListener ? function (e, t, n) { e.removeEventListener && e.removeEventListener(t, n, !1) } : function (e, t, n) { var r = "on" + t; e.detachEvent && (typeof e[r] === i && (e[r] = null), e.detachEvent(r, n)) }, b.Event = function (e, n) { return this instanceof b.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || e.returnValue === !1 || e.getPreventDefault && e.getPreventDefault() ? it : ot) : this.type = e, n && b.extend(this, n), this.timeStamp = e && e.timeStamp || b.now(), this[b.expando] = !0, t) : new b.Event(e, n) }, b.Event.prototype = { isDefaultPrevented: ot, isPropagationStopped: ot, isImmediatePropagationStopped: ot, preventDefault: function () { var e = this.originalEvent; this.isDefaultPrevented = it, e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1) }, stopPropagation: function () { var e = this.originalEvent; this.isPropagationStopped = it, e && (e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0) }, stopImmediatePropagation: function () { this.isImmediatePropagationStopped = it, this.stopPropagation() } }, b.each({ mouseenter: "mouseover", mouseleave: "mouseout" }, function (e, t) {
        b.event.special[e] = { delegateType: t, bindType: t, handle: function (e) {
            var n, r = this, i = e.relatedTarget, o = e.handleObj;
            return (!i || i !== r && !b.contains(r, i)) && (e.type = o.origType, n = o.handler.apply(this, arguments), e.type = t), n
        } 
        }
    }), b.support.submitBubbles || (b.event.special.submit = { setup: function () { return b.nodeName(this, "form") ? !1 : (b.event.add(this, "click._submit keypress._submit", function (e) { var n = e.target, r = b.nodeName(n, "input") || b.nodeName(n, "button") ? n.form : t; r && !b._data(r, "submitBubbles") && (b.event.add(r, "submit._submit", function (e) { e._submit_bubble = !0 }), b._data(r, "submitBubbles", !0)) }), t) }, postDispatch: function (e) { e._submit_bubble && (delete e._submit_bubble, this.parentNode && !e.isTrigger && b.event.simulate("submit", this.parentNode, e, !0)) }, teardown: function () { return b.nodeName(this, "form") ? !1 : (b.event.remove(this, "._submit"), t) } }), b.support.changeBubbles || (b.event.special.change = { setup: function () { return Z.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (b.event.add(this, "propertychange._change", function (e) { "checked" === e.originalEvent.propertyName && (this._just_changed = !0) }), b.event.add(this, "click._change", function (e) { this._just_changed && !e.isTrigger && (this._just_changed = !1), b.event.simulate("change", this, e, !0) })), !1) : (b.event.add(this, "beforeactivate._change", function (e) { var t = e.target; Z.test(t.nodeName) && !b._data(t, "changeBubbles") && (b.event.add(t, "change._change", function (e) { !this.parentNode || e.isSimulated || e.isTrigger || b.event.simulate("change", this.parentNode, e, !0) }), b._data(t, "changeBubbles", !0)) }), t) }, handle: function (e) { var n = e.target; return this !== n || e.isSimulated || e.isTrigger || "radio" !== n.type && "checkbox" !== n.type ? e.handleObj.handler.apply(this, arguments) : t }, teardown: function () { return b.event.remove(this, "._change"), !Z.test(this.nodeName) } }), b.support.focusinBubbles || b.each({ focus: "focusin", blur: "focusout" }, function (e, t) { var n = 0, r = function (e) { b.event.simulate(t, e.target, b.event.fix(e), !0) }; b.event.special[t] = { setup: function () { 0 === n++ && o.addEventListener(e, r, !0) }, teardown: function () { 0 === --n && o.removeEventListener(e, r, !0) } } }), b.fn.extend({ on: function (e, n, r, i, o) { var a, s; if ("object" == typeof e) { "string" != typeof n && (r = r || n, n = t); for (a in e) this.on(a, n, r, e[a], o); return this } if (null == r && null == i ? (i = n, r = n = t) : null == i && ("string" == typeof n ? (i = r, r = t) : (i = r, r = n, n = t)), i === !1) i = ot; else if (!i) return this; return 1 === o && (s = i, i = function (e) { return b().off(e), s.apply(this, arguments) }, i.guid = s.guid || (s.guid = b.guid++)), this.each(function () { b.event.add(this, e, i, r, n) }) }, one: function (e, t, n, r) { return this.on(e, t, n, r, 1) }, off: function (e, n, r) { var i, o; if (e && e.preventDefault && e.handleObj) return i = e.handleObj, b(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), this; if ("object" == typeof e) { for (o in e) this.off(o, n, e[o]); return this } return (n === !1 || "function" == typeof n) && (r = n, n = t), r === !1 && (r = ot), this.each(function () { b.event.remove(this, e, r, n) }) }, bind: function (e, t, n) { return this.on(e, null, t, n) }, unbind: function (e, t) { return this.off(e, null, t) }, delegate: function (e, t, n, r) { return this.on(t, e, n, r) }, undelegate: function (e, t, n) { return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n) }, trigger: function (e, t) { return this.each(function () { b.event.trigger(e, t, this) }) }, triggerHandler: function (e, n) { var r = this[0]; return r ? b.event.trigger(e, n, r, !0) : t } }), function (e, t) { var n, r, i, o, a, s, u, l, c, p, f, d, h, g, m, y, v, x = "sizzle" + -new Date, w = e.document, T = {}, N = 0, C = 0, k = it(), E = it(), S = it(), A = typeof t, j = 1 << 31, D = [], L = D.pop, H = D.push, q = D.slice, M = D.indexOf || function (e) { var t = 0, n = this.length; for (; n > t; t++) if (this[t] === e) return t; return -1 }, _ = "[\\x20\\t\\r\\n\\f]", F = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", O = F.replace("w", "w#"), B = "([*^$|!~]?=)", P = "\\[" + _ + "*(" + F + ")" + _ + "*(?:" + B + _ + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + O + ")|)|)" + _ + "*\\]", R = ":(" + F + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + P.replace(3, 8) + ")*)|.*)\\)|)", W = RegExp("^" + _ + "+|((?:^|[^\\\\])(?:\\\\.)*)" + _ + "+$", "g"), $ = RegExp("^" + _ + "*," + _ + "*"), I = RegExp("^" + _ + "*([\\x20\\t\\r\\n\\f>+~])" + _ + "*"), z = RegExp(R), X = RegExp("^" + O + "$"), U = { ID: RegExp("^#(" + F + ")"), CLASS: RegExp("^\\.(" + F + ")"), NAME: RegExp("^\\[name=['\"]?(" + F + ")['\"]?\\]"), TAG: RegExp("^(" + F.replace("w", "w*") + ")"), ATTR: RegExp("^" + P), PSEUDO: RegExp("^" + R), CHILD: RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + _ + "*(even|odd|(([+-]|)(\\d*)n|)" + _ + "*(?:([+-]|)" + _ + "*(\\d+)|))" + _ + "*\\)|)", "i"), needsContext: RegExp("^" + _ + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + _ + "*((?:-\\d)?\\d*)" + _ + "*\\)|)(?=[^-]|$)", "i") }, V = /[\x20\t\r\n\f]*[+~]/, Y = /^[^{]+\{\s*\[native code/, J = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, G = /^(?:input|select|textarea|button)$/i, Q = /^h\d$/i, K = /'|\\/g, Z = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g, et = /\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g, tt = function (e, t) { var n = "0x" + t - 65536; return n !== n ? t : 0 > n ? String.fromCharCode(n + 65536) : String.fromCharCode(55296 | n >> 10, 56320 | 1023 & n) }; try { q.call(w.documentElement.childNodes, 0)[0].nodeType } catch (nt) { q = function (e) { var t, n = []; while (t = this[e++]) n.push(t); return n } } function rt(e) { return Y.test(e + "") } function it() { var e, t = []; return e = function (n, r) { return t.push(n += " ") > i.cacheLength && delete e[t.shift()], e[n] = r } } function ot(e) { return e[x] = !0, e } function at(e) { var t = p.createElement("div"); try { return e(t) } catch (n) { return !1 } finally { t = null } } function st(e, t, n, r) { var i, o, a, s, u, l, f, g, m, v; if ((t ? t.ownerDocument || t : w) !== p && c(t), t = t || p, n = n || [], !e || "string" != typeof e) return n; if (1 !== (s = t.nodeType) && 9 !== s) return []; if (!d && !r) { if (i = J.exec(e)) if (a = i[1]) { if (9 === s) { if (o = t.getElementById(a), !o || !o.parentNode) return n; if (o.id === a) return n.push(o), n } else if (t.ownerDocument && (o = t.ownerDocument.getElementById(a)) && y(t, o) && o.id === a) return n.push(o), n } else { if (i[2]) return H.apply(n, q.call(t.getElementsByTagName(e), 0)), n; if ((a = i[3]) && T.getByClassName && t.getElementsByClassName) return H.apply(n, q.call(t.getElementsByClassName(a), 0)), n } if (T.qsa && !h.test(e)) { if (f = !0, g = x, m = t, v = 9 === s && e, 1 === s && "object" !== t.nodeName.toLowerCase()) { l = ft(e), (f = t.getAttribute("id")) ? g = f.replace(K, "\\$&") : t.setAttribute("id", g), g = "[id='" + g + "'] ", u = l.length; while (u--) l[u] = g + dt(l[u]); m = V.test(e) && t.parentNode || t, v = l.join(",") } if (v) try { return H.apply(n, q.call(m.querySelectorAll(v), 0)), n } catch (b) { } finally { f || t.removeAttribute("id") } } } return wt(e.replace(W, "$1"), t, n, r) } a = st.isXML = function (e) { var t = e && (e.ownerDocument || e).documentElement; return t ? "HTML" !== t.nodeName : !1 }, c = st.setDocument = function (e) { var n = e ? e.ownerDocument || e : w; return n !== p && 9 === n.nodeType && n.documentElement ? (p = n, f = n.documentElement, d = a(n), T.tagNameNoComments = at(function (e) { return e.appendChild(n.createComment("")), !e.getElementsByTagName("*").length }), T.attributes = at(function (e) { e.innerHTML = "<select></select>"; var t = typeof e.lastChild.getAttribute("multiple"); return "boolean" !== t && "string" !== t }), T.getByClassName = at(function (e) { return e.innerHTML = "<div class='hidden e'></div><div class='hidden'></div>", e.getElementsByClassName && e.getElementsByClassName("e").length ? (e.lastChild.className = "e", 2 === e.getElementsByClassName("e").length) : !1 }), T.getByName = at(function (e) { e.id = x + 0, e.innerHTML = "<a name='" + x + "'></a><div name='" + x + "'></div>", f.insertBefore(e, f.firstChild); var t = n.getElementsByName && n.getElementsByName(x).length === 2 + n.getElementsByName(x + 0).length; return T.getIdNotName = !n.getElementById(x), f.removeChild(e), t }), i.attrHandle = at(function (e) { return e.innerHTML = "<a href='#'></a>", e.firstChild && typeof e.firstChild.getAttribute !== A && "#" === e.firstChild.getAttribute("href") }) ? {} : { href: function (e) { return e.getAttribute("href", 2) }, type: function (e) { return e.getAttribute("type") } }, T.getIdNotName ? (i.find.ID = function (e, t) { if (typeof t.getElementById !== A && !d) { var n = t.getElementById(e); return n && n.parentNode ? [n] : [] } }, i.filter.ID = function (e) { var t = e.replace(et, tt); return function (e) { return e.getAttribute("id") === t } }) : (i.find.ID = function (e, n) { if (typeof n.getElementById !== A && !d) { var r = n.getElementById(e); return r ? r.id === e || typeof r.getAttributeNode !== A && r.getAttributeNode("id").value === e ? [r] : t : [] } }, i.filter.ID = function (e) { var t = e.replace(et, tt); return function (e) { var n = typeof e.getAttributeNode !== A && e.getAttributeNode("id"); return n && n.value === t } }), i.find.TAG = T.tagNameNoComments ? function (e, n) { return typeof n.getElementsByTagName !== A ? n.getElementsByTagName(e) : t } : function (e, t) { var n, r = [], i = 0, o = t.getElementsByTagName(e); if ("*" === e) { while (n = o[i++]) 1 === n.nodeType && r.push(n); return r } return o }, i.find.NAME = T.getByName && function (e, n) { return typeof n.getElementsByName !== A ? n.getElementsByName(name) : t }, i.find.CLASS = T.getByClassName && function (e, n) { return typeof n.getElementsByClassName === A || d ? t : n.getElementsByClassName(e) }, g = [], h = [":focus"], (T.qsa = rt(n.querySelectorAll)) && (at(function (e) { e.innerHTML = "<select><option selected=''></option></select>", e.querySelectorAll("[selected]").length || h.push("\\[" + _ + "*(?:checked|disabled|ismap|multiple|readonly|selected|value)"), e.querySelectorAll(":checked").length || h.push(":checked") }), at(function (e) { e.innerHTML = "<input type='hidden' i=''/>", e.querySelectorAll("[i^='']").length && h.push("[*^$]=" + _ + "*(?:\"\"|'')"), e.querySelectorAll(":enabled").length || h.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), h.push(",.*:") })), (T.matchesSelector = rt(m = f.matchesSelector || f.mozMatchesSelector || f.webkitMatchesSelector || f.oMatchesSelector || f.msMatchesSelector)) && at(function (e) { T.disconnectedMatch = m.call(e, "div"), m.call(e, "[s!='']:x"), g.push("!=", R) }), h = RegExp(h.join("|")), g = RegExp(g.join("|")), y = rt(f.contains) || f.compareDocumentPosition ? function (e, t) { var n = 9 === e.nodeType ? e.documentElement : e, r = t && t.parentNode; return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r))) } : function (e, t) { if (t) while (t = t.parentNode) if (t === e) return !0; return !1 }, v = f.compareDocumentPosition ? function (e, t) { var r; return e === t ? (u = !0, 0) : (r = t.compareDocumentPosition && e.compareDocumentPosition && e.compareDocumentPosition(t)) ? 1 & r || e.parentNode && 11 === e.parentNode.nodeType ? e === n || y(w, e) ? -1 : t === n || y(w, t) ? 1 : 0 : 4 & r ? -1 : 1 : e.compareDocumentPosition ? -1 : 1 } : function (e, t) { var r, i = 0, o = e.parentNode, a = t.parentNode, s = [e], l = [t]; if (e === t) return u = !0, 0; if (!o || !a) return e === n ? -1 : t === n ? 1 : o ? -1 : a ? 1 : 0; if (o === a) return ut(e, t); r = e; while (r = r.parentNode) s.unshift(r); r = t; while (r = r.parentNode) l.unshift(r); while (s[i] === l[i]) i++; return i ? ut(s[i], l[i]) : s[i] === w ? -1 : l[i] === w ? 1 : 0 }, u = !1, [0, 0].sort(v), T.detectDuplicates = u, p) : p }, st.matches = function (e, t) { return st(e, null, null, t) }, st.matchesSelector = function (e, t) { if ((e.ownerDocument || e) !== p && c(e), t = t.replace(Z, "='$1']"), !(!T.matchesSelector || d || g && g.test(t) || h.test(t))) try { var n = m.call(e, t); if (n || T.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n } catch (r) { } return st(t, p, null, [e]).length > 0 }, st.contains = function (e, t) { return (e.ownerDocument || e) !== p && c(e), y(e, t) }, st.attr = function (e, t) { var n; return (e.ownerDocument || e) !== p && c(e), d || (t = t.toLowerCase()), (n = i.attrHandle[t]) ? n(e) : d || T.attributes ? e.getAttribute(t) : ((n = e.getAttributeNode(t)) || e.getAttribute(t)) && e[t] === !0 ? t : n && n.specified ? n.value : null }, st.error = function (e) { throw Error("Syntax error, unrecognized expression: " + e) }, st.uniqueSort = function (e) { var t, n = [], r = 1, i = 0; if (u = !T.detectDuplicates, e.sort(v), u) { for (; t = e[r]; r++) t === e[r - 1] && (i = n.push(r)); while (i--) e.splice(n[i], 1) } return e }; function ut(e, t) { var n = t && e, r = n && (~t.sourceIndex || j) - (~e.sourceIndex || j); if (r) return r; if (n) while (n = n.nextSibling) if (n === t) return -1; return e ? 1 : -1 } function lt(e) { return function (t) { var n = t.nodeName.toLowerCase(); return "input" === n && t.type === e } } function ct(e) { return function (t) { var n = t.nodeName.toLowerCase(); return ("input" === n || "button" === n) && t.type === e } } function pt(e) { return ot(function (t) { return t = +t, ot(function (n, r) { var i, o = e([], n.length, t), a = o.length; while (a--) n[i = o[a]] && (n[i] = !(r[i] = n[i])) }) }) } o = st.getText = function (e) { var t, n = "", r = 0, i = e.nodeType; if (i) { if (1 === i || 9 === i || 11 === i) { if ("string" == typeof e.textContent) return e.textContent; for (e = e.firstChild; e; e = e.nextSibling) n += o(e) } else if (3 === i || 4 === i) return e.nodeValue } else for (; t = e[r]; r++) n += o(t); return n }, i = st.selectors = { cacheLength: 50, createPseudo: ot, match: U, find: {}, relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling"} }, preFilter: { ATTR: function (e) { return e[1] = e[1].replace(et, tt), e[3] = (e[4] || e[5] || "").replace(et, tt), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4) }, CHILD: function (e) { return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || st.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && st.error(e[0]), e }, PSEUDO: function (e) { var t, n = !e[5] && e[2]; return U.CHILD.test(e[0]) ? null : (e[4] ? e[2] = e[4] : n && z.test(n) && (t = ft(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3)) } }, filter: { TAG: function (e) { return "*" === e ? function () { return !0 } : (e = e.replace(et, tt).toLowerCase(), function (t) { return t.nodeName && t.nodeName.toLowerCase() === e }) }, CLASS: function (e) { var t = k[e + " "]; return t || (t = RegExp("(^|" + _ + ")" + e + "(" + _ + "|$)")) && k(e, function (e) { return t.test(e.className || typeof e.getAttribute !== A && e.getAttribute("class") || "") }) }, ATTR: function (e, t, n) { return function (r) { var i = st.attr(r, e); return null == i ? "!=" === t : t ? (i += "", "=" === t ? i === n : "!=" === t ? i !== n : "^=" === t ? n && 0 === i.indexOf(n) : "*=" === t ? n && i.indexOf(n) > -1 : "$=" === t ? n && i.slice(-n.length) === n : "~=" === t ? (" " + i + " ").indexOf(n) > -1 : "|=" === t ? i === n || i.slice(0, n.length + 1) === n + "-" : !1) : !0 } }, CHILD: function (e, t, n, r, i) { var o = "nth" !== e.slice(0, 3), a = "last" !== e.slice(-4), s = "of-type" === t; return 1 === r && 0 === i ? function (e) { return !!e.parentNode } : function (t, n, u) { var l, c, p, f, d, h, g = o !== a ? "nextSibling" : "previousSibling", m = t.parentNode, y = s && t.nodeName.toLowerCase(), v = !u && !s; if (m) { if (o) { while (g) { p = t; while (p = p[g]) if (s ? p.nodeName.toLowerCase() === y : 1 === p.nodeType) return !1; h = g = "only" === e && !h && "nextSibling" } return !0 } if (h = [a ? m.firstChild : m.lastChild], a && v) { c = m[x] || (m[x] = {}), l = c[e] || [], d = l[0] === N && l[1], f = l[0] === N && l[2], p = d && m.childNodes[d]; while (p = ++d && p && p[g] || (f = d = 0) || h.pop()) if (1 === p.nodeType && ++f && p === t) { c[e] = [N, d, f]; break } } else if (v && (l = (t[x] || (t[x] = {}))[e]) && l[0] === N) f = l[1]; else while (p = ++d && p && p[g] || (f = d = 0) || h.pop()) if ((s ? p.nodeName.toLowerCase() === y : 1 === p.nodeType) && ++f && (v && ((p[x] || (p[x] = {}))[e] = [N, f]), p === t)) break; return f -= i, f === r || 0 === f % r && f / r >= 0 } } }, PSEUDO: function (e, t) { var n, r = i.pseudos[e] || i.setFilters[e.toLowerCase()] || st.error("unsupported pseudo: " + e); return r[x] ? r(t) : r.length > 1 ? (n = [e, e, "", t], i.setFilters.hasOwnProperty(e.toLowerCase()) ? ot(function (e, n) { var i, o = r(e, t), a = o.length; while (a--) i = M.call(e, o[a]), e[i] = !(n[i] = o[a]) }) : function (e) { return r(e, 0, n) }) : r } }, pseudos: { not: ot(function (e) { var t = [], n = [], r = s(e.replace(W, "$1")); return r[x] ? ot(function (e, t, n, i) { var o, a = r(e, null, i, []), s = e.length; while (s--) (o = a[s]) && (e[s] = !(t[s] = o)) }) : function (e, i, o) { return t[0] = e, r(t, null, o, n), !n.pop() } }), has: ot(function (e) { return function (t) { return st(e, t).length > 0 } }), contains: ot(function (e) { return function (t) { return (t.textContent || t.innerText || o(t)).indexOf(e) > -1 } }), lang: ot(function (e) { return X.test(e || "") || st.error("unsupported lang: " + e), e = e.replace(et, tt).toLowerCase(), function (t) { var n; do if (n = d ? t.getAttribute("xml:lang") || t.getAttribute("lang") : t.lang) return n = n.toLowerCase(), n === e || 0 === n.indexOf(e + "-"); while ((t = t.parentNode) && 1 === t.nodeType); return !1 } }), target: function (t) { var n = e.location && e.location.hash; return n && n.slice(1) === t.id }, root: function (e) { return e === f }, focus: function (e) { return e === p.activeElement && (!p.hasFocus || p.hasFocus()) && !!(e.type || e.href || ~e.tabIndex) }, enabled: function (e) { return e.disabled === !1 }, disabled: function (e) { return e.disabled === !0 }, checked: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && !!e.checked || "option" === t && !!e.selected }, selected: function (e) { return e.parentNode && e.parentNode.selectedIndex, e.selected === !0 }, empty: function (e) { for (e = e.firstChild; e; e = e.nextSibling) if (e.nodeName > "@" || 3 === e.nodeType || 4 === e.nodeType) return !1; return !0 }, parent: function (e) { return !i.pseudos.empty(e) }, header: function (e) { return Q.test(e.nodeName) }, input: function (e) { return G.test(e.nodeName) }, button: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && "button" === e.type || "button" === t }, text: function (e) { var t; return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || t.toLowerCase() === e.type) }, first: pt(function () { return [0] }), last: pt(function (e, t) { return [t - 1] }), eq: pt(function (e, t, n) { return [0 > n ? n + t : n] }), even: pt(function (e, t) { var n = 0; for (; t > n; n += 2) e.push(n); return e }), odd: pt(function (e, t) { var n = 1; for (; t > n; n += 2) e.push(n); return e }), lt: pt(function (e, t, n) { var r = 0 > n ? n + t : n; for (; --r >= 0; ) e.push(r); return e }), gt: pt(function (e, t, n) { var r = 0 > n ? n + t : n; for (; t > ++r; ) e.push(r); return e })} }; for (n in { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }) i.pseudos[n] = lt(n); for (n in { submit: !0, reset: !0 }) i.pseudos[n] = ct(n); function ft(e, t) { var n, r, o, a, s, u, l, c = E[e + " "]; if (c) return t ? 0 : c.slice(0); s = e, u = [], l = i.preFilter; while (s) { (!n || (r = $.exec(s))) && (r && (s = s.slice(r[0].length) || s), u.push(o = [])), n = !1, (r = I.exec(s)) && (n = r.shift(), o.push({ value: n, type: r[0].replace(W, " ") }), s = s.slice(n.length)); for (a in i.filter) !(r = U[a].exec(s)) || l[a] && !(r = l[a](r)) || (n = r.shift(), o.push({ value: n, type: a, matches: r }), s = s.slice(n.length)); if (!n) break } return t ? s.length : s ? st.error(e) : E(e, u).slice(0) } function dt(e) { var t = 0, n = e.length, r = ""; for (; n > t; t++) r += e[t].value; return r } function ht(e, t, n) { var i = t.dir, o = n && "parentNode" === i, a = C++; return t.first ? function (t, n, r) { while (t = t[i]) if (1 === t.nodeType || o) return e(t, n, r) } : function (t, n, s) { var u, l, c, p = N + " " + a; if (s) { while (t = t[i]) if ((1 === t.nodeType || o) && e(t, n, s)) return !0 } else while (t = t[i]) if (1 === t.nodeType || o) if (c = t[x] || (t[x] = {}), (l = c[i]) && l[0] === p) { if ((u = l[1]) === !0 || u === r) return u === !0 } else if (l = c[i] = [p], l[1] = e(t, n, s) || r, l[1] === !0) return !0 } } function gt(e) { return e.length > 1 ? function (t, n, r) { var i = e.length; while (i--) if (!e[i](t, n, r)) return !1; return !0 } : e[0] } function mt(e, t, n, r, i) { var o, a = [], s = 0, u = e.length, l = null != t; for (; u > s; s++) (o = e[s]) && (!n || n(o, r, i)) && (a.push(o), l && t.push(s)); return a } function yt(e, t, n, r, i, o) { return r && !r[x] && (r = yt(r)), i && !i[x] && (i = yt(i, o)), ot(function (o, a, s, u) { var l, c, p, f = [], d = [], h = a.length, g = o || xt(t || "*", s.nodeType ? [s] : s, []), m = !e || !o && t ? g : mt(g, f, e, s, u), y = n ? i || (o ? e : h || r) ? [] : a : m; if (n && n(m, y, s, u), r) { l = mt(y, d), r(l, [], s, u), c = l.length; while (c--) (p = l[c]) && (y[d[c]] = !(m[d[c]] = p)) } if (o) { if (i || e) { if (i) { l = [], c = y.length; while (c--) (p = y[c]) && l.push(m[c] = p); i(null, y = [], l, u) } c = y.length; while (c--) (p = y[c]) && (l = i ? M.call(o, p) : f[c]) > -1 && (o[l] = !(a[l] = p)) } } else y = mt(y === a ? y.splice(h, y.length) : y), i ? i(null, a, y, u) : H.apply(a, y) }) } function vt(e) { var t, n, r, o = e.length, a = i.relative[e[0].type], s = a || i.relative[" "], u = a ? 1 : 0, c = ht(function (e) { return e === t }, s, !0), p = ht(function (e) { return M.call(t, e) > -1 }, s, !0), f = [function (e, n, r) { return !a && (r || n !== l) || ((t = n).nodeType ? c(e, n, r) : p(e, n, r)) } ]; for (; o > u; u++) if (n = i.relative[e[u].type]) f = [ht(gt(f), n)]; else { if (n = i.filter[e[u].type].apply(null, e[u].matches), n[x]) { for (r = ++u; o > r; r++) if (i.relative[e[r].type]) break; return yt(u > 1 && gt(f), u > 1 && dt(e.slice(0, u - 1)).replace(W, "$1"), n, r > u && vt(e.slice(u, r)), o > r && vt(e = e.slice(r)), o > r && dt(e)) } f.push(n) } return gt(f) } function bt(e, t) { var n = 0, o = t.length > 0, a = e.length > 0, s = function (s, u, c, f, d) { var h, g, m, y = [], v = 0, b = "0", x = s && [], w = null != d, T = l, C = s || a && i.find.TAG("*", d && u.parentNode || u), k = N += null == T ? 1 : Math.random() || .1; for (w && (l = u !== p && u, r = n); null != (h = C[b]); b++) { if (a && h) { g = 0; while (m = e[g++]) if (m(h, u, c)) { f.push(h); break } w && (N = k, r = ++n) } o && ((h = !m && h) && v--, s && x.push(h)) } if (v += b, o && b !== v) { g = 0; while (m = t[g++]) m(x, y, u, c); if (s) { if (v > 0) while (b--) x[b] || y[b] || (y[b] = L.call(f)); y = mt(y) } H.apply(f, y), w && !s && y.length > 0 && v + t.length > 1 && st.uniqueSort(f) } return w && (N = k, l = T), x }; return o ? ot(s) : s } s = st.compile = function (e, t) { var n, r = [], i = [], o = S[e + " "]; if (!o) { t || (t = ft(e)), n = t.length; while (n--) o = vt(t[n]), o[x] ? r.push(o) : i.push(o); o = S(e, bt(i, r)) } return o }; function xt(e, t, n) { var r = 0, i = t.length; for (; i > r; r++) st(e, t[r], n); return n } function wt(e, t, n, r) { var o, a, u, l, c, p = ft(e); if (!r && 1 === p.length) { if (a = p[0] = p[0].slice(0), a.length > 2 && "ID" === (u = a[0]).type && 9 === t.nodeType && !d && i.relative[a[1].type]) { if (t = i.find.ID(u.matches[0].replace(et, tt), t)[0], !t) return n; e = e.slice(a.shift().value.length) } o = U.needsContext.test(e) ? 0 : a.length; while (o--) { if (u = a[o], i.relative[l = u.type]) break; if ((c = i.find[l]) && (r = c(u.matches[0].replace(et, tt), V.test(a[0].type) && t.parentNode || t))) { if (a.splice(o, 1), e = r.length && dt(a), !e) return H.apply(n, q.call(r, 0)), n; break } } } return s(e, p)(r, t, d, n, V.test(e)), n } i.pseudos.nth = i.pseudos.eq; function Tt() { } i.filters = Tt.prototype = i.pseudos, i.setFilters = new Tt, c(), st.attr = b.attr, b.find = st, b.expr = st.selectors, b.expr[":"] = b.expr.pseudos, b.unique = st.uniqueSort, b.text = st.getText, b.isXMLDoc = st.isXML, b.contains = st.contains } (e); var at = /Until$/, st = /^(?:parents|prev(?:Until|All))/, ut = /^.[^:#\[\.,]*$/, lt = b.expr.match.needsContext, ct = { children: !0, contents: !0, next: !0, prev: !0 }; b.fn.extend({ find: function (e) { var t, n, r, i = this.length; if ("string" != typeof e) return r = this, this.pushStack(b(e).filter(function () { for (t = 0; i > t; t++) if (b.contains(r[t], this)) return !0 })); for (n = [], t = 0; i > t; t++) b.find(e, this[t], n); return n = this.pushStack(i > 1 ? b.unique(n) : n), n.selector = (this.selector ? this.selector + " " : "") + e, n }, has: function (e) { var t, n = b(e, this), r = n.length; return this.filter(function () { for (t = 0; r > t; t++) if (b.contains(this, n[t])) return !0 }) }, not: function (e) { return this.pushStack(ft(this, e, !1)) }, filter: function (e) { return this.pushStack(ft(this, e, !0)) }, is: function (e) { return !!e && ("string" == typeof e ? lt.test(e) ? b(e, this.context).index(this[0]) >= 0 : b.filter(e, this).length > 0 : this.filter(e).length > 0) }, closest: function (e, t) { var n, r = 0, i = this.length, o = [], a = lt.test(e) || "string" != typeof e ? b(e, t || this.context) : 0; for (; i > r; r++) { n = this[r]; while (n && n.ownerDocument && n !== t && 11 !== n.nodeType) { if (a ? a.index(n) > -1 : b.find.matchesSelector(n, e)) { o.push(n); break } n = n.parentNode } } return this.pushStack(o.length > 1 ? b.unique(o) : o) }, index: function (e) { return e ? "string" == typeof e ? b.inArray(this[0], b(e)) : b.inArray(e.jquery ? e[0] : e, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1 }, add: function (e, t) { var n = "string" == typeof e ? b(e, t) : b.makeArray(e && e.nodeType ? [e] : e), r = b.merge(this.get(), n); return this.pushStack(b.unique(r)) }, addBack: function (e) { return this.add(null == e ? this.prevObject : this.prevObject.filter(e)) } }), b.fn.andSelf = b.fn.addBack; function pt(e, t) { do e = e[t]; while (e && 1 !== e.nodeType); return e } b.each({ parent: function (e) { var t = e.parentNode; return t && 11 !== t.nodeType ? t : null }, parents: function (e) { return b.dir(e, "parentNode") }, parentsUntil: function (e, t, n) { return b.dir(e, "parentNode", n) }, next: function (e) { return pt(e, "nextSibling") }, prev: function (e) { return pt(e, "previousSibling") }, nextAll: function (e) { return b.dir(e, "nextSibling") }, prevAll: function (e) { return b.dir(e, "previousSibling") }, nextUntil: function (e, t, n) { return b.dir(e, "nextSibling", n) }, prevUntil: function (e, t, n) { return b.dir(e, "previousSibling", n) }, siblings: function (e) { return b.sibling((e.parentNode || {}).firstChild, e) }, children: function (e) { return b.sibling(e.firstChild) }, contents: function (e) { return b.nodeName(e, "iframe") ? e.contentDocument || e.contentWindow.document : b.merge([], e.childNodes) } }, function (e, t) { b.fn[e] = function (n, r) { var i = b.map(this, t, n); return at.test(e) || (r = n), r && "string" == typeof r && (i = b.filter(r, i)), i = this.length > 1 && !ct[e] ? b.unique(i) : i, this.length > 1 && st.test(e) && (i = i.reverse()), this.pushStack(i) } }), b.extend({ filter: function (e, t, n) { return n && (e = ":not(" + e + ")"), 1 === t.length ? b.find.matchesSelector(t[0], e) ? [t[0]] : [] : b.find.matches(e, t) }, dir: function (e, n, r) { var i = [], o = e[n]; while (o && 9 !== o.nodeType && (r === t || 1 !== o.nodeType || !b(o).is(r))) 1 === o.nodeType && i.push(o), o = o[n]; return i }, sibling: function (e, t) { var n = []; for (; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e); return n } }); function ft(e, t, n) { if (t = t || 0, b.isFunction(t)) return b.grep(e, function (e, r) { var i = !!t.call(e, r, e); return i === n }); if (t.nodeType) return b.grep(e, function (e) { return e === t === n }); if ("string" == typeof t) { var r = b.grep(e, function (e) { return 1 === e.nodeType }); if (ut.test(t)) return b.filter(t, r, !n); t = b.filter(t, r) } return b.grep(e, function (e) { return b.inArray(e, t) >= 0 === n }) } function dt(e) { var t = ht.split("|"), n = e.createDocumentFragment(); if (n.createElement) while (t.length) n.createElement(t.pop()); return n } var ht = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video", gt = / jQuery\d+="(?:null|\d+)"/g, mt = RegExp("<(?:" + ht + ")[\\s/>]", "i"), yt = /^\s+/, vt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, bt = /<([\w:]+)/, xt = /<tbody/i, wt = /<|&#?\w+;/, Tt = /<(?:script|style|link)/i, Nt = /^(?:checkbox|radio)$/i, Ct = /checked\s*(?:[^=]|=\s*.checked.)/i, kt = /^$|\/(?:java|ecma)script/i, Et = /^true\/(.*)/, St = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, At = { option: [1, "<select multiple='multiple'>", "</select>"], legend: [1, "<fieldset>", "</fieldset>"], area: [1, "<map>", "</map>"], param: [1, "<object>", "</object>"], thead: [1, "<table>", "</table>"], tr: [2, "<table><tbody>", "</tbody></table>"], col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], _default: b.support.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"] }, jt = dt(o), Dt = jt.appendChild(o.createElement("div")); At.optgroup = At.option, At.tbody = At.tfoot = At.colgroup = At.caption = At.thead, At.th = At.td, b.fn.extend({ text: function (e) { return b.access(this, function (e) { return e === t ? b.text(this) : this.empty().append((this[0] && this[0].ownerDocument || o).createTextNode(e)) }, null, e, arguments.length) }, wrapAll: function (e) { if (b.isFunction(e)) return this.each(function (t) { b(this).wrapAll(e.call(this, t)) }); if (this[0]) { var t = b(e, this[0].ownerDocument).eq(0).clone(!0); this[0].parentNode && t.insertBefore(this[0]), t.map(function () { var e = this; while (e.firstChild && 1 === e.firstChild.nodeType) e = e.firstChild; return e }).append(this) } return this }, wrapInner: function (e) { return b.isFunction(e) ? this.each(function (t) { b(this).wrapInner(e.call(this, t)) }) : this.each(function () { var t = b(this), n = t.contents(); n.length ? n.wrapAll(e) : t.append(e) }) }, wrap: function (e) { var t = b.isFunction(e); return this.each(function (n) { b(this).wrapAll(t ? e.call(this, n) : e) }) }, unwrap: function () { return this.parent().each(function () { b.nodeName(this, "body") || b(this).replaceWith(this.childNodes) }).end() }, append: function () { return this.domManip(arguments, !0, function (e) { (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && this.appendChild(e) }) }, prepend: function () { return this.domManip(arguments, !0, function (e) { (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && this.insertBefore(e, this.firstChild) }) }, before: function () { return this.domManip(arguments, !1, function (e) { this.parentNode && this.parentNode.insertBefore(e, this) }) }, after: function () { return this.domManip(arguments, !1, function (e) { this.parentNode && this.parentNode.insertBefore(e, this.nextSibling) }) }, remove: function (e, t) { var n, r = 0; for (; null != (n = this[r]); r++) (!e || b.filter(e, [n]).length > 0) && (t || 1 !== n.nodeType || b.cleanData(Ot(n)), n.parentNode && (t && b.contains(n.ownerDocument, n) && Mt(Ot(n, "script")), n.parentNode.removeChild(n))); return this }, empty: function () { var e, t = 0; for (; null != (e = this[t]); t++) { 1 === e.nodeType && b.cleanData(Ot(e, !1)); while (e.firstChild) e.removeChild(e.firstChild); e.options && b.nodeName(e, "select") && (e.options.length = 0) } return this }, clone: function (e, t) { return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function () { return b.clone(this, e, t) }) }, html: function (e) { return b.access(this, function (e) { var n = this[0] || {}, r = 0, i = this.length; if (e === t) return 1 === n.nodeType ? n.innerHTML.replace(gt, "") : t; if (!("string" != typeof e || Tt.test(e) || !b.support.htmlSerialize && mt.test(e) || !b.support.leadingWhitespace && yt.test(e) || At[(bt.exec(e) || ["", ""])[1].toLowerCase()])) { e = e.replace(vt, "<$1></$2>"); try { for (; i > r; r++) n = this[r] || {}, 1 === n.nodeType && (b.cleanData(Ot(n, !1)), n.innerHTML = e); n = 0 } catch (o) { } } n && this.empty().append(e) }, null, e, arguments.length) }, replaceWith: function (e) { var t = b.isFunction(e); return t || "string" == typeof e || (e = b(e).not(this).detach()), this.domManip([e], !0, function (e) { var t = this.nextSibling, n = this.parentNode; n && (b(this).remove(), n.insertBefore(e, t)) }) }, detach: function (e) { return this.remove(e, !0) }, domManip: function (e, n, r) { e = f.apply([], e); var i, o, a, s, u, l, c = 0, p = this.length, d = this, h = p - 1, g = e[0], m = b.isFunction(g); if (m || !(1 >= p || "string" != typeof g || b.support.checkClone) && Ct.test(g)) return this.each(function (i) { var o = d.eq(i); m && (e[0] = g.call(this, i, n ? o.html() : t)), o.domManip(e, n, r) }); if (p && (l = b.buildFragment(e, this[0].ownerDocument, !1, this), i = l.firstChild, 1 === l.childNodes.length && (l = i), i)) { for (n = n && b.nodeName(i, "tr"), s = b.map(Ot(l, "script"), Ht), a = s.length; p > c; c++) o = l, c !== h && (o = b.clone(o, !0, !0), a && b.merge(s, Ot(o, "script"))), r.call(n && b.nodeName(this[c], "table") ? Lt(this[c], "tbody") : this[c], o, c); if (a) for (u = s[s.length - 1].ownerDocument, b.map(s, qt), c = 0; a > c; c++) o = s[c], kt.test(o.type || "") && !b._data(o, "globalEval") && b.contains(u, o) && (o.src ? b.ajax({ url: o.src, type: "GET", dataType: "script", async: !1, global: !1, "throws": !0 }) : b.globalEval((o.text || o.textContent || o.innerHTML || "").replace(St, ""))); l = i = null } return this } }); function Lt(e, t) { return e.getElementsByTagName(t)[0] || e.appendChild(e.ownerDocument.createElement(t)) } function Ht(e) { var t = e.getAttributeNode("type"); return e.type = (t && t.specified) + "/" + e.type, e } function qt(e) { var t = Et.exec(e.type); return t ? e.type = t[1] : e.removeAttribute("type"), e } function Mt(e, t) { var n, r = 0; for (; null != (n = e[r]); r++) b._data(n, "globalEval", !t || b._data(t[r], "globalEval")) } function _t(e, t) { if (1 === t.nodeType && b.hasData(e)) { var n, r, i, o = b._data(e), a = b._data(t, o), s = o.events; if (s) { delete a.handle, a.events = {}; for (n in s) for (r = 0, i = s[n].length; i > r; r++) b.event.add(t, n, s[n][r]) } a.data && (a.data = b.extend({}, a.data)) } } function Ft(e, t) { var n, r, i; if (1 === t.nodeType) { if (n = t.nodeName.toLowerCase(), !b.support.noCloneEvent && t[b.expando]) { i = b._data(t); for (r in i.events) b.removeEvent(t, r, i.handle); t.removeAttribute(b.expando) } "script" === n && t.text !== e.text ? (Ht(t).text = e.text, qt(t)) : "object" === n ? (t.parentNode && (t.outerHTML = e.outerHTML), b.support.html5Clone && e.innerHTML && !b.trim(t.innerHTML) && (t.innerHTML = e.innerHTML)) : "input" === n && Nt.test(e.type) ? (t.defaultChecked = t.checked = e.checked, t.value !== e.value && (t.value = e.value)) : "option" === n ? t.defaultSelected = t.selected = e.defaultSelected : ("input" === n || "textarea" === n) && (t.defaultValue = e.defaultValue) } } b.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (e, t) { b.fn[e] = function (e) { var n, r = 0, i = [], o = b(e), a = o.length - 1; for (; a >= r; r++) n = r === a ? this : this.clone(!0), b(o[r])[t](n), d.apply(i, n.get()); return this.pushStack(i) } }); function Ot(e, n) { var r, o, a = 0, s = typeof e.getElementsByTagName !== i ? e.getElementsByTagName(n || "*") : typeof e.querySelectorAll !== i ? e.querySelectorAll(n || "*") : t; if (!s) for (s = [], r = e.childNodes || e; null != (o = r[a]); a++) !n || b.nodeName(o, n) ? s.push(o) : b.merge(s, Ot(o, n)); return n === t || n && b.nodeName(e, n) ? b.merge([e], s) : s } function Bt(e) { Nt.test(e.type) && (e.defaultChecked = e.checked) } b.extend({ clone: function (e, t, n) { var r, i, o, a, s, u = b.contains(e.ownerDocument, e); if (b.support.html5Clone || b.isXMLDoc(e) || !mt.test("<" + e.nodeName + ">") ? o = e.cloneNode(!0) : (Dt.innerHTML = e.outerHTML, Dt.removeChild(o = Dt.firstChild)), !(b.support.noCloneEvent && b.support.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || b.isXMLDoc(e))) for (r = Ot(o), s = Ot(e), a = 0; null != (i = s[a]); ++a) r[a] && Ft(i, r[a]); if (t) if (n) for (s = s || Ot(e), r = r || Ot(o), a = 0; null != (i = s[a]); a++) _t(i, r[a]); else _t(e, o); return r = Ot(o, "script"), r.length > 0 && Mt(r, !u && Ot(e, "script")), r = s = i = null, o }, buildFragment: function (e, t, n, r) {
        var i, o, a, s, u, l, c, p = e.length, f = dt(t), d = [], h = 0; for (; p > h; h++) if (o = e[h], o || 0 === o) if ("object" === b.type(o)) b.merge(d, o.nodeType ? [o] : o); else if (wt.test(o)) {
            s = s || f.appendChild(t.createElement("div")), u = (bt.exec(o) || ["", ""])[1].toLowerCase(), c = At[u] || At._default, s.innerHTML = c[1] + o.replace(vt, "<$1></$2>") + c[2], i = c[0]; while (i--) s = s.lastChild; if (!b.support.leadingWhitespace && yt.test(o) && d.push(t.createTextNode(yt.exec(o)[0])), !b.support.tbody) {
                o = "table" !== u || xt.test(o) ? "<table>" !== c[1] || xt.test(o) ? 0 : s : s.firstChild, i = o && o.childNodes.length; while (i--) b.nodeName(l = o.childNodes[i], "tbody") && !l.childNodes.length && o.removeChild(l)
            } b.merge(d, s.childNodes), s.textContent = ""; while (s.firstChild) s.removeChild(s.firstChild); s = f.lastChild
        } else d.push(t.createTextNode(o)); s && f.removeChild(s), b.support.appendChecked || b.grep(Ot(d, "input"), Bt), h = 0; while (o = d[h++]) if ((!r || -1 === b.inArray(o, r)) && (a = b.contains(o.ownerDocument, o), s = Ot(f.appendChild(o), "script"), a && Mt(s), n)) { i = 0; while (o = s[i++]) kt.test(o.type || "") && n.push(o) } return s = null, f
    }, cleanData: function (e, t) { var n, r, o, a, s = 0, u = b.expando, l = b.cache, p = b.support.deleteExpando, f = b.event.special; for (; null != (n = e[s]); s++) if ((t || b.acceptData(n)) && (o = n[u], a = o && l[o])) { if (a.events) for (r in a.events) f[r] ? b.event.remove(n, r) : b.removeEvent(n, r, a.handle); l[o] && (delete l[o], p ? delete n[u] : typeof n.removeAttribute !== i ? n.removeAttribute(u) : n[u] = null, c.push(o)) } } 
    }); var Pt, Rt, Wt, $t = /alpha\([^)]*\)/i, It = /opacity\s*=\s*([^)]*)/, zt = /^(top|right|bottom|left)$/, Xt = /^(none|table(?!-c[ea]).+)/, Ut = /^margin/, Vt = RegExp("^(" + x + ")(.*)$", "i"), Yt = RegExp("^(" + x + ")(?!px)[a-z%]+$", "i"), Jt = RegExp("^([+-])=(" + x + ")", "i"), Gt = { BODY: "block" }, Qt = { position: "absolute", visibility: "hidden", display: "block" }, Kt = { letterSpacing: 0, fontWeight: 400 }, Zt = ["Top", "Right", "Bottom", "Left"], en = ["Webkit", "O", "Moz", "ms"]; function tn(e, t) { if (t in e) return t; var n = t.charAt(0).toUpperCase() + t.slice(1), r = t, i = en.length; while (i--) if (t = en[i] + n, t in e) return t; return r } function nn(e, t) { return e = t || e, "none" === b.css(e, "display") || !b.contains(e.ownerDocument, e) } function rn(e, t) { var n, r, i, o = [], a = 0, s = e.length; for (; s > a; a++) r = e[a], r.style && (o[a] = b._data(r, "olddisplay"), n = r.style.display, t ? (o[a] || "none" !== n || (r.style.display = ""), "" === r.style.display && nn(r) && (o[a] = b._data(r, "olddisplay", un(r.nodeName)))) : o[a] || (i = nn(r), (n && "none" !== n || !i) && b._data(r, "olddisplay", i ? n : b.css(r, "display")))); for (a = 0; s > a; a++) r = e[a], r.style && (t && "none" !== r.style.display && "" !== r.style.display || (r.style.display = t ? o[a] || "" : "none")); return e } b.fn.extend({ css: function (e, n) { return b.access(this, function (e, n, r) { var i, o, a = {}, s = 0; if (b.isArray(n)) { for (o = Rt(e), i = n.length; i > s; s++) a[n[s]] = b.css(e, n[s], !1, o); return a } return r !== t ? b.style(e, n, r) : b.css(e, n) }, e, n, arguments.length > 1) }, show: function () { return rn(this, !0) }, hide: function () { return rn(this) }, toggle: function (e) { var t = "boolean" == typeof e; return this.each(function () { (t ? e : nn(this)) ? b(this).show() : b(this).hide() }) } }), b.extend({ cssHooks: { opacity: { get: function (e, t) { if (t) { var n = Wt(e, "opacity"); return "" === n ? "1" : n } } } }, cssNumber: { columnCount: !0, fillOpacity: !0, fontWeight: !0, lineHeight: !0, opacity: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 }, cssProps: { "float": b.support.cssFloat ? "cssFloat" : "styleFloat" }, style: function (e, n, r, i) { if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) { var o, a, s, u = b.camelCase(n), l = e.style; if (n = b.cssProps[u] || (b.cssProps[u] = tn(l, u)), s = b.cssHooks[n] || b.cssHooks[u], r === t) return s && "get" in s && (o = s.get(e, !1, i)) !== t ? o : l[n]; if (a = typeof r, "string" === a && (o = Jt.exec(r)) && (r = (o[1] + 1) * o[2] + parseFloat(b.css(e, n)), a = "number"), !(null == r || "number" === a && isNaN(r) || ("number" !== a || b.cssNumber[u] || (r += "px"), b.support.clearCloneStyle || "" !== r || 0 !== n.indexOf("background") || (l[n] = "inherit"), s && "set" in s && (r = s.set(e, r, i)) === t))) try { l[n] = r } catch (c) { } } }, css: function (e, n, r, i) { var o, a, s, u = b.camelCase(n); return n = b.cssProps[u] || (b.cssProps[u] = tn(e.style, u)), s = b.cssHooks[n] || b.cssHooks[u], s && "get" in s && (a = s.get(e, !0, r)), a === t && (a = Wt(e, n, i)), "normal" === a && n in Kt && (a = Kt[n]), "" === r || r ? (o = parseFloat(a), r === !0 || b.isNumeric(o) ? o || 0 : a) : a }, swap: function (e, t, n, r) { var i, o, a = {}; for (o in t) a[o] = e.style[o], e.style[o] = t[o]; i = n.apply(e, r || []); for (o in t) e.style[o] = a[o]; return i } }), e.getComputedStyle ? (Rt = function (t) { return e.getComputedStyle(t, null) }, Wt = function (e, n, r) { var i, o, a, s = r || Rt(e), u = s ? s.getPropertyValue(n) || s[n] : t, l = e.style; return s && ("" !== u || b.contains(e.ownerDocument, e) || (u = b.style(e, n)), Yt.test(u) && Ut.test(n) && (i = l.width, o = l.minWidth, a = l.maxWidth, l.minWidth = l.maxWidth = l.width = u, u = s.width, l.width = i, l.minWidth = o, l.maxWidth = a)), u }) : o.documentElement.currentStyle && (Rt = function (e) { return e.currentStyle }, Wt = function (e, n, r) { var i, o, a, s = r || Rt(e), u = s ? s[n] : t, l = e.style; return null == u && l && l[n] && (u = l[n]), Yt.test(u) && !zt.test(n) && (i = l.left, o = e.runtimeStyle, a = o && o.left, a && (o.left = e.currentStyle.left), l.left = "fontSize" === n ? "1em" : u, u = l.pixelLeft + "px", l.left = i, a && (o.left = a)), "" === u ? "auto" : u }); function on(e, t, n) { var r = Vt.exec(t); return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t } function an(e, t, n, r, i) { var o = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0, a = 0; for (; 4 > o; o += 2) "margin" === n && (a += b.css(e, n + Zt[o], !0, i)), r ? ("content" === n && (a -= b.css(e, "padding" + Zt[o], !0, i)), "margin" !== n && (a -= b.css(e, "border" + Zt[o] + "Width", !0, i))) : (a += b.css(e, "padding" + Zt[o], !0, i), "padding" !== n && (a += b.css(e, "border" + Zt[o] + "Width", !0, i))); return a } function sn(e, t, n) { var r = !0, i = "width" === t ? e.offsetWidth : e.offsetHeight, o = Rt(e), a = b.support.boxSizing && "border-box" === b.css(e, "boxSizing", !1, o); if (0 >= i || null == i) { if (i = Wt(e, t, o), (0 > i || null == i) && (i = e.style[t]), Yt.test(i)) return i; r = a && (b.support.boxSizingReliable || i === e.style[t]), i = parseFloat(i) || 0 } return i + an(e, t, n || (a ? "border" : "content"), r, o) + "px" } function un(e) { var t = o, n = Gt[e]; return n || (n = ln(e, t), "none" !== n && n || (Pt = (Pt || b("<iframe frameborder='0' width='0' height='0'/>").css("cssText", "display:block !important")).appendTo(t.documentElement), t = (Pt[0].contentWindow || Pt[0].contentDocument).document, t.write("<!doctype html><html><body>"), t.close(), n = ln(e, t), Pt.detach()), Gt[e] = n), n } function ln(e, t) { var n = b(t.createElement(e)).appendTo(t.body), r = b.css(n[0], "display"); return n.remove(), r } b.each(["height", "width"], function (e, n) { b.cssHooks[n] = { get: function (e, r, i) { return r ? 0 === e.offsetWidth && Xt.test(b.css(e, "display")) ? b.swap(e, Qt, function () { return sn(e, n, i) }) : sn(e, n, i) : t }, set: function (e, t, r) { var i = r && Rt(e); return on(e, t, r ? an(e, n, r, b.support.boxSizing && "border-box" === b.css(e, "boxSizing", !1, i), i) : 0) } } }), b.support.opacity || (b.cssHooks.opacity = { get: function (e, t) { return It.test((t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : t ? "1" : "" }, set: function (e, t) { var n = e.style, r = e.currentStyle, i = b.isNumeric(t) ? "alpha(opacity=" + 100 * t + ")" : "", o = r && r.filter || n.filter || ""; n.zoom = 1, (t >= 1 || "" === t) && "" === b.trim(o.replace($t, "")) && n.removeAttribute && (n.removeAttribute("filter"), "" === t || r && !r.filter) || (n.filter = $t.test(o) ? o.replace($t, i) : o + " " + i) } }), b(function () { b.support.reliableMarginRight || (b.cssHooks.marginRight = { get: function (e, n) { return n ? b.swap(e, { display: "inline-block" }, Wt, [e, "marginRight"]) : t } }), !b.support.pixelPosition && b.fn.position && b.each(["top", "left"], function (e, n) { b.cssHooks[n] = { get: function (e, r) { return r ? (r = Wt(e, n), Yt.test(r) ? b(e).position()[n] + "px" : r) : t } } }) }), b.expr && b.expr.filters && (b.expr.filters.hidden = function (e) { return 0 >= e.offsetWidth && 0 >= e.offsetHeight || !b.support.reliableHiddenOffsets && "none" === (e.style && e.style.display || b.css(e, "display")) }, b.expr.filters.visible = function (e) { return !b.expr.filters.hidden(e) }), b.each({ margin: "", padding: "", border: "Width" }, function (e, t) { b.cssHooks[e + t] = { expand: function (n) { var r = 0, i = {}, o = "string" == typeof n ? n.split(" ") : [n]; for (; 4 > r; r++) i[e + Zt[r] + t] = o[r] || o[r - 2] || o[0]; return i } }, Ut.test(e) || (b.cssHooks[e + t].set = on) }); var cn = /%20/g, pn = /\[\]$/, fn = /\r?\n/g, dn = /^(?:submit|button|image|reset|file)$/i, hn = /^(?:input|select|textarea|keygen)/i; b.fn.extend({ serialize: function () { return b.param(this.serializeArray()) }, serializeArray: function () { return this.map(function () { var e = b.prop(this, "elements"); return e ? b.makeArray(e) : this }).filter(function () { var e = this.type; return this.name && !b(this).is(":disabled") && hn.test(this.nodeName) && !dn.test(e) && (this.checked || !Nt.test(e)) }).map(function (e, t) { var n = b(this).val(); return null == n ? null : b.isArray(n) ? b.map(n, function (e) { return { name: t.name, value: e.replace(fn, "\r\n")} }) : { name: t.name, value: n.replace(fn, "\r\n")} }).get() } }), b.param = function (e, n) { var r, i = [], o = function (e, t) { t = b.isFunction(t) ? t() : null == t ? "" : t, i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t) }; if (n === t && (n = b.ajaxSettings && b.ajaxSettings.traditional), b.isArray(e) || e.jquery && !b.isPlainObject(e)) b.each(e, function () { o(this.name, this.value) }); else for (r in e) gn(r, e[r], n, o); return i.join("&").replace(cn, "+") }; function gn(e, t, n, r) { var i; if (b.isArray(t)) b.each(t, function (t, i) { n || pn.test(e) ? r(e, i) : gn(e + "[" + ("object" == typeof i ? t : "") + "]", i, n, r) }); else if (n || "object" !== b.type(t)) r(e, t); else for (i in t) gn(e + "[" + i + "]", t[i], n, r) } b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (e, t) { b.fn[t] = function (e, n) { return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t) } }), b.fn.hover = function (e, t) { return this.mouseenter(e).mouseleave(t || e) }; var mn, yn, vn = b.now(), bn = /\?/, xn = /#.*$/, wn = /([?&])_=[^&]*/, Tn = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm, Nn = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, Cn = /^(?:GET|HEAD)$/, kn = /^\/\//, En = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/, Sn = b.fn.load, An = {}, jn = {}, Dn = "*/".concat("*"); try { yn = a.href } catch (Ln) { yn = o.createElement("a"), yn.href = "", yn = yn.href } mn = En.exec(yn.toLowerCase()) || []; function Hn(e) { return function (t, n) { "string" != typeof t && (n = t, t = "*"); var r, i = 0, o = t.toLowerCase().match(w) || []; if (b.isFunction(n)) while (r = o[i++]) "+" === r[0] ? (r = r.slice(1) || "*", (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n) } } function qn(e, n, r, i) { var o = {}, a = e === jn; function s(u) { var l; return o[u] = !0, b.each(e[u] || [], function (e, u) { var c = u(n, r, i); return "string" != typeof c || a || o[c] ? a ? !(l = c) : t : (n.dataTypes.unshift(c), s(c), !1) }), l } return s(n.dataTypes[0]) || !o["*"] && s("*") } function Mn(e, n) { var r, i, o = b.ajaxSettings.flatOptions || {}; for (i in n) n[i] !== t && ((o[i] ? e : r || (r = {}))[i] = n[i]); return r && b.extend(!0, e, r), e } b.fn.load = function (e, n, r) { if ("string" != typeof e && Sn) return Sn.apply(this, arguments); var i, o, a, s = this, u = e.indexOf(" "); return u >= 0 && (i = e.slice(u, e.length), e = e.slice(0, u)), b.isFunction(n) ? (r = n, n = t) : n && "object" == typeof n && (a = "POST"), s.length > 0 && b.ajax({ url: e, type: a, dataType: "html", data: n }).done(function (e) { o = arguments, s.html(i ? b("<div>").append(b.parseHTML(e)).find(i) : e) }).complete(r && function (e, t) { s.each(r, o || [e.responseText, t, e]) }), this }, b.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (e, t) { b.fn[t] = function (e) { return this.on(t, e) } }), b.each(["get", "post"], function (e, n) { b[n] = function (e, r, i, o) { return b.isFunction(r) && (o = o || i, i = r, r = t), b.ajax({ url: e, type: n, dataType: o, data: r, success: i }) } }), b.extend({ active: 0, lastModified: {}, etag: {}, ajaxSettings: { url: yn, type: "GET", isLocal: Nn.test(mn[1]), global: !0, processData: !0, async: !0, contentType: "application/x-www-form-urlencoded; charset=UTF-8", accepts: { "*": Dn, text: "text/plain", html: "text/html", xml: "application/xml, text/xml", json: "application/json, text/javascript" }, contents: { xml: /xml/, html: /html/, json: /json/ }, responseFields: { xml: "responseXML", text: "responseText" }, converters: { "* text": e.String, "text html": !0, "text json": b.parseJSON, "text xml": b.parseXML }, flatOptions: { url: !0, context: !0} }, ajaxSetup: function (e, t) { return t ? Mn(Mn(e, b.ajaxSettings), t) : Mn(b.ajaxSettings, e) }, ajaxPrefilter: Hn(An), ajaxTransport: Hn(jn), ajax: function (e, n) { "object" == typeof e && (n = e, e = t), n = n || {}; var r, i, o, a, s, u, l, c, p = b.ajaxSetup({}, n), f = p.context || p, d = p.context && (f.nodeType || f.jquery) ? b(f) : b.event, h = b.Deferred(), g = b.Callbacks("once memory"), m = p.statusCode || {}, y = {}, v = {}, x = 0, T = "canceled", N = { readyState: 0, getResponseHeader: function (e) { var t; if (2 === x) { if (!c) { c = {}; while (t = Tn.exec(a)) c[t[1].toLowerCase()] = t[2] } t = c[e.toLowerCase()] } return null == t ? null : t }, getAllResponseHeaders: function () { return 2 === x ? a : null }, setRequestHeader: function (e, t) { var n = e.toLowerCase(); return x || (e = v[n] = v[n] || e, y[e] = t), this }, overrideMimeType: function (e) { return x || (p.mimeType = e), this }, statusCode: function (e) { var t; if (e) if (2 > x) for (t in e) m[t] = [m[t], e[t]]; else N.always(e[N.status]); return this }, abort: function (e) { var t = e || T; return l && l.abort(t), k(0, t), this } }; if (h.promise(N).complete = g.add, N.success = N.done, N.error = N.fail, p.url = ((e || p.url || yn) + "").replace(xn, "").replace(kn, mn[1] + "//"), p.type = n.method || n.type || p.method || p.type, p.dataTypes = b.trim(p.dataType || "*").toLowerCase().match(w) || [""], null == p.crossDomain && (r = En.exec(p.url.toLowerCase()), p.crossDomain = !(!r || r[1] === mn[1] && r[2] === mn[2] && (r[3] || ("http:" === r[1] ? 80 : 443)) == (mn[3] || ("http:" === mn[1] ? 80 : 443)))), p.data && p.processData && "string" != typeof p.data && (p.data = b.param(p.data, p.traditional)), qn(An, p, n, N), 2 === x) return N; u = p.global, u && 0 === b.active++ && b.event.trigger("ajaxStart"), p.type = p.type.toUpperCase(), p.hasContent = !Cn.test(p.type), o = p.url, p.hasContent || (p.data && (o = p.url += (bn.test(o) ? "&" : "?") + p.data, delete p.data), p.cache === !1 && (p.url = wn.test(o) ? o.replace(wn, "$1_=" + vn++) : o + (bn.test(o) ? "&" : "?") + "_=" + vn++)), p.ifModified && (b.lastModified[o] && N.setRequestHeader("If-Modified-Since", b.lastModified[o]), b.etag[o] && N.setRequestHeader("If-None-Match", b.etag[o])), (p.data && p.hasContent && p.contentType !== !1 || n.contentType) && N.setRequestHeader("Content-Type", p.contentType), N.setRequestHeader("Accept", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + ("*" !== p.dataTypes[0] ? ", " + Dn + "; q=0.01" : "") : p.accepts["*"]); for (i in p.headers) N.setRequestHeader(i, p.headers[i]); if (p.beforeSend && (p.beforeSend.call(f, N, p) === !1 || 2 === x)) return N.abort(); T = "abort"; for (i in { success: 1, error: 1, complete: 1 }) N[i](p[i]); if (l = qn(jn, p, n, N)) { N.readyState = 1, u && d.trigger("ajaxSend", [N, p]), p.async && p.timeout > 0 && (s = setTimeout(function () { N.abort("timeout") }, p.timeout)); try { x = 1, l.send(y, k) } catch (C) { if (!(2 > x)) throw C; k(-1, C) } } else k(-1, "No Transport"); function k(e, n, r, i) { var c, y, v, w, T, C = n; 2 !== x && (x = 2, s && clearTimeout(s), l = t, a = i || "", N.readyState = e > 0 ? 4 : 0, r && (w = _n(p, N, r)), e >= 200 && 300 > e || 304 === e ? (p.ifModified && (T = N.getResponseHeader("Last-Modified"), T && (b.lastModified[o] = T), T = N.getResponseHeader("etag"), T && (b.etag[o] = T)), 204 === e ? (c = !0, C = "nocontent") : 304 === e ? (c = !0, C = "notmodified") : (c = Fn(p, w), C = c.state, y = c.data, v = c.error, c = !v)) : (v = C, (e || !C) && (C = "error", 0 > e && (e = 0))), N.status = e, N.statusText = (n || C) + "", c ? h.resolveWith(f, [y, C, N]) : h.rejectWith(f, [N, C, v]), N.statusCode(m), m = t, u && d.trigger(c ? "ajaxSuccess" : "ajaxError", [N, p, c ? y : v]), g.fireWith(f, [N, C]), u && (d.trigger("ajaxComplete", [N, p]), --b.active || b.event.trigger("ajaxStop"))) } return N }, getScript: function (e, n) { return b.get(e, t, n, "script") }, getJSON: function (e, t, n) { return b.get(e, t, n, "json") } }); function _n(e, n, r) { var i, o, a, s, u = e.contents, l = e.dataTypes, c = e.responseFields; for (s in c) s in r && (n[c[s]] = r[s]); while ("*" === l[0]) l.shift(), o === t && (o = e.mimeType || n.getResponseHeader("Content-Type")); if (o) for (s in u) if (u[s] && u[s].test(o)) { l.unshift(s); break } if (l[0] in r) a = l[0]; else { for (s in r) { if (!l[0] || e.converters[s + " " + l[0]]) { a = s; break } i || (i = s) } a = a || i } return a ? (a !== l[0] && l.unshift(a), r[a]) : t } function Fn(e, t) { var n, r, i, o, a = {}, s = 0, u = e.dataTypes.slice(), l = u[0]; if (e.dataFilter && (t = e.dataFilter(t, e.dataType)), u[1]) for (i in e.converters) a[i.toLowerCase()] = e.converters[i]; for (; r = u[++s]; ) if ("*" !== r) { if ("*" !== l && l !== r) { if (i = a[l + " " + r] || a["* " + r], !i) for (n in a) if (o = n.split(" "), o[1] === r && (i = a[l + " " + o[0]] || a["* " + o[0]])) { i === !0 ? i = a[n] : a[n] !== !0 && (r = o[0], u.splice(s--, 0, r)); break } if (i !== !0) if (i && e["throws"]) t = i(t); else try { t = i(t) } catch (c) { return { state: "parsererror", error: i ? c : "No conversion from " + l + " to " + r} } } l = r } return { state: "success", data: t} } b.ajaxSetup({ accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" }, contents: { script: /(?:java|ecma)script/ }, converters: { "text script": function (e) { return b.globalEval(e), e } } }), b.ajaxPrefilter("script", function (e) { e.cache === t && (e.cache = !1), e.crossDomain && (e.type = "GET", e.global = !1) }), b.ajaxTransport("script", function (e) { if (e.crossDomain) { var n, r = o.head || b("head")[0] || o.documentElement; return { send: function (t, i) { n = o.createElement("script"), n.async = !0, e.scriptCharset && (n.charset = e.scriptCharset), n.src = e.url, n.onload = n.onreadystatechange = function (e, t) { (t || !n.readyState || /loaded|complete/.test(n.readyState)) && (n.onload = n.onreadystatechange = null, n.parentNode && n.parentNode.removeChild(n), n = null, t || i(200, "success")) }, r.insertBefore(n, r.firstChild) }, abort: function () { n && n.onload(t, !0) } } } }); var On = [], Bn = /(=)\?(?=&|$)|\?\?/; b.ajaxSetup({ jsonp: "callback", jsonpCallback: function () { var e = On.pop() || b.expando + "_" + vn++; return this[e] = !0, e } }), b.ajaxPrefilter("json jsonp", function (n, r, i) { var o, a, s, u = n.jsonp !== !1 && (Bn.test(n.url) ? "url" : "string" == typeof n.data && !(n.contentType || "").indexOf("application/x-www-form-urlencoded") && Bn.test(n.data) && "data"); return u || "jsonp" === n.dataTypes[0] ? (o = n.jsonpCallback = b.isFunction(n.jsonpCallback) ? n.jsonpCallback() : n.jsonpCallback, u ? n[u] = n[u].replace(Bn, "$1" + o) : n.jsonp !== !1 && (n.url += (bn.test(n.url) ? "&" : "?") + n.jsonp + "=" + o), n.converters["script json"] = function () { return s || b.error(o + " was not called"), s[0] }, n.dataTypes[0] = "json", a = e[o], e[o] = function () { s = arguments }, i.always(function () { e[o] = a, n[o] && (n.jsonpCallback = r.jsonpCallback, On.push(o)), s && b.isFunction(a) && a(s[0]), s = a = t }), "script") : t }); var Pn, Rn, Wn = 0, $n = e.ActiveXObject && function () { var e; for (e in Pn) Pn[e](t, !0) }; function In() { try { return new e.XMLHttpRequest } catch (t) { } } function zn() { try { return new e.ActiveXObject("Microsoft.XMLHTTP") } catch (t) { } } b.ajaxSettings.xhr = e.ActiveXObject ? function () { return !this.isLocal && In() || zn() } : In, Rn = b.ajaxSettings.xhr(), b.support.cors = !!Rn && "withCredentials" in Rn, Rn = b.support.ajax = !!Rn, Rn && b.ajaxTransport(function (n) { if (!n.crossDomain || b.support.cors) { var r; return { send: function (i, o) { var a, s, u = n.xhr(); if (n.username ? u.open(n.type, n.url, n.async, n.username, n.password) : u.open(n.type, n.url, n.async), n.xhrFields) for (s in n.xhrFields) u[s] = n.xhrFields[s]; n.mimeType && u.overrideMimeType && u.overrideMimeType(n.mimeType), n.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest"); try { for (s in i) u.setRequestHeader(s, i[s]) } catch (l) { } u.send(n.hasContent && n.data || null), r = function (e, i) { var s, l, c, p; try { if (r && (i || 4 === u.readyState)) if (r = t, a && (u.onreadystatechange = b.noop, $n && delete Pn[a]), i) 4 !== u.readyState && u.abort(); else { p = {}, s = u.status, l = u.getAllResponseHeaders(), "string" == typeof u.responseText && (p.text = u.responseText); try { c = u.statusText } catch (f) { c = "" } s || !n.isLocal || n.crossDomain ? 1223 === s && (s = 204) : s = p.text ? 200 : 404 } } catch (d) { i || o(-1, d) } p && o(s, c, p, l) }, n.async ? 4 === u.readyState ? setTimeout(r) : (a = ++Wn, $n && (Pn || (Pn = {}, b(e).unload($n)), Pn[a] = r), u.onreadystatechange = r) : r() }, abort: function () { r && r(t, !0) } } } }); var Xn, Un, Vn = /^(?:toggle|show|hide)$/, Yn = RegExp("^(?:([+-])=|)(" + x + ")([a-z%]*)$", "i"), Jn = /queueHooks$/, Gn = [nr], Qn = { "*": [function (e, t) { var n, r, i = this.createTween(e, t), o = Yn.exec(t), a = i.cur(), s = +a || 0, u = 1, l = 20; if (o) { if (n = +o[2], r = o[3] || (b.cssNumber[e] ? "" : "px"), "px" !== r && s) { s = b.css(i.elem, e, !0) || n || 1; do u = u || ".5", s /= u, b.style(i.elem, e, s + r); while (u !== (u = i.cur() / a) && 1 !== u && --l) } i.unit = r, i.start = s, i.end = o[1] ? s + (o[1] + 1) * n : n } return i } ] }; function Kn() { return setTimeout(function () { Xn = t }), Xn = b.now() } function Zn(e, t) { b.each(t, function (t, n) { var r = (Qn[t] || []).concat(Qn["*"]), i = 0, o = r.length; for (; o > i; i++) if (r[i].call(e, t, n)) return }) } function er(e, t, n) { var r, i, o = 0, a = Gn.length, s = b.Deferred().always(function () { delete u.elem }), u = function () { if (i) return !1; var t = Xn || Kn(), n = Math.max(0, l.startTime + l.duration - t), r = n / l.duration || 0, o = 1 - r, a = 0, u = l.tweens.length; for (; u > a; a++) l.tweens[a].run(o); return s.notifyWith(e, [l, o, n]), 1 > o && u ? n : (s.resolveWith(e, [l]), !1) }, l = s.promise({ elem: e, props: b.extend({}, t), opts: b.extend(!0, { specialEasing: {} }, n), originalProperties: t, originalOptions: n, startTime: Xn || Kn(), duration: n.duration, tweens: [], createTween: function (t, n) { var r = b.Tween(e, l.opts, t, n, l.opts.specialEasing[t] || l.opts.easing); return l.tweens.push(r), r }, stop: function (t) { var n = 0, r = t ? l.tweens.length : 0; if (i) return this; for (i = !0; r > n; n++) l.tweens[n].run(1); return t ? s.resolveWith(e, [l, t]) : s.rejectWith(e, [l, t]), this } }), c = l.props; for (tr(c, l.opts.specialEasing); a > o; o++) if (r = Gn[o].call(l, e, c, l.opts)) return r; return Zn(l, c), b.isFunction(l.opts.start) && l.opts.start.call(e, l), b.fx.timer(b.extend(u, { elem: e, anim: l, queue: l.opts.queue })), l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always) } function tr(e, t) { var n, r, i, o, a; for (i in e) if (r = b.camelCase(i), o = t[r], n = e[i], b.isArray(n) && (o = n[1], n = e[i] = n[0]), i !== r && (e[r] = n, delete e[i]), a = b.cssHooks[r], a && "expand" in a) { n = a.expand(n), delete e[r]; for (i in n) i in e || (e[i] = n[i], t[i] = o) } else t[r] = o } b.Animation = b.extend(er, { tweener: function (e, t) { b.isFunction(e) ? (t = e, e = ["*"]) : e = e.split(" "); var n, r = 0, i = e.length; for (; i > r; r++) n = e[r], Qn[n] = Qn[n] || [], Qn[n].unshift(t) }, prefilter: function (e, t) { t ? Gn.unshift(e) : Gn.push(e) } }); function nr(e, t, n) { var r, i, o, a, s, u, l, c, p, f = this, d = e.style, h = {}, g = [], m = e.nodeType && nn(e); n.queue || (c = b._queueHooks(e, "fx"), null == c.unqueued && (c.unqueued = 0, p = c.empty.fire, c.empty.fire = function () { c.unqueued || p() }), c.unqueued++, f.always(function () { f.always(function () { c.unqueued--, b.queue(e, "fx").length || c.empty.fire() }) })), 1 === e.nodeType && ("height" in t || "width" in t) && (n.overflow = [d.overflow, d.overflowX, d.overflowY], "inline" === b.css(e, "display") && "none" === b.css(e, "float") && (b.support.inlineBlockNeedsLayout && "inline" !== un(e.nodeName) ? d.zoom = 1 : d.display = "inline-block")), n.overflow && (d.overflow = "hidden", b.support.shrinkWrapBlocks || f.always(function () { d.overflow = n.overflow[0], d.overflowX = n.overflow[1], d.overflowY = n.overflow[2] })); for (i in t) if (a = t[i], Vn.exec(a)) { if (delete t[i], u = u || "toggle" === a, a === (m ? "hide" : "show")) continue; g.push(i) } if (o = g.length) { s = b._data(e, "fxshow") || b._data(e, "fxshow", {}), "hidden" in s && (m = s.hidden), u && (s.hidden = !m), m ? b(e).show() : f.done(function () { b(e).hide() }), f.done(function () { var t; b._removeData(e, "fxshow"); for (t in h) b.style(e, t, h[t]) }); for (i = 0; o > i; i++) r = g[i], l = f.createTween(r, m ? s[r] : 0), h[r] = s[r] || b.style(e, r), r in s || (s[r] = l.start, m && (l.end = l.start, l.start = "width" === r || "height" === r ? 1 : 0)) } } function rr(e, t, n, r, i) { return new rr.prototype.init(e, t, n, r, i) } b.Tween = rr, rr.prototype = { constructor: rr, init: function (e, t, n, r, i, o) { this.elem = e, this.prop = n, this.easing = i || "swing", this.options = t, this.start = this.now = this.cur(), this.end = r, this.unit = o || (b.cssNumber[n] ? "" : "px") }, cur: function () { var e = rr.propHooks[this.prop]; return e && e.get ? e.get(this) : rr.propHooks._default.get(this) }, run: function (e) { var t, n = rr.propHooks[this.prop]; return this.pos = t = this.options.duration ? b.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : rr.propHooks._default.set(this), this } }, rr.prototype.init.prototype = rr.prototype, rr.propHooks = { _default: { get: function (e) { var t; return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = b.css(e.elem, e.prop, ""), t && "auto" !== t ? t : 0) : e.elem[e.prop] }, set: function (e) { b.fx.step[e.prop] ? b.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[b.cssProps[e.prop]] || b.cssHooks[e.prop]) ? b.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now } } }, rr.propHooks.scrollTop = rr.propHooks.scrollLeft = { set: function (e) { e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now) } }, b.each(["toggle", "show", "hide"], function (e, t) { var n = b.fn[t]; b.fn[t] = function (e, r, i) { return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(ir(t, !0), e, r, i) } }), b.fn.extend({ fadeTo: function (e, t, n, r) { return this.filter(nn).css("opacity", 0).show().end().animate({ opacity: t }, e, n, r) }, animate: function (e, t, n, r) { var i = b.isEmptyObject(e), o = b.speed(t, n, r), a = function () { var t = er(this, b.extend({}, e), o); a.finish = function () { t.stop(!0) }, (i || b._data(this, "finish")) && t.stop(!0) }; return a.finish = a, i || o.queue === !1 ? this.each(a) : this.queue(o.queue, a) }, stop: function (e, n, r) { var i = function (e) { var t = e.stop; delete e.stop, t(r) }; return "string" != typeof e && (r = n, n = e, e = t), n && e !== !1 && this.queue(e || "fx", []), this.each(function () { var t = !0, n = null != e && e + "queueHooks", o = b.timers, a = b._data(this); if (n) a[n] && a[n].stop && i(a[n]); else for (n in a) a[n] && a[n].stop && Jn.test(n) && i(a[n]); for (n = o.length; n--; ) o[n].elem !== this || null != e && o[n].queue !== e || (o[n].anim.stop(r), t = !1, o.splice(n, 1)); (t || !r) && b.dequeue(this, e) }) }, finish: function (e) { return e !== !1 && (e = e || "fx"), this.each(function () { var t, n = b._data(this), r = n[e + "queue"], i = n[e + "queueHooks"], o = b.timers, a = r ? r.length : 0; for (n.finish = !0, b.queue(this, e, []), i && i.cur && i.cur.finish && i.cur.finish.call(this), t = o.length; t--; ) o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), o.splice(t, 1)); for (t = 0; a > t; t++) r[t] && r[t].finish && r[t].finish.call(this); delete n.finish }) } }); function ir(e, t) { var n, r = { height: e }, i = 0; for (t = t ? 1 : 0; 4 > i; i += 2 - t) n = Zt[i], r["margin" + n] = r["padding" + n] = e; return t && (r.opacity = r.width = e), r } b.each({ slideDown: ir("show"), slideUp: ir("hide"), slideToggle: ir("toggle"), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide" }, fadeToggle: { opacity: "toggle"} }, function (e, t) { b.fn[e] = function (e, n, r) { return this.animate(t, e, n, r) } }), b.speed = function (e, t, n) { var r = e && "object" == typeof e ? b.extend({}, e) : { complete: n || !n && t || b.isFunction(e) && e, duration: e, easing: n && t || t && !b.isFunction(t) && t }; return r.duration = b.fx.off ? 0 : "number" == typeof r.duration ? r.duration : r.duration in b.fx.speeds ? b.fx.speeds[r.duration] : b.fx.speeds._default, (null == r.queue || r.queue === !0) && (r.queue = "fx"), r.old = r.complete, r.complete = function () { b.isFunction(r.old) && r.old.call(this), r.queue && b.dequeue(this, r.queue) }, r }, b.easing = { linear: function (e) { return e }, swing: function (e) { return .5 - Math.cos(e * Math.PI) / 2 } }, b.timers = [], b.fx = rr.prototype.init, b.fx.tick = function () { var e, n = b.timers, r = 0; for (Xn = b.now(); n.length > r; r++) e = n[r], e() || n[r] !== e || n.splice(r--, 1); n.length || b.fx.stop(), Xn = t }, b.fx.timer = function (e) { e() && b.timers.push(e) && b.fx.start() }, b.fx.interval = 13, b.fx.start = function () { Un || (Un = setInterval(b.fx.tick, b.fx.interval)) }, b.fx.stop = function () { clearInterval(Un), Un = null }, b.fx.speeds = { slow: 600, fast: 200, _default: 400 }, b.fx.step = {}, b.expr && b.expr.filters && (b.expr.filters.animated = function (e) { return b.grep(b.timers, function (t) { return e === t.elem }).length }), b.fn.offset = function (e) { if (arguments.length) return e === t ? this : this.each(function (t) { b.offset.setOffset(this, e, t) }); var n, r, o = { top: 0, left: 0 }, a = this[0], s = a && a.ownerDocument; if (s) return n = s.documentElement, b.contains(n, a) ? (typeof a.getBoundingClientRect !== i && (o = a.getBoundingClientRect()), r = or(s), { top: o.top + (r.pageYOffset || n.scrollTop) - (n.clientTop || 0), left: o.left + (r.pageXOffset || n.scrollLeft) - (n.clientLeft || 0) }) : o }, b.offset = { setOffset: function (e, t, n) { var r = b.css(e, "position"); "static" === r && (e.style.position = "relative"); var i = b(e), o = i.offset(), a = b.css(e, "top"), s = b.css(e, "left"), u = ("absolute" === r || "fixed" === r) && b.inArray("auto", [a, s]) > -1, l = {}, c = {}, p, f; u ? (c = i.position(), p = c.top, f = c.left) : (p = parseFloat(a) || 0, f = parseFloat(s) || 0), b.isFunction(t) && (t = t.call(e, n, o)), null != t.top && (l.top = t.top - o.top + p), null != t.left && (l.left = t.left - o.left + f), "using" in t ? t.using.call(e, l) : i.css(l) } }, b.fn.extend({ position: function () { if (this[0]) { var e, t, n = { top: 0, left: 0 }, r = this[0]; return "fixed" === b.css(r, "position") ? t = r.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), b.nodeName(e[0], "html") || (n = e.offset()), n.top += b.css(e[0], "borderTopWidth", !0), n.left += b.css(e[0], "borderLeftWidth", !0)), { top: t.top - n.top - b.css(r, "marginTop", !0), left: t.left - n.left - b.css(r, "marginLeft", !0)} } }, offsetParent: function () { return this.map(function () { var e = this.offsetParent || o.documentElement; while (e && !b.nodeName(e, "html") && "static" === b.css(e, "position")) e = e.offsetParent; return e || o.documentElement }) } }), b.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (e, n) { var r = /Y/.test(n); b.fn[e] = function (i) { return b.access(this, function (e, i, o) { var a = or(e); return o === t ? a ? n in a ? a[n] : a.document.documentElement[i] : e[i] : (a ? a.scrollTo(r ? b(a).scrollLeft() : o, r ? o : b(a).scrollTop()) : e[i] = o, t) }, e, i, arguments.length, null) } }); function or(e) { return b.isWindow(e) ? e : 9 === e.nodeType ? e.defaultView || e.parentWindow : !1 } b.each({ Height: "height", Width: "width" }, function (e, n) { b.each({ padding: "inner" + e, content: n, "": "outer" + e }, function (r, i) { b.fn[i] = function (i, o) { var a = arguments.length && (r || "boolean" != typeof i), s = r || (i === !0 || o === !0 ? "margin" : "border"); return b.access(this, function (n, r, i) { var o; return b.isWindow(n) ? n.document.documentElement["client" + e] : 9 === n.nodeType ? (o = n.documentElement, Math.max(n.body["scroll" + e], o["scroll" + e], n.body["offset" + e], o["offset" + e], o["client" + e])) : i === t ? b.css(n, r, s) : b.style(n, r, i, s) }, n, a ? i : t, a, null) } }) }), e.jQuery = e.$ = b, "function" == typeof define && define.amd && define.amd.jQuery && define("jquery", [], function () { return b })
})(window);
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function (factory) {
	if (typeof define === 'function' && define.amd) {
		// AMD
		define(['jquery'], factory);
	} else if (typeof exports === 'object') {
		// CommonJS
		factory(require('jquery'));
	} else {
		// Browser globals
		factory(jQuery);
	}
}(function ($) {

	var pluses = /\+/g;

	function encode(s) {
		return config.raw ? s : encodeURIComponent(s);
	}

	function decode(s) {
		return config.raw ? s : decodeURIComponent(s);
	}

	function stringifyCookieValue(value) {
		return encode(config.json ? JSON.stringify(value) : String(value));
	}

	function parseCookieValue(s) {
		if (s.indexOf('"') === 0) {
			// This is a quoted cookie as according to RFC2068, unescape...
			s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
		}

		try {
			// Replace server-side written pluses with spaces.
			// If we can't decode the cookie, ignore it, it's unusable.
			// If we can't parse the cookie, ignore it, it's unusable.
			s = decodeURIComponent(s.replace(pluses, ' '));
			return config.json ? JSON.parse(s) : s;
		} catch(e) {}
	}

	function read(s, converter) {
		var value = config.raw ? s : parseCookieValue(s);
		return $.isFunction(converter) ? converter(value) : value;
	}

	var config = $.cookie = function (key, value, options) {

		// Write

		if (value !== undefined && !$.isFunction(value)) {
			options = $.extend({}, config.defaults, options);

			if (typeof options.expires === 'number') {
				var days = options.expires, t = options.expires = new Date();
				t.setTime(+t + days * 864e+5);
			}

			return (document.cookie = [
				encode(key), '=', stringifyCookieValue(value),
				options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
				options.path    ? '; path=' + options.path : '',
				options.domain  ? '; domain=' + options.domain : '',
				options.secure  ? '; secure' : ''
			].join(''));
		}

		// Read

		var result = key ? undefined : {};

		// To prevent the for loop in the first place assign an empty array
		// in case there are no cookies at all. Also prevents odd result when
		// calling $.cookie().
		var cookies = document.cookie ? document.cookie.split('; ') : [];

		for (var i = 0, l = cookies.length; i < l; i++) {
			var parts = cookies[i].split('=');
			var name = decode(parts.shift());
			var cookie = parts.join('=');

			if (key && key === name) {
				// If second argument (value) is a function it's a converter...
				result = read(cookie, value);
				break;
			}

			// Prevent storing a cookie that we couldn't decode.
			if (!key && (cookie = read(cookie)) !== undefined) {
				result[name] = cookie;
			}
		}

		return result;
	};

	config.defaults = {};

	$.removeCookie = function (key, options) {
		if ($.cookie(key) === undefined) {
			return false;
		}

		// Must not alter options, thus extending a fresh object...
		$.cookie(key, '', $.extend({}, options, { expires: -1 }));
		return !$.cookie(key);
	};

}));

(function($) {
    var overlayIsOpen = false,
        overlayResizeTimeout,
        popupIsOpen = false,
        $doc = $(document),
        $win = $(window);

    $.overlay = {
        prop: {
            anim: {
                open: {
                    speed: 300
                },
                close: {
                    speed: 300
                }
            },
            opacity: .7,
            isInit: false,
            $overlay: null,
            $canvas: null
        },
        setWH: function() {
            if(!$.overlay.prop.isInit || !$.overlay.prop.$canvas) {
                return;
            }
            //$.overlay.prop.$overlay.css({width: $.overlay.prop.$canvas.width(), height: $.overlay.prop.$canvas.height()});
            $.overlay.prop.$overlay.css({width: '100%', height: $.overlay.prop.$canvas.height() });
        },
        init: function() {
            if($.overlay.prop.isInit) {
                return;
            }
            $.overlay.prop.$overlay = $('<div class="overlay" style="display: none;"></div>');
            $('body').append($.overlay.prop.$overlay);
            $.overlay.prop.isInit = true;
            $.overlay.setWH();
            
            $.overlay.prop.$overlay.on('click', function() {
                $('body').trigger('overlay.click');
            });

            $win.on('resize', function() {
                if(overlayIsOpen) {
                    clearTimeout(overlayResizeTimeout);
                    overlayResizeTimeout = setTimeout(function() {
                        $.overlay.setWH();
                    }, 100);
                }
            });
        },
        open: function(callback) {
            $.overlay.init();
            $.overlay.prop.$overlay.fadeTo($.overlay.prop.anim.open.speed, $.overlay.prop.opacity, callback);
            overlayIsOpen = true;
        },
        close: function() {
            if(!$.overlay.prop.isInit) {
                return;
            }
            $.overlay.prop.$overlay.fadeOut($.overlay.prop.anim.close.speed);
            overlayIsOpen = false;
        },
        isOpen: function() {
            return !!overlayIsOpen;
        }
    };

    var popupOpenTimeout = null;
    var popup = {
        open: function(selector, isClearErr, isResetForm)
        {
            clearInterval(popupOpenTimeout);
            popupOpenTimeout = setTimeout(function() {
                popup._open(selector, isClearErr, isResetForm);
            }, 200);
        },
        _open: function(selector, isClearErr, isResetForm)
        {
            var $popup = popup._getPopup(selector),
                position,
                animationProp,
                animationSetup,
                height = $popup.outerHeight(),
                wheight = $(window).height(),
                isClearErr = isClearErr || true,
                isResetForm = isResetForm || true;

            if(!$popup || $popup.hasClass('is-open')) { return; }

            if(!!isResetForm && !$popup.hasClass('not-reset')) {
                popup.resetForm($popup);
            }

            if(!!isClearErr) {
                popup.clearErrors($popup);
            }

            animationProp = $popup.attr('data-animation') || 'opacity';
            
            position = popup.getPosition($popup);

            if(animationProp == 'right') {
                animationSetup = {
                    'right': position.right,
                    'opacity': 'show'
                }
                position.right = parseInt($popup.innerWidth())*-1;
            }
            else
            {
                animationSetup = {
                    'opacity': 'show'
                }
            }

            position.display = 'none';

            if( height >= $(window).height() )
            {
                position.position = 'relative';
                position.margin = '50px auto 100px';
                position.left = 'auto !important';
                position.right = 'auto !important';

                $popup.wrap( "<div class='popup-wrapper'></div>");
            }
            
            $popup.css( position );

            popup.closeAll();
            $.overlay.open(function() {
                $popup.animate(animationSetup, 250, function() {
                    $('body').trigger('popup.after_open', $popup);
                }).addClass('is-open');
            });

            $('body').addClass('popup-open');
            $('body').trigger('popup.open', $popup);

            popupIsOpen = true;
        },
        clearErrors: function($popup) {
            $popup.find('.error').removeClass('error');
            $popup.find('.popup-errorList').addClass('hide').empty();
            $popup.find('.hide-on-open').hide();
            $popup.find('.tooltip').remove();
        },
        resetForm: function($popup) {
            $form = $popup.is('form') ? $popup : $popup.find('form');
            $form.each(function() {
                this.reset();
            });
            $popup.find('.hide').removeClass('hide');
            $popup.find('img').each(function() {
                $img = $(this), $defaultImgSrc = $img.attr('data-default-url');
                if($defaultImgSrc) {
                    $img.attr('src', $defaultImgSrc);
                }
            });
        },
        close: function(isCloseOverlay) {
            $.overlay.close();
        },
        closeAll: function(isCloseOverlay, checkBtnClose) {
            $('body').removeClass('popup-open');
            var $popups = $('body').find('.popup.is-open');

            $popups.unwrap();

            if(!!checkBtnClose && !$popups.find('.popup-btn-close, .btn-close').length) {
                return;
            }

            $popups.animate({opacity: 'hide'}, 250, function() {
                $popups.filter('.temp').remove();
                if(!!isCloseOverlay) {
                    $.overlay.close();
                }
                $('body').trigger('popup.after_close', $popups);
            }).removeClass('is-open');
            popupIsOpen = false;
        },
        rePosition: function(selector) {
            var $popup = popup._getPopup(selector),

                position = popup.getPosition($popup);
            $popup.css(position);
        },
        findRealWrapper: function($popup) {
            var $realWrapper = null;
            $popup.parents().each(function() {
                if($(this).css('position') == 'relative') {
                    $realWrapper = $(this);
                    return false;
                }
            });
            return $realWrapper;
        },
        getPosition: function($popup) {
            var ww = $win.width(),
                wh = $win.height(),
                dw = $doc.width(),
                dh = $doc.height(),
                pw = $popup.outerWidth(),
                ph = $popup.outerHeight(),
                st = $win.scrollTop(),

                left = 0,
                top = 0,
                css = {},

                posType = $popup.attr('data-position'),

                $realWrapper = null;

            if($popup.hasClass('smart-positioning')) {
                $realWrapper = popup.findRealWrapper($popup);
                if($realWrapper) {
                    dw = $realWrapper.innerWidth();
                }
            }


            if(dw >= pw) {
                left = Math.round((dw - pw)/2);
            }
            
            if(wh >= ph) {
                //top = st+Math.round((wh - ph)/2);
                css.position = 'fixed';
                top = '50%';
                css.marginTop = '-' + Math.floor( ph / 2 ) + 'px';
            }
            /*
            else if(dh >= st+ph) {
                top = st;
            }
            */
            else
            {
                top = 60;
                $popup.addClass('popup-long');
                
                var lar = ww / 2 - pw /2 - 35,
                    rar = ww / 2 - pw /2 - 35;

                $popup.find('.popup-arr__prev').css( 'left', lar );
                $popup.find('.popup-arr__next').css( 'right', rar );
            }
            
            css.top = top;

            if(posType == 'right') {
                css.right = 0;
            }
            else {
                css.left = left;
            }

            return css;
        },
        _getPopup: function(selector) {
            var $popup;

            if(typeof(selector) == 'object') {
                return selector;
            }

            $popup = $('#'+selector);
            return $popup.length ? $popup : null;
        }
    };

    $.popup = popup;

    $.initPopups = function() {
        $(document).on('click', '.open-popup', function(e) {
            var selector, isResetForm, isClearError;

            isClearError = !$(this).data('noclear-form');
            isResetForm = !$(this).data('noreset-form');

            e.preventDefault ? e.preventDefault() : e.returnValue = false;

            if($(this).get(0).tagName == 'A') {
                selector = $(this).attr('href');
                popup.open(selector.substr(1), isClearError, isResetForm);
            }
        });

        $(document).on('click', '.popup-btn-close, .btn-close', function(e) {
            e.preventDefault();
            popup.closeAll(true);
        })

        $(document).on('keydown', function(e) {
            if(e.keyCode == 27) {
                popup.closeAll(true, true);
            }
        });

        $(document).on('overlay.click', function() {
            popup.closeAll(true);
        });

        $(document).on('click', '.popup-wrapper', function(e) {
            if( $(e.target).closest('.popup').length == 0 )
            {
                popup.closeAll(true);
            }
        });

        $win.on('resize.popup', function() {
            var $popups;

            if(popupIsOpen) {
                $('body').find('.popup.is-open').each(function() {
                    popup.rePosition($(this));
                });
            }
        });
    };

    $.popup.message = function(title, text, btn) {
        var btn = btn || null;

        $popup = $(tmpl('tmpl_popup-message', {'title': title, 'text': text, 'btn': btn}));

        $popup.addClass('temp');

        $('body').append($popup);

        popup.open($popup);
    }
    
    $.popup.error = function(title, text) {
        $popup = $(tmpl('tmpl_popup-error', {'title': title, 'text': text}));

        $popup.addClass('temp');

        $('body').append($popup);

        popup.open($popup);
    }

})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9fanF1ZXJ5LmpzIiwiX2Nvb2tpZS5qcyIsIl9wb3B1cC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoidmVuZG9yLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4vKiEgalF1ZXJ5IHYxLjkuMSB8IChjKSAyMDA1LCAyMDEyIGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIHwganF1ZXJ5Lm9yZy9saWNlbnNlXHJcbi8vQCBzb3VyY2VNYXBwaW5nVVJMPWpxdWVyeS5taW4ubWFwXHJcbiovXHJcbihmdW5jdGlvbiAoZSwgdCkge1xyXG4gICAgdmFyIG4sIHIsIGkgPSB0eXBlb2YgdCwgbyA9IGUuZG9jdW1lbnQsIGEgPSBlLmxvY2F0aW9uLCBzID0gZS5qUXVlcnksIHUgPSBlLiQsIGwgPSB7fSwgYyA9IFtdLCBwID0gXCIxLjkuMVwiLCBmID0gYy5jb25jYXQsIGQgPSBjLnB1c2gsIGggPSBjLnNsaWNlLCBnID0gYy5pbmRleE9mLCBtID0gbC50b1N0cmluZywgeSA9IGwuaGFzT3duUHJvcGVydHksIHYgPSBwLnRyaW0sIGIgPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gbmV3IGIuZm4uaW5pdChlLCB0LCByKSB9LCB4ID0gL1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8uc291cmNlLCB3ID0gL1xcUysvZywgVCA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZywgTiA9IC9eKD86KDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sIEMgPSAvXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sIGsgPSAvXltcXF0sOnt9XFxzXSokLywgRSA9IC8oPzpefDp8LCkoPzpcXHMqXFxbKSsvZywgUyA9IC9cXFxcKD86W1wiXFxcXFxcL2JmbnJ0XXx1W1xcZGEtZkEtRl17NH0pL2csIEEgPSAvXCJbXlwiXFxcXFxcclxcbl0qXCJ8dHJ1ZXxmYWxzZXxudWxsfC0/KD86XFxkK1xcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS9nLCBqID0gL14tbXMtLywgRCA9IC8tKFtcXGRhLXpdKS9naSwgTCA9IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiB0LnRvVXBwZXJDYXNlKCkgfSwgSCA9IGZ1bmN0aW9uIChlKSB7IChvLmFkZEV2ZW50TGlzdGVuZXIgfHwgXCJsb2FkXCIgPT09IGUudHlwZSB8fCBcImNvbXBsZXRlXCIgPT09IG8ucmVhZHlTdGF0ZSkgJiYgKHEoKSwgYi5yZWFkeSgpKSB9LCBxID0gZnVuY3Rpb24gKCkgeyBvLmFkZEV2ZW50TGlzdGVuZXIgPyAoby5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBILCAhMSksIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgSCwgITEpKSA6IChvLmRldGFjaEV2ZW50KFwib25yZWFkeXN0YXRlY2hhbmdlXCIsIEgpLCBlLmRldGFjaEV2ZW50KFwib25sb2FkXCIsIEgpKSB9OyBiLmZuID0gYi5wcm90b3R5cGUgPSB7IGpxdWVyeTogcCwgY29uc3RydWN0b3I6IGIsIGluaXQ6IGZ1bmN0aW9uIChlLCBuLCByKSB7IHZhciBpLCBhOyBpZiAoIWUpIHJldHVybiB0aGlzOyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkgeyBpZiAoaSA9IFwiPFwiID09PSBlLmNoYXJBdCgwKSAmJiBcIj5cIiA9PT0gZS5jaGFyQXQoZS5sZW5ndGggLSAxKSAmJiBlLmxlbmd0aCA+PSAzID8gW251bGwsIGUsIG51bGxdIDogTi5leGVjKGUpLCAhaSB8fCAhaVsxXSAmJiBuKSByZXR1cm4gIW4gfHwgbi5qcXVlcnkgPyAobiB8fCByKS5maW5kKGUpIDogdGhpcy5jb25zdHJ1Y3RvcihuKS5maW5kKGUpOyBpZiAoaVsxXSkgeyBpZiAobiA9IG4gaW5zdGFuY2VvZiBiID8gblswXSA6IG4sIGIubWVyZ2UodGhpcywgYi5wYXJzZUhUTUwoaVsxXSwgbiAmJiBuLm5vZGVUeXBlID8gbi5vd25lckRvY3VtZW50IHx8IG4gOiBvLCAhMCkpLCBDLnRlc3QoaVsxXSkgJiYgYi5pc1BsYWluT2JqZWN0KG4pKSBmb3IgKGkgaW4gbikgYi5pc0Z1bmN0aW9uKHRoaXNbaV0pID8gdGhpc1tpXShuW2ldKSA6IHRoaXMuYXR0cihpLCBuW2ldKTsgcmV0dXJuIHRoaXMgfSBpZiAoYSA9IG8uZ2V0RWxlbWVudEJ5SWQoaVsyXSksIGEgJiYgYS5wYXJlbnROb2RlKSB7IGlmIChhLmlkICE9PSBpWzJdKSByZXR1cm4gci5maW5kKGUpOyB0aGlzLmxlbmd0aCA9IDEsIHRoaXNbMF0gPSBhIH0gcmV0dXJuIHRoaXMuY29udGV4dCA9IG8sIHRoaXMuc2VsZWN0b3IgPSBlLCB0aGlzIH0gcmV0dXJuIGUubm9kZVR5cGUgPyAodGhpcy5jb250ZXh0ID0gdGhpc1swXSA9IGUsIHRoaXMubGVuZ3RoID0gMSwgdGhpcykgOiBiLmlzRnVuY3Rpb24oZSkgPyByLnJlYWR5KGUpIDogKGUuc2VsZWN0b3IgIT09IHQgJiYgKHRoaXMuc2VsZWN0b3IgPSBlLnNlbGVjdG9yLCB0aGlzLmNvbnRleHQgPSBlLmNvbnRleHQpLCBiLm1ha2VBcnJheShlLCB0aGlzKSkgfSwgc2VsZWN0b3I6IFwiXCIsIGxlbmd0aDogMCwgc2l6ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5sZW5ndGggfSwgdG9BcnJheTogZnVuY3Rpb24gKCkgeyByZXR1cm4gaC5jYWxsKHRoaXMpIH0sIGdldDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG51bGwgPT0gZSA/IHRoaXMudG9BcnJheSgpIDogMCA+IGUgPyB0aGlzW3RoaXMubGVuZ3RoICsgZV0gOiB0aGlzW2VdIH0sIHB1c2hTdGFjazogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBiLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSwgZSk7IHJldHVybiB0LnByZXZPYmplY3QgPSB0aGlzLCB0LmNvbnRleHQgPSB0aGlzLmNvbnRleHQsIHQgfSwgZWFjaDogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIGIuZWFjaCh0aGlzLCBlLCB0KSB9LCByZWFkeTogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGIucmVhZHkucHJvbWlzZSgpLmRvbmUoZSksIHRoaXMgfSwgc2xpY2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMucHVzaFN0YWNrKGguYXBwbHkodGhpcywgYXJndW1lbnRzKSkgfSwgZmlyc3Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuZXEoMCkgfSwgbGFzdDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5lcSgtMSkgfSwgZXE6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gdGhpcy5sZW5ndGgsIG4gPSArZSArICgwID4gZSA/IHQgOiAwKTsgcmV0dXJuIHRoaXMucHVzaFN0YWNrKG4gPj0gMCAmJiB0ID4gbiA/IFt0aGlzW25dXSA6IFtdKSB9LCBtYXA6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLnB1c2hTdGFjayhiLm1hcCh0aGlzLCBmdW5jdGlvbiAodCwgbikgeyByZXR1cm4gZS5jYWxsKHQsIG4sIHQpIH0pKSB9LCBlbmQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMucHJldk9iamVjdCB8fCB0aGlzLmNvbnN0cnVjdG9yKG51bGwpIH0sIHB1c2g6IGQsIHNvcnQ6IFtdLnNvcnQsIHNwbGljZTogW10uc3BsaWNlIH0sIGIuZm4uaW5pdC5wcm90b3R5cGUgPSBiLmZuLCBiLmV4dGVuZCA9IGIuZm4uZXh0ZW5kID0gZnVuY3Rpb24gKCkgeyB2YXIgZSwgbiwgciwgaSwgbywgYSwgcyA9IGFyZ3VtZW50c1swXSB8fCB7fSwgdSA9IDEsIGwgPSBhcmd1bWVudHMubGVuZ3RoLCBjID0gITE7IGZvciAoXCJib29sZWFuXCIgPT0gdHlwZW9mIHMgJiYgKGMgPSBzLCBzID0gYXJndW1lbnRzWzFdIHx8IHt9LCB1ID0gMiksIFwib2JqZWN0XCIgPT0gdHlwZW9mIHMgfHwgYi5pc0Z1bmN0aW9uKHMpIHx8IChzID0ge30pLCBsID09PSB1ICYmIChzID0gdGhpcywgLS11KTsgbCA+IHU7IHUrKykgaWYgKG51bGwgIT0gKG8gPSBhcmd1bWVudHNbdV0pKSBmb3IgKGkgaW4gbykgZSA9IHNbaV0sIHIgPSBvW2ldLCBzICE9PSByICYmIChjICYmIHIgJiYgKGIuaXNQbGFpbk9iamVjdChyKSB8fCAobiA9IGIuaXNBcnJheShyKSkpID8gKG4gPyAobiA9ICExLCBhID0gZSAmJiBiLmlzQXJyYXkoZSkgPyBlIDogW10pIDogYSA9IGUgJiYgYi5pc1BsYWluT2JqZWN0KGUpID8gZSA6IHt9LCBzW2ldID0gYi5leHRlbmQoYywgYSwgcikpIDogciAhPT0gdCAmJiAoc1tpXSA9IHIpKTsgcmV0dXJuIHMgfSwgYi5leHRlbmQoeyBub0NvbmZsaWN0OiBmdW5jdGlvbiAodCkgeyByZXR1cm4gZS4kID09PSBiICYmIChlLiQgPSB1KSwgdCAmJiBlLmpRdWVyeSA9PT0gYiAmJiAoZS5qUXVlcnkgPSBzKSwgYiB9LCBpc1JlYWR5OiAhMSwgcmVhZHlXYWl0OiAxLCBob2xkUmVhZHk6IGZ1bmN0aW9uIChlKSB7IGUgPyBiLnJlYWR5V2FpdCsrIDogYi5yZWFkeSghMCkgfSwgcmVhZHk6IGZ1bmN0aW9uIChlKSB7IGlmIChlID09PSAhMCA/ICEgLS1iLnJlYWR5V2FpdCA6ICFiLmlzUmVhZHkpIHsgaWYgKCFvLmJvZHkpIHJldHVybiBzZXRUaW1lb3V0KGIucmVhZHkpOyBiLmlzUmVhZHkgPSAhMCwgZSAhPT0gITAgJiYgLS1iLnJlYWR5V2FpdCA+IDAgfHwgKG4ucmVzb2x2ZVdpdGgobywgW2JdKSwgYi5mbi50cmlnZ2VyICYmIGIobykudHJpZ2dlcihcInJlYWR5XCIpLm9mZihcInJlYWR5XCIpKSB9IH0sIGlzRnVuY3Rpb246IGZ1bmN0aW9uIChlKSB7IHJldHVybiBcImZ1bmN0aW9uXCIgPT09IGIudHlwZShlKSB9LCBpc0FycmF5OiBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChlKSB7IHJldHVybiBcImFycmF5XCIgPT09IGIudHlwZShlKSB9LCBpc1dpbmRvdzogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG51bGwgIT0gZSAmJiBlID09IGUud2luZG93IH0sIGlzTnVtZXJpYzogZnVuY3Rpb24gKGUpIHsgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KGUpKSAmJiBpc0Zpbml0ZShlKSB9LCB0eXBlOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gbnVsbCA9PSBlID8gZSArIFwiXCIgOiBcIm9iamVjdFwiID09IHR5cGVvZiBlIHx8IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZSA/IGxbbS5jYWxsKGUpXSB8fCBcIm9iamVjdFwiIDogdHlwZW9mIGUgfSwgaXNQbGFpbk9iamVjdDogZnVuY3Rpb24gKGUpIHsgaWYgKCFlIHx8IFwib2JqZWN0XCIgIT09IGIudHlwZShlKSB8fCBlLm5vZGVUeXBlIHx8IGIuaXNXaW5kb3coZSkpIHJldHVybiAhMTsgdHJ5IHsgaWYgKGUuY29uc3RydWN0b3IgJiYgIXkuY2FsbChlLCBcImNvbnN0cnVjdG9yXCIpICYmICF5LmNhbGwoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwiaXNQcm90b3R5cGVPZlwiKSkgcmV0dXJuICExIH0gY2F0Y2ggKG4pIHsgcmV0dXJuICExIH0gdmFyIHI7IGZvciAociBpbiBlKTsgcmV0dXJuIHIgPT09IHQgfHwgeS5jYWxsKGUsIHIpIH0sIGlzRW1wdHlPYmplY3Q6IGZ1bmN0aW9uIChlKSB7IHZhciB0OyBmb3IgKHQgaW4gZSkgcmV0dXJuICExOyByZXR1cm4gITAgfSwgZXJyb3I6IGZ1bmN0aW9uIChlKSB7IHRocm93IEVycm9yKGUpIH0sIHBhcnNlSFRNTDogZnVuY3Rpb24gKGUsIHQsIG4pIHsgaWYgKCFlIHx8IFwic3RyaW5nXCIgIT0gdHlwZW9mIGUpIHJldHVybiBudWxsOyBcImJvb2xlYW5cIiA9PSB0eXBlb2YgdCAmJiAobiA9IHQsIHQgPSAhMSksIHQgPSB0IHx8IG87IHZhciByID0gQy5leGVjKGUpLCBpID0gIW4gJiYgW107IHJldHVybiByID8gW3QuY3JlYXRlRWxlbWVudChyWzFdKV0gOiAociA9IGIuYnVpbGRGcmFnbWVudChbZV0sIHQsIGkpLCBpICYmIGIoaSkucmVtb3ZlKCksIGIubWVyZ2UoW10sIHIuY2hpbGROb2RlcykpIH0sIHBhcnNlSlNPTjogZnVuY3Rpb24gKG4pIHsgcmV0dXJuIGUuSlNPTiAmJiBlLkpTT04ucGFyc2UgPyBlLkpTT04ucGFyc2UobikgOiBudWxsID09PSBuID8gbiA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIG4gJiYgKG4gPSBiLnRyaW0obiksIG4gJiYgay50ZXN0KG4ucmVwbGFjZShTLCBcIkBcIikucmVwbGFjZShBLCBcIl1cIikucmVwbGFjZShFLCBcIlwiKSkpID8gRnVuY3Rpb24oXCJyZXR1cm4gXCIgKyBuKSgpIDogKGIuZXJyb3IoXCJJbnZhbGlkIEpTT046IFwiICsgbiksIHQpIH0sIHBhcnNlWE1MOiBmdW5jdGlvbiAobikgeyB2YXIgciwgaTsgaWYgKCFuIHx8IFwic3RyaW5nXCIgIT0gdHlwZW9mIG4pIHJldHVybiBudWxsOyB0cnkgeyBlLkRPTVBhcnNlciA/IChpID0gbmV3IERPTVBhcnNlciwgciA9IGkucGFyc2VGcm9tU3RyaW5nKG4sIFwidGV4dC94bWxcIikpIDogKHIgPSBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxET01cIiksIHIuYXN5bmMgPSBcImZhbHNlXCIsIHIubG9hZFhNTChuKSkgfSBjYXRjaCAobykgeyByID0gdCB9IHJldHVybiByICYmIHIuZG9jdW1lbnRFbGVtZW50ICYmICFyLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RoIHx8IGIuZXJyb3IoXCJJbnZhbGlkIFhNTDogXCIgKyBuKSwgciB9LCBub29wOiBmdW5jdGlvbiAoKSB7IH0sIGdsb2JhbEV2YWw6IGZ1bmN0aW9uICh0KSB7IHQgJiYgYi50cmltKHQpICYmIChlLmV4ZWNTY3JpcHQgfHwgZnVuY3Rpb24gKHQpIHsgZS5ldmFsLmNhbGwoZSwgdCkgfSkodCkgfSwgY2FtZWxDYXNlOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS5yZXBsYWNlKGosIFwibXMtXCIpLnJlcGxhY2UoRCwgTCkgfSwgbm9kZU5hbWU6IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiBlLm5vZGVOYW1lICYmIGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gdC50b0xvd2VyQ2FzZSgpIH0sIGVhY2g6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByLCBpID0gMCwgbyA9IGUubGVuZ3RoLCBhID0gTShlKTsgaWYgKG4pIHsgaWYgKGEpIHsgZm9yICg7IG8gPiBpOyBpKyspIGlmIChyID0gdC5hcHBseShlW2ldLCBuKSwgciA9PT0gITEpIGJyZWFrIH0gZWxzZSBmb3IgKGkgaW4gZSkgaWYgKHIgPSB0LmFwcGx5KGVbaV0sIG4pLCByID09PSAhMSkgYnJlYWsgfSBlbHNlIGlmIChhKSB7IGZvciAoOyBvID4gaTsgaSsrKSBpZiAociA9IHQuY2FsbChlW2ldLCBpLCBlW2ldKSwgciA9PT0gITEpIGJyZWFrIH0gZWxzZSBmb3IgKGkgaW4gZSkgaWYgKHIgPSB0LmNhbGwoZVtpXSwgaSwgZVtpXSksIHIgPT09ICExKSBicmVhazsgcmV0dXJuIGUgfSwgdHJpbTogdiAmJiAhdi5jYWxsKFwiXFx1ZmVmZlxcdTAwYTBcIikgPyBmdW5jdGlvbiAoZSkgeyByZXR1cm4gbnVsbCA9PSBlID8gXCJcIiA6IHYuY2FsbChlKSB9IDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG51bGwgPT0gZSA/IFwiXCIgOiAoZSArIFwiXCIpLnJlcGxhY2UoVCwgXCJcIikgfSwgbWFrZUFycmF5OiBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IHQgfHwgW107IHJldHVybiBudWxsICE9IGUgJiYgKE0oT2JqZWN0KGUpKSA/IGIubWVyZ2UobiwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IFtlXSA6IGUpIDogZC5jYWxsKG4sIGUpKSwgbiB9LCBpbkFycmF5OiBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgcjsgaWYgKHQpIHsgaWYgKGcpIHJldHVybiBnLmNhbGwodCwgZSwgbik7IGZvciAociA9IHQubGVuZ3RoLCBuID0gbiA/IDAgPiBuID8gTWF0aC5tYXgoMCwgciArIG4pIDogbiA6IDA7IHIgPiBuOyBuKyspIGlmIChuIGluIHQgJiYgdFtuXSA9PT0gZSkgcmV0dXJuIG4gfSByZXR1cm4gLTEgfSwgbWVyZ2U6IGZ1bmN0aW9uIChlLCBuKSB7IHZhciByID0gbi5sZW5ndGgsIGkgPSBlLmxlbmd0aCwgbyA9IDA7IGlmIChcIm51bWJlclwiID09IHR5cGVvZiByKSBmb3IgKDsgciA+IG87IG8rKykgZVtpKytdID0gbltvXTsgZWxzZSB3aGlsZSAobltvXSAhPT0gdCkgZVtpKytdID0gbltvKytdOyByZXR1cm4gZS5sZW5ndGggPSBpLCBlIH0sIGdyZXA6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHZhciByLCBpID0gW10sIG8gPSAwLCBhID0gZS5sZW5ndGg7IGZvciAobiA9ICEhbjsgYSA+IG87IG8rKykgciA9ICEhdChlW29dLCBvKSwgbiAhPT0gciAmJiBpLnB1c2goZVtvXSk7IHJldHVybiBpIH0sIG1hcDogZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHIsIGkgPSAwLCBvID0gZS5sZW5ndGgsIGEgPSBNKGUpLCBzID0gW107IGlmIChhKSBmb3IgKDsgbyA+IGk7IGkrKykgciA9IHQoZVtpXSwgaSwgbiksIG51bGwgIT0gciAmJiAoc1tzLmxlbmd0aF0gPSByKTsgZWxzZSBmb3IgKGkgaW4gZSkgciA9IHQoZVtpXSwgaSwgbiksIG51bGwgIT0gciAmJiAoc1tzLmxlbmd0aF0gPSByKTsgcmV0dXJuIGYuYXBwbHkoW10sIHMpIH0sIGd1aWQ6IDEsIHByb3h5OiBmdW5jdGlvbiAoZSwgbikgeyB2YXIgciwgaSwgbzsgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIG4gJiYgKG8gPSBlW25dLCBuID0gZSwgZSA9IG8pLCBiLmlzRnVuY3Rpb24oZSkgPyAociA9IGguY2FsbChhcmd1bWVudHMsIDIpLCBpID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZS5hcHBseShuIHx8IHRoaXMsIHIuY29uY2F0KGguY2FsbChhcmd1bWVudHMpKSkgfSwgaS5ndWlkID0gZS5ndWlkID0gZS5ndWlkIHx8IGIuZ3VpZCsrLCBpKSA6IHQgfSwgYWNjZXNzOiBmdW5jdGlvbiAoZSwgbiwgciwgaSwgbywgYSwgcykgeyB2YXIgdSA9IDAsIGwgPSBlLmxlbmd0aCwgYyA9IG51bGwgPT0gcjsgaWYgKFwib2JqZWN0XCIgPT09IGIudHlwZShyKSkgeyBvID0gITA7IGZvciAodSBpbiByKSBiLmFjY2VzcyhlLCBuLCB1LCByW3VdLCAhMCwgYSwgcykgfSBlbHNlIGlmIChpICE9PSB0ICYmIChvID0gITAsIGIuaXNGdW5jdGlvbihpKSB8fCAocyA9ICEwKSwgYyAmJiAocyA/IChuLmNhbGwoZSwgaSksIG4gPSBudWxsKSA6IChjID0gbiwgbiA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiBjLmNhbGwoYihlKSwgbikgfSkpLCBuKSkgZm9yICg7IGwgPiB1OyB1KyspIG4oZVt1XSwgciwgcyA/IGkgOiBpLmNhbGwoZVt1XSwgdSwgbihlW3VdLCByKSkpOyByZXR1cm4gbyA/IGUgOiBjID8gbi5jYWxsKGUpIDogbCA/IG4oZVswXSwgcikgOiBhIH0sIG5vdzogZnVuY3Rpb24gKCkgeyByZXR1cm4gKG5ldyBEYXRlKS5nZXRUaW1lKCkgfSB9KSwgYi5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24gKHQpIHsgaWYgKCFuKSBpZiAobiA9IGIuRGVmZXJyZWQoKSwgXCJjb21wbGV0ZVwiID09PSBvLnJlYWR5U3RhdGUpIHNldFRpbWVvdXQoYi5yZWFkeSk7IGVsc2UgaWYgKG8uYWRkRXZlbnRMaXN0ZW5lcikgby5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBILCAhMSksIGUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgSCwgITEpOyBlbHNlIHsgby5hdHRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLCBIKSwgZS5hdHRhY2hFdmVudChcIm9ubG9hZFwiLCBIKTsgdmFyIHIgPSAhMTsgdHJ5IHsgciA9IG51bGwgPT0gZS5mcmFtZUVsZW1lbnQgJiYgby5kb2N1bWVudEVsZW1lbnQgfSBjYXRjaCAoaSkgeyB9IHIgJiYgci5kb1Njcm9sbCAmJiBmdW5jdGlvbiBhKCkgeyBpZiAoIWIuaXNSZWFkeSkgeyB0cnkgeyByLmRvU2Nyb2xsKFwibGVmdFwiKSB9IGNhdGNoIChlKSB7IHJldHVybiBzZXRUaW1lb3V0KGEsIDUwKSB9IHEoKSwgYi5yZWFkeSgpIH0gfSAoKSB9IHJldHVybiBuLnByb21pc2UodCkgfSwgYi5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSwgZnVuY3Rpb24gKGUsIHQpIHsgbFtcIltvYmplY3QgXCIgKyB0ICsgXCJdXCJdID0gdC50b0xvd2VyQ2FzZSgpIH0pOyBmdW5jdGlvbiBNKGUpIHsgdmFyIHQgPSBlLmxlbmd0aCwgbiA9IGIudHlwZShlKTsgcmV0dXJuIGIuaXNXaW5kb3coZSkgPyAhMSA6IDEgPT09IGUubm9kZVR5cGUgJiYgdCA/ICEwIDogXCJhcnJheVwiID09PSBuIHx8IFwiZnVuY3Rpb25cIiAhPT0gbiAmJiAoMCA9PT0gdCB8fCBcIm51bWJlclwiID09IHR5cGVvZiB0ICYmIHQgPiAwICYmIHQgLSAxIGluIGUpIH0gciA9IGIobyk7IHZhciBfID0ge307IGZ1bmN0aW9uIEYoZSkgeyB2YXIgdCA9IF9bZV0gPSB7fTsgcmV0dXJuIGIuZWFjaChlLm1hdGNoKHcpIHx8IFtdLCBmdW5jdGlvbiAoZSwgbikgeyB0W25dID0gITAgfSksIHQgfSBiLkNhbGxiYWNrcyA9IGZ1bmN0aW9uIChlKSB7IGUgPSBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gX1tlXSB8fCBGKGUpIDogYi5leHRlbmQoe30sIGUpOyB2YXIgbiwgciwgaSwgbywgYSwgcywgdSA9IFtdLCBsID0gIWUub25jZSAmJiBbXSwgYyA9IGZ1bmN0aW9uICh0KSB7IGZvciAociA9IGUubWVtb3J5ICYmIHQsIGkgPSAhMCwgYSA9IHMgfHwgMCwgcyA9IDAsIG8gPSB1Lmxlbmd0aCwgbiA9ICEwOyB1ICYmIG8gPiBhOyBhKyspIGlmICh1W2FdLmFwcGx5KHRbMF0sIHRbMV0pID09PSAhMSAmJiBlLnN0b3BPbkZhbHNlKSB7IHIgPSAhMTsgYnJlYWsgfSBuID0gITEsIHUgJiYgKGwgPyBsLmxlbmd0aCAmJiBjKGwuc2hpZnQoKSkgOiByID8gdSA9IFtdIDogcC5kaXNhYmxlKCkpIH0sIHAgPSB7IGFkZDogZnVuY3Rpb24gKCkgeyBpZiAodSkgeyB2YXIgdCA9IHUubGVuZ3RoOyAoZnVuY3Rpb24gaSh0KSB7IGIuZWFjaCh0LCBmdW5jdGlvbiAodCwgbikgeyB2YXIgciA9IGIudHlwZShuKTsgXCJmdW5jdGlvblwiID09PSByID8gZS51bmlxdWUgJiYgcC5oYXMobikgfHwgdS5wdXNoKG4pIDogbiAmJiBuLmxlbmd0aCAmJiBcInN0cmluZ1wiICE9PSByICYmIGkobikgfSkgfSkoYXJndW1lbnRzKSwgbiA/IG8gPSB1Lmxlbmd0aCA6IHIgJiYgKHMgPSB0LCBjKHIpKSB9IHJldHVybiB0aGlzIH0sIHJlbW92ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdSAmJiBiLmVhY2goYXJndW1lbnRzLCBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgcjsgd2hpbGUgKChyID0gYi5pbkFycmF5KHQsIHUsIHIpKSA+IC0xKSB1LnNwbGljZShyLCAxKSwgbiAmJiAobyA+PSByICYmIG8tLSwgYSA+PSByICYmIGEtLSkgfSksIHRoaXMgfSwgaGFzOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSA/IGIuaW5BcnJheShlLCB1KSA+IC0xIDogISghdSB8fCAhdS5sZW5ndGgpIH0sIGVtcHR5OiBmdW5jdGlvbiAoKSB7IHJldHVybiB1ID0gW10sIHRoaXMgfSwgZGlzYWJsZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdSA9IGwgPSByID0gdCwgdGhpcyB9LCBkaXNhYmxlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gIXUgfSwgbG9jazogZnVuY3Rpb24gKCkgeyByZXR1cm4gbCA9IHQsIHIgfHwgcC5kaXNhYmxlKCksIHRoaXMgfSwgbG9ja2VkOiBmdW5jdGlvbiAoKSB7IHJldHVybiAhbCB9LCBmaXJlV2l0aDogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIHQgPSB0IHx8IFtdLCB0ID0gW2UsIHQuc2xpY2UgPyB0LnNsaWNlKCkgOiB0XSwgIXUgfHwgaSAmJiAhbCB8fCAobiA/IGwucHVzaCh0KSA6IGModCkpLCB0aGlzIH0sIGZpcmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHAuZmlyZVdpdGgodGhpcywgYXJndW1lbnRzKSwgdGhpcyB9LCBmaXJlZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gISFpIH0gfTsgcmV0dXJuIHAgfSwgYi5leHRlbmQoeyBEZWZlcnJlZDogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBbW1wicmVzb2x2ZVwiLCBcImRvbmVcIiwgYi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZXNvbHZlZFwiXSwgW1wicmVqZWN0XCIsIFwiZmFpbFwiLCBiLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLCBcInJlamVjdGVkXCJdLCBbXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBiLkNhbGxiYWNrcyhcIm1lbW9yeVwiKV1dLCBuID0gXCJwZW5kaW5nXCIsIHIgPSB7IHN0YXRlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBuIH0sIGFsd2F5czogZnVuY3Rpb24gKCkgeyByZXR1cm4gaS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLCB0aGlzIH0sIHRoZW46IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSBhcmd1bWVudHM7IHJldHVybiBiLkRlZmVycmVkKGZ1bmN0aW9uIChuKSB7IGIuZWFjaCh0LCBmdW5jdGlvbiAodCwgbykgeyB2YXIgYSA9IG9bMF0sIHMgPSBiLmlzRnVuY3Rpb24oZVt0XSkgJiYgZVt0XTsgaVtvWzFdXShmdW5jdGlvbiAoKSB7IHZhciBlID0gcyAmJiBzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IGUgJiYgYi5pc0Z1bmN0aW9uKGUucHJvbWlzZSkgPyBlLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpIDogblthICsgXCJXaXRoXCJdKHRoaXMgPT09IHIgPyBuLnByb21pc2UoKSA6IHRoaXMsIHMgPyBbZV0gOiBhcmd1bWVudHMpIH0pIH0pLCBlID0gbnVsbCB9KS5wcm9taXNlKCkgfSwgcHJvbWlzZTogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG51bGwgIT0gZSA/IGIuZXh0ZW5kKGUsIHIpIDogciB9IH0sIGkgPSB7fTsgcmV0dXJuIHIucGlwZSA9IHIudGhlbiwgYi5lYWNoKHQsIGZ1bmN0aW9uIChlLCBvKSB7IHZhciBhID0gb1syXSwgcyA9IG9bM107IHJbb1sxXV0gPSBhLmFkZCwgcyAmJiBhLmFkZChmdW5jdGlvbiAoKSB7IG4gPSBzIH0sIHRbMSBeIGVdWzJdLmRpc2FibGUsIHRbMl1bMl0ubG9jayksIGlbb1swXV0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBpW29bMF0gKyBcIldpdGhcIl0odGhpcyA9PT0gaSA/IHIgOiB0aGlzLCBhcmd1bWVudHMpLCB0aGlzIH0sIGlbb1swXSArIFwiV2l0aFwiXSA9IGEuZmlyZVdpdGggfSksIHIucHJvbWlzZShpKSwgZSAmJiBlLmNhbGwoaSwgaSksIGkgfSwgd2hlbjogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSAwLCBuID0gaC5jYWxsKGFyZ3VtZW50cyksIHIgPSBuLmxlbmd0aCwgaSA9IDEgIT09IHIgfHwgZSAmJiBiLmlzRnVuY3Rpb24oZS5wcm9taXNlKSA/IHIgOiAwLCBvID0gMSA9PT0gaSA/IGUgOiBiLkRlZmVycmVkKCksIGEgPSBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gZnVuY3Rpb24gKHIpIHsgdFtlXSA9IHRoaXMsIG5bZV0gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGguY2FsbChhcmd1bWVudHMpIDogciwgbiA9PT0gcyA/IG8ubm90aWZ5V2l0aCh0LCBuKSA6IC0taSB8fCBvLnJlc29sdmVXaXRoKHQsIG4pIH0gfSwgcywgdSwgbDsgaWYgKHIgPiAxKSBmb3IgKHMgPSBBcnJheShyKSwgdSA9IEFycmF5KHIpLCBsID0gQXJyYXkocik7IHIgPiB0OyB0KyspIG5bdF0gJiYgYi5pc0Z1bmN0aW9uKG5bdF0ucHJvbWlzZSkgPyBuW3RdLnByb21pc2UoKS5kb25lKGEodCwgbCwgbikpLmZhaWwoby5yZWplY3QpLnByb2dyZXNzKGEodCwgdSwgcykpIDogLS1pOyByZXR1cm4gaSB8fCBvLnJlc29sdmVXaXRoKGwsIG4pLCBvLnByb21pc2UoKSB9IH0pLCBiLnN1cHBvcnQgPSBmdW5jdGlvbiAoKSB7IHZhciB0LCBuLCByLCBhLCBzLCB1LCBsLCBjLCBwLCBmLCBkID0gby5jcmVhdGVFbGVtZW50KFwiZGl2XCIpOyBpZiAoZC5zZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIiwgXCJ0XCIpLCBkLmlubmVySFRNTCA9IFwiICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+XCIsIG4gPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSwgciA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpWzBdLCAhbiB8fCAhciB8fCAhbi5sZW5ndGgpIHJldHVybiB7fTsgcyA9IG8uY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSwgbCA9IHMuYXBwZW5kQ2hpbGQoby5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKSwgYSA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKVswXSwgci5zdHlsZS5jc3NUZXh0ID0gXCJ0b3A6MXB4O2Zsb2F0OmxlZnQ7b3BhY2l0eTouNVwiLCB0ID0geyBnZXRTZXRBdHRyaWJ1dGU6IFwidFwiICE9PSBkLmNsYXNzTmFtZSwgbGVhZGluZ1doaXRlc3BhY2U6IDMgPT09IGQuZmlyc3RDaGlsZC5ub2RlVHlwZSwgdGJvZHk6ICFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIikubGVuZ3RoLCBodG1sU2VyaWFsaXplOiAhIWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsaW5rXCIpLmxlbmd0aCwgc3R5bGU6IC90b3AvLnRlc3Qoci5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSksIGhyZWZOb3JtYWxpemVkOiBcIi9hXCIgPT09IHIuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSwgb3BhY2l0eTogL14wLjUvLnRlc3Qoci5zdHlsZS5vcGFjaXR5KSwgY3NzRmxvYXQ6ICEhci5zdHlsZS5jc3NGbG9hdCwgY2hlY2tPbjogISFhLnZhbHVlLCBvcHRTZWxlY3RlZDogbC5zZWxlY3RlZCwgZW5jdHlwZTogISFvLmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpLmVuY3R5cGUsIGh0bWw1Q2xvbmU6IFwiPDpuYXY+PC86bmF2PlwiICE9PSBvLmNyZWF0ZUVsZW1lbnQoXCJuYXZcIikuY2xvbmVOb2RlKCEwKS5vdXRlckhUTUwsIGJveE1vZGVsOiBcIkNTUzFDb21wYXRcIiA9PT0gby5jb21wYXRNb2RlLCBkZWxldGVFeHBhbmRvOiAhMCwgbm9DbG9uZUV2ZW50OiAhMCwgaW5saW5lQmxvY2tOZWVkc0xheW91dDogITEsIHNocmlua1dyYXBCbG9ja3M6ICExLCByZWxpYWJsZU1hcmdpblJpZ2h0OiAhMCwgYm94U2l6aW5nUmVsaWFibGU6ICEwLCBwaXhlbFBvc2l0aW9uOiAhMSB9LCBhLmNoZWNrZWQgPSAhMCwgdC5ub0Nsb25lQ2hlY2tlZCA9IGEuY2xvbmVOb2RlKCEwKS5jaGVja2VkLCBzLmRpc2FibGVkID0gITAsIHQub3B0RGlzYWJsZWQgPSAhbC5kaXNhYmxlZDsgdHJ5IHsgZGVsZXRlIGQudGVzdCB9IGNhdGNoIChoKSB7IHQuZGVsZXRlRXhwYW5kbyA9ICExIH0gYSA9IG8uY3JlYXRlRWxlbWVudChcImlucHV0XCIpLCBhLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiXCIpLCB0LmlucHV0ID0gXCJcIiA9PT0gYS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSwgYS52YWx1ZSA9IFwidFwiLCBhLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJyYWRpb1wiKSwgdC5yYWRpb1ZhbHVlID0gXCJ0XCIgPT09IGEudmFsdWUsIGEuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBcInRcIiksIGEuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInRcIiksIHUgPSBvLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwgdS5hcHBlbmRDaGlsZChhKSwgdC5hcHBlbmRDaGVja2VkID0gYS5jaGVja2VkLCB0LmNoZWNrQ2xvbmUgPSB1LmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCwgZC5hdHRhY2hFdmVudCAmJiAoZC5hdHRhY2hFdmVudChcIm9uY2xpY2tcIiwgZnVuY3Rpb24gKCkgeyB0Lm5vQ2xvbmVFdmVudCA9ICExIH0pLCBkLmNsb25lTm9kZSghMCkuY2xpY2soKSk7IGZvciAoZiBpbiB7IHN1Ym1pdDogITAsIGNoYW5nZTogITAsIGZvY3VzaW46ICEwIH0pIGQuc2V0QXR0cmlidXRlKGMgPSBcIm9uXCIgKyBmLCBcInRcIiksIHRbZiArIFwiQnViYmxlc1wiXSA9IGMgaW4gZSB8fCBkLmF0dHJpYnV0ZXNbY10uZXhwYW5kbyA9PT0gITE7IHJldHVybiBkLnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJjb250ZW50LWJveFwiLCBkLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcIlwiLCB0LmNsZWFyQ2xvbmVTdHlsZSA9IFwiY29udGVudC1ib3hcIiA9PT0gZC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCwgYihmdW5jdGlvbiAoKSB7IHZhciBuLCByLCBhLCBzID0gXCJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7XCIsIHUgPSBvLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTsgdSAmJiAobiA9IG8uY3JlYXRlRWxlbWVudChcImRpdlwiKSwgbi5zdHlsZS5jc3NUZXh0ID0gXCJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweFwiLCB1LmFwcGVuZENoaWxkKG4pLmFwcGVuZENoaWxkKGQpLCBkLmlubmVySFRNTCA9IFwiPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPlwiLCBhID0gZC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpLCBhWzBdLnN0eWxlLmNzc1RleHQgPSBcInBhZGRpbmc6MDttYXJnaW46MDtib3JkZXI6MDtkaXNwbGF5Om5vbmVcIiwgcCA9IDAgPT09IGFbMF0ub2Zmc2V0SGVpZ2h0LCBhWzBdLnN0eWxlLmRpc3BsYXkgPSBcIlwiLCBhWzFdLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIiwgdC5yZWxpYWJsZUhpZGRlbk9mZnNldHMgPSBwICYmIDAgPT09IGFbMF0ub2Zmc2V0SGVpZ2h0LCBkLmlubmVySFRNTCA9IFwiXCIsIGQuc3R5bGUuY3NzVGV4dCA9IFwiYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94Oy13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O3BhZGRpbmc6MXB4O2JvcmRlcjoxcHg7ZGlzcGxheTpibG9jazt3aWR0aDo0cHg7bWFyZ2luLXRvcDoxJTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MSU7XCIsIHQuYm94U2l6aW5nID0gNCA9PT0gZC5vZmZzZXRXaWR0aCwgdC5kb2VzTm90SW5jbHVkZU1hcmdpbkluQm9keU9mZnNldCA9IDEgIT09IHUub2Zmc2V0VG9wLCBlLmdldENvbXB1dGVkU3R5bGUgJiYgKHQucGl4ZWxQb3NpdGlvbiA9IFwiMSVcIiAhPT0gKGUuZ2V0Q29tcHV0ZWRTdHlsZShkLCBudWxsKSB8fCB7fSkudG9wLCB0LmJveFNpemluZ1JlbGlhYmxlID0gXCI0cHhcIiA9PT0gKGUuZ2V0Q29tcHV0ZWRTdHlsZShkLCBudWxsKSB8fCB7IHdpZHRoOiBcIjRweFwiIH0pLndpZHRoLCByID0gZC5hcHBlbmRDaGlsZChvLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLCByLnN0eWxlLmNzc1RleHQgPSBkLnN0eWxlLmNzc1RleHQgPSBzLCByLnN0eWxlLm1hcmdpblJpZ2h0ID0gci5zdHlsZS53aWR0aCA9IFwiMFwiLCBkLnN0eWxlLndpZHRoID0gXCIxcHhcIiwgdC5yZWxpYWJsZU1hcmdpblJpZ2h0ID0gIXBhcnNlRmxvYXQoKGUuZ2V0Q29tcHV0ZWRTdHlsZShyLCBudWxsKSB8fCB7fSkubWFyZ2luUmlnaHQpKSwgdHlwZW9mIGQuc3R5bGUuem9vbSAhPT0gaSAmJiAoZC5pbm5lckhUTUwgPSBcIlwiLCBkLnN0eWxlLmNzc1RleHQgPSBzICsgXCJ3aWR0aDoxcHg7cGFkZGluZzoxcHg7ZGlzcGxheTppbmxpbmU7em9vbToxXCIsIHQuaW5saW5lQmxvY2tOZWVkc0xheW91dCA9IDMgPT09IGQub2Zmc2V0V2lkdGgsIGQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIiwgZC5pbm5lckhUTUwgPSBcIjxkaXY+PC9kaXY+XCIsIGQuZmlyc3RDaGlsZC5zdHlsZS53aWR0aCA9IFwiNXB4XCIsIHQuc2hyaW5rV3JhcEJsb2NrcyA9IDMgIT09IGQub2Zmc2V0V2lkdGgsIHQuaW5saW5lQmxvY2tOZWVkc0xheW91dCAmJiAodS5zdHlsZS56b29tID0gMSkpLCB1LnJlbW92ZUNoaWxkKG4pLCBuID0gZCA9IGEgPSByID0gbnVsbCkgfSksIG4gPSBzID0gdSA9IGwgPSByID0gYSA9IG51bGwsIHQgfSAoKTsgdmFyIE8gPSAvKD86XFx7W1xcc1xcU10qXFx9fFxcW1tcXHNcXFNdKlxcXSkkLywgQiA9IC8oW0EtWl0pL2c7IGZ1bmN0aW9uIFAoZSwgbiwgciwgaSkgeyBpZiAoYi5hY2NlcHREYXRhKGUpKSB7IHZhciBvLCBhLCBzID0gYi5leHBhbmRvLCB1ID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiwgbCA9IGUubm9kZVR5cGUsIHAgPSBsID8gYi5jYWNoZSA6IGUsIGYgPSBsID8gZVtzXSA6IGVbc10gJiYgczsgaWYgKGYgJiYgcFtmXSAmJiAoaSB8fCBwW2ZdLmRhdGEpIHx8ICF1IHx8IHIgIT09IHQpIHJldHVybiBmIHx8IChsID8gZVtzXSA9IGYgPSBjLnBvcCgpIHx8IGIuZ3VpZCsrIDogZiA9IHMpLCBwW2ZdIHx8IChwW2ZdID0ge30sIGwgfHwgKHBbZl0udG9KU09OID0gYi5ub29wKSksIChcIm9iamVjdFwiID09IHR5cGVvZiBuIHx8IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgbikgJiYgKGkgPyBwW2ZdID0gYi5leHRlbmQocFtmXSwgbikgOiBwW2ZdLmRhdGEgPSBiLmV4dGVuZChwW2ZdLmRhdGEsIG4pKSwgbyA9IHBbZl0sIGkgfHwgKG8uZGF0YSB8fCAoby5kYXRhID0ge30pLCBvID0gby5kYXRhKSwgciAhPT0gdCAmJiAob1tiLmNhbWVsQ2FzZShuKV0gPSByKSwgdSA/IChhID0gb1tuXSwgbnVsbCA9PSBhICYmIChhID0gb1tiLmNhbWVsQ2FzZShuKV0pKSA6IGEgPSBvLCBhIH0gfSBmdW5jdGlvbiBSKGUsIHQsIG4pIHsgaWYgKGIuYWNjZXB0RGF0YShlKSkgeyB2YXIgciwgaSwgbywgYSA9IGUubm9kZVR5cGUsIHMgPSBhID8gYi5jYWNoZSA6IGUsIHUgPSBhID8gZVtiLmV4cGFuZG9dIDogYi5leHBhbmRvOyBpZiAoc1t1XSkgeyBpZiAodCAmJiAobyA9IG4gPyBzW3VdIDogc1t1XS5kYXRhKSkgeyBiLmlzQXJyYXkodCkgPyB0ID0gdC5jb25jYXQoYi5tYXAodCwgYi5jYW1lbENhc2UpKSA6IHQgaW4gbyA/IHQgPSBbdF0gOiAodCA9IGIuY2FtZWxDYXNlKHQpLCB0ID0gdCBpbiBvID8gW3RdIDogdC5zcGxpdChcIiBcIikpOyBmb3IgKHIgPSAwLCBpID0gdC5sZW5ndGg7IGkgPiByOyByKyspIGRlbGV0ZSBvW3Rbcl1dOyBpZiAoIShuID8gJCA6IGIuaXNFbXB0eU9iamVjdCkobykpIHJldHVybiB9IChuIHx8IChkZWxldGUgc1t1XS5kYXRhLCAkKHNbdV0pKSkgJiYgKGEgPyBiLmNsZWFuRGF0YShbZV0sICEwKSA6IGIuc3VwcG9ydC5kZWxldGVFeHBhbmRvIHx8IHMgIT0gcy53aW5kb3cgPyBkZWxldGUgc1t1XSA6IHNbdV0gPSBudWxsKSB9IH0gfSBiLmV4dGVuZCh7IGNhY2hlOiB7fSwgZXhwYW5kbzogXCJqUXVlcnlcIiArIChwICsgTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXFxEL2csIFwiXCIpLCBub0RhdGE6IHsgZW1iZWQ6ICEwLCBvYmplY3Q6IFwiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwXCIsIGFwcGxldDogITAgfSwgaGFzRGF0YTogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUgPSBlLm5vZGVUeXBlID8gYi5jYWNoZVtlW2IuZXhwYW5kb11dIDogZVtiLmV4cGFuZG9dLCAhIWUgJiYgISQoZSkgfSwgZGF0YTogZnVuY3Rpb24gKGUsIHQsIG4pIHsgcmV0dXJuIFAoZSwgdCwgbikgfSwgcmVtb3ZlRGF0YTogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIFIoZSwgdCkgfSwgX2RhdGE6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiBQKGUsIHQsIG4sICEwKSB9LCBfcmVtb3ZlRGF0YTogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIFIoZSwgdCwgITApIH0sIGFjY2VwdERhdGE6IGZ1bmN0aW9uIChlKSB7IGlmIChlLm5vZGVUeXBlICYmIDEgIT09IGUubm9kZVR5cGUgJiYgOSAhPT0gZS5ub2RlVHlwZSkgcmV0dXJuICExOyB2YXIgdCA9IGUubm9kZU5hbWUgJiYgYi5ub0RhdGFbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTsgcmV0dXJuICF0IHx8IHQgIT09ICEwICYmIGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NpZFwiKSA9PT0gdCB9IH0pLCBiLmZuLmV4dGVuZCh7IGRhdGE6IGZ1bmN0aW9uIChlLCBuKSB7IHZhciByLCBpLCBvID0gdGhpc1swXSwgYSA9IDAsIHMgPSBudWxsOyBpZiAoZSA9PT0gdCkgeyBpZiAodGhpcy5sZW5ndGggJiYgKHMgPSBiLmRhdGEobyksIDEgPT09IG8ubm9kZVR5cGUgJiYgIWIuX2RhdGEobywgXCJwYXJzZWRBdHRyc1wiKSkpIHsgZm9yIChyID0gby5hdHRyaWJ1dGVzOyByLmxlbmd0aCA+IGE7IGErKykgaSA9IHJbYV0ubmFtZSwgaS5pbmRleE9mKFwiZGF0YS1cIikgfHwgKGkgPSBiLmNhbWVsQ2FzZShpLnNsaWNlKDUpKSwgVyhvLCBpLCBzW2ldKSk7IGIuX2RhdGEobywgXCJwYXJzZWRBdHRyc1wiLCAhMCkgfSByZXR1cm4gcyB9IHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiBlID8gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsgYi5kYXRhKHRoaXMsIGUpIH0pIDogYi5hY2Nlc3ModGhpcywgZnVuY3Rpb24gKG4pIHsgcmV0dXJuIG4gPT09IHQgPyBvID8gVyhvLCBlLCBiLmRhdGEobywgZSkpIDogbnVsbCA6ICh0aGlzLmVhY2goZnVuY3Rpb24gKCkgeyBiLmRhdGEodGhpcywgZSwgbikgfSksIHQpIH0sIG51bGwsIG4sIGFyZ3VtZW50cy5sZW5ndGggPiAxLCBudWxsLCAhMCkgfSwgcmVtb3ZlRGF0YTogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IGIucmVtb3ZlRGF0YSh0aGlzLCBlKSB9KSB9IH0pOyBmdW5jdGlvbiBXKGUsIG4sIHIpIHsgaWYgKHIgPT09IHQgJiYgMSA9PT0gZS5ub2RlVHlwZSkgeyB2YXIgaSA9IFwiZGF0YS1cIiArIG4ucmVwbGFjZShCLCBcIi0kMVwiKS50b0xvd2VyQ2FzZSgpOyBpZiAociA9IGUuZ2V0QXR0cmlidXRlKGkpLCBcInN0cmluZ1wiID09IHR5cGVvZiByKSB7IHRyeSB7IHIgPSBcInRydWVcIiA9PT0gciA/ICEwIDogXCJmYWxzZVwiID09PSByID8gITEgOiBcIm51bGxcIiA9PT0gciA/IG51bGwgOiArciArIFwiXCIgPT09IHIgPyArciA6IE8udGVzdChyKSA/IGIucGFyc2VKU09OKHIpIDogciB9IGNhdGNoIChvKSB7IH0gYi5kYXRhKGUsIG4sIHIpIH0gZWxzZSByID0gdCB9IHJldHVybiByIH0gZnVuY3Rpb24gJChlKSB7IHZhciB0OyBmb3IgKHQgaW4gZSkgaWYgKChcImRhdGFcIiAhPT0gdCB8fCAhYi5pc0VtcHR5T2JqZWN0KGVbdF0pKSAmJiBcInRvSlNPTlwiICE9PSB0KSByZXR1cm4gITE7IHJldHVybiAhMCB9IGIuZXh0ZW5kKHsgcXVldWU6IGZ1bmN0aW9uIChlLCBuLCByKSB7IHZhciBpOyByZXR1cm4gZSA/IChuID0gKG4gfHwgXCJmeFwiKSArIFwicXVldWVcIiwgaSA9IGIuX2RhdGEoZSwgbiksIHIgJiYgKCFpIHx8IGIuaXNBcnJheShyKSA/IGkgPSBiLl9kYXRhKGUsIG4sIGIubWFrZUFycmF5KHIpKSA6IGkucHVzaChyKSksIGkgfHwgW10pIDogdCB9LCBkZXF1ZXVlOiBmdW5jdGlvbiAoZSwgdCkgeyB0ID0gdCB8fCBcImZ4XCI7IHZhciBuID0gYi5xdWV1ZShlLCB0KSwgciA9IG4ubGVuZ3RoLCBpID0gbi5zaGlmdCgpLCBvID0gYi5fcXVldWVIb29rcyhlLCB0KSwgYSA9IGZ1bmN0aW9uICgpIHsgYi5kZXF1ZXVlKGUsIHQpIH07IFwiaW5wcm9ncmVzc1wiID09PSBpICYmIChpID0gbi5zaGlmdCgpLCByLS0pLCBvLmN1ciA9IGksIGkgJiYgKFwiZnhcIiA9PT0gdCAmJiBuLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLCBkZWxldGUgby5zdG9wLCBpLmNhbGwoZSwgYSwgbykpLCAhciAmJiBvICYmIG8uZW1wdHkuZmlyZSgpIH0sIF9xdWV1ZUhvb2tzOiBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IHQgKyBcInF1ZXVlSG9va3NcIjsgcmV0dXJuIGIuX2RhdGEoZSwgbikgfHwgYi5fZGF0YShlLCBuLCB7IGVtcHR5OiBiLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbiAoKSB7IGIuX3JlbW92ZURhdGEoZSwgdCArIFwicXVldWVcIiksIGIuX3JlbW92ZURhdGEoZSwgbikgfSkgfSkgfSB9KSwgYi5mbi5leHRlbmQoeyBxdWV1ZTogZnVuY3Rpb24gKGUsIG4pIHsgdmFyIHIgPSAyOyByZXR1cm4gXCJzdHJpbmdcIiAhPSB0eXBlb2YgZSAmJiAobiA9IGUsIGUgPSBcImZ4XCIsIHItLSksIHIgPiBhcmd1bWVudHMubGVuZ3RoID8gYi5xdWV1ZSh0aGlzWzBdLCBlKSA6IG4gPT09IHQgPyB0aGlzIDogdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsgdmFyIHQgPSBiLnF1ZXVlKHRoaXMsIGUsIG4pOyBiLl9xdWV1ZUhvb2tzKHRoaXMsIGUpLCBcImZ4XCIgPT09IGUgJiYgXCJpbnByb2dyZXNzXCIgIT09IHRbMF0gJiYgYi5kZXF1ZXVlKHRoaXMsIGUpIH0pIH0sIGRlcXVldWU6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgeyBiLmRlcXVldWUodGhpcywgZSkgfSkgfSwgZGVsYXk6IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiBlID0gYi5meCA/IGIuZnguc3BlZWRzW2VdIHx8IGUgOiBlLCB0ID0gdCB8fCBcImZ4XCIsIHRoaXMucXVldWUodCwgZnVuY3Rpb24gKHQsIG4pIHsgdmFyIHIgPSBzZXRUaW1lb3V0KHQsIGUpOyBuLnN0b3AgPSBmdW5jdGlvbiAoKSB7IGNsZWFyVGltZW91dChyKSB9IH0pIH0sIGNsZWFyUXVldWU6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLnF1ZXVlKGUgfHwgXCJmeFwiLCBbXSkgfSwgcHJvbWlzZTogZnVuY3Rpb24gKGUsIG4pIHsgdmFyIHIsIGkgPSAxLCBvID0gYi5EZWZlcnJlZCgpLCBhID0gdGhpcywgcyA9IHRoaXMubGVuZ3RoLCB1ID0gZnVuY3Rpb24gKCkgeyAtLWkgfHwgby5yZXNvbHZlV2l0aChhLCBbYV0pIH07IFwic3RyaW5nXCIgIT0gdHlwZW9mIGUgJiYgKG4gPSBlLCBlID0gdCksIGUgPSBlIHx8IFwiZnhcIjsgd2hpbGUgKHMtLSkgciA9IGIuX2RhdGEoYVtzXSwgZSArIFwicXVldWVIb29rc1wiKSwgciAmJiByLmVtcHR5ICYmIChpKyssIHIuZW1wdHkuYWRkKHUpKTsgcmV0dXJuIHUoKSwgby5wcm9taXNlKG4pIH0gfSk7IHZhciBJLCB6LCBYID0gL1tcXHRcXHJcXG5dL2csIFUgPSAvXFxyL2csIFYgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvaSwgWSA9IC9eKD86YXxhcmVhKSQvaSwgSiA9IC9eKD86Y2hlY2tlZHxzZWxlY3RlZHxhdXRvZm9jdXN8YXV0b3BsYXl8YXN5bmN8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQpJC9pLCBHID0gL14oPzpjaGVja2VkfHNlbGVjdGVkKSQvaSwgUSA9IGIuc3VwcG9ydC5nZXRTZXRBdHRyaWJ1dGUsIEsgPSBiLnN1cHBvcnQuaW5wdXQ7IGIuZm4uZXh0ZW5kKHsgYXR0cjogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIGIuYWNjZXNzKHRoaXMsIGIuYXR0ciwgZSwgdCwgYXJndW1lbnRzLmxlbmd0aCA+IDEpIH0sIHJlbW92ZUF0dHI6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgeyBiLnJlbW92ZUF0dHIodGhpcywgZSkgfSkgfSwgcHJvcDogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIGIuYWNjZXNzKHRoaXMsIGIucHJvcCwgZSwgdCwgYXJndW1lbnRzLmxlbmd0aCA+IDEpIH0sIHJlbW92ZVByb3A6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlID0gYi5wcm9wRml4W2VdIHx8IGUsIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IHRyeSB7IHRoaXNbZV0gPSB0LCBkZWxldGUgdGhpc1tlXSB9IGNhdGNoIChuKSB7IH0gfSkgfSwgYWRkQ2xhc3M6IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuLCByLCBpLCBvLCBhID0gMCwgcyA9IHRoaXMubGVuZ3RoLCB1ID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiBlOyBpZiAoYi5pc0Z1bmN0aW9uKGUpKSByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh0KSB7IGIodGhpcykuYWRkQ2xhc3MoZS5jYWxsKHRoaXMsIHQsIHRoaXMuY2xhc3NOYW1lKSkgfSk7IGlmICh1KSBmb3IgKHQgPSAoZSB8fCBcIlwiKS5tYXRjaCh3KSB8fCBbXTsgcyA+IGE7IGErKykgaWYgKG4gPSB0aGlzW2FdLCByID0gMSA9PT0gbi5ub2RlVHlwZSAmJiAobi5jbGFzc05hbWUgPyAoXCIgXCIgKyBuLmNsYXNzTmFtZSArIFwiIFwiKS5yZXBsYWNlKFgsIFwiIFwiKSA6IFwiIFwiKSkgeyBvID0gMDsgd2hpbGUgKGkgPSB0W28rK10pIDAgPiByLmluZGV4T2YoXCIgXCIgKyBpICsgXCIgXCIpICYmIChyICs9IGkgKyBcIiBcIik7IG4uY2xhc3NOYW1lID0gYi50cmltKHIpIH0gcmV0dXJuIHRoaXMgfSwgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuLCByLCBpLCBvLCBhID0gMCwgcyA9IHRoaXMubGVuZ3RoLCB1ID0gMCA9PT0gYXJndW1lbnRzLmxlbmd0aCB8fCBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIGU7IGlmIChiLmlzRnVuY3Rpb24oZSkpIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHQpIHsgYih0aGlzKS5yZW1vdmVDbGFzcyhlLmNhbGwodGhpcywgdCwgdGhpcy5jbGFzc05hbWUpKSB9KTsgaWYgKHUpIGZvciAodCA9IChlIHx8IFwiXCIpLm1hdGNoKHcpIHx8IFtdOyBzID4gYTsgYSsrKSBpZiAobiA9IHRoaXNbYV0sIHIgPSAxID09PSBuLm5vZGVUeXBlICYmIChuLmNsYXNzTmFtZSA/IChcIiBcIiArIG4uY2xhc3NOYW1lICsgXCIgXCIpLnJlcGxhY2UoWCwgXCIgXCIpIDogXCJcIikpIHsgbyA9IDA7IHdoaWxlIChpID0gdFtvKytdKSB3aGlsZSAoci5pbmRleE9mKFwiIFwiICsgaSArIFwiIFwiKSA+PSAwKSByID0gci5yZXBsYWNlKFwiIFwiICsgaSArIFwiIFwiLCBcIiBcIik7IG4uY2xhc3NOYW1lID0gZSA/IGIudHJpbShyKSA6IFwiXCIgfSByZXR1cm4gdGhpcyB9LCB0b2dnbGVDbGFzczogZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4gPSB0eXBlb2YgZSwgciA9IFwiYm9vbGVhblwiID09IHR5cGVvZiB0OyByZXR1cm4gYi5pc0Z1bmN0aW9uKGUpID8gdGhpcy5lYWNoKGZ1bmN0aW9uIChuKSB7IGIodGhpcykudG9nZ2xlQ2xhc3MoZS5jYWxsKHRoaXMsIG4sIHRoaXMuY2xhc3NOYW1lLCB0KSwgdCkgfSkgOiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgeyBpZiAoXCJzdHJpbmdcIiA9PT0gbikgeyB2YXIgbywgYSA9IDAsIHMgPSBiKHRoaXMpLCB1ID0gdCwgbCA9IGUubWF0Y2godykgfHwgW107IHdoaWxlIChvID0gbFthKytdKSB1ID0gciA/IHUgOiAhcy5oYXNDbGFzcyhvKSwgc1t1ID8gXCJhZGRDbGFzc1wiIDogXCJyZW1vdmVDbGFzc1wiXShvKSB9IGVsc2UgKG4gPT09IGkgfHwgXCJib29sZWFuXCIgPT09IG4pICYmICh0aGlzLmNsYXNzTmFtZSAmJiBiLl9kYXRhKHRoaXMsIFwiX19jbGFzc05hbWVfX1wiLCB0aGlzLmNsYXNzTmFtZSksIHRoaXMuY2xhc3NOYW1lID0gdGhpcy5jbGFzc05hbWUgfHwgZSA9PT0gITEgPyBcIlwiIDogYi5fZGF0YSh0aGlzLCBcIl9fY2xhc3NOYW1lX19cIikgfHwgXCJcIikgfSkgfSwgaGFzQ2xhc3M6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gXCIgXCIgKyBlICsgXCIgXCIsIG4gPSAwLCByID0gdGhpcy5sZW5ndGg7IGZvciAoOyByID4gbjsgbisrKSBpZiAoMSA9PT0gdGhpc1tuXS5ub2RlVHlwZSAmJiAoXCIgXCIgKyB0aGlzW25dLmNsYXNzTmFtZSArIFwiIFwiKS5yZXBsYWNlKFgsIFwiIFwiKS5pbmRleE9mKHQpID49IDApIHJldHVybiAhMDsgcmV0dXJuICExIH0sIHZhbDogZnVuY3Rpb24gKGUpIHsgdmFyIG4sIHIsIGksIG8gPSB0aGlzWzBdOyB7IGlmIChhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gaSA9IGIuaXNGdW5jdGlvbihlKSwgdGhpcy5lYWNoKGZ1bmN0aW9uIChuKSB7IHZhciBvLCBhID0gYih0aGlzKTsgMSA9PT0gdGhpcy5ub2RlVHlwZSAmJiAobyA9IGkgPyBlLmNhbGwodGhpcywgbiwgYS52YWwoKSkgOiBlLCBudWxsID09IG8gPyBvID0gXCJcIiA6IFwibnVtYmVyXCIgPT0gdHlwZW9mIG8gPyBvICs9IFwiXCIgOiBiLmlzQXJyYXkobykgJiYgKG8gPSBiLm1hcChvLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gbnVsbCA9PSBlID8gXCJcIiA6IGUgKyBcIlwiIH0pKSwgciA9IGIudmFsSG9va3NbdGhpcy50eXBlXSB8fCBiLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sIHIgJiYgXCJzZXRcIiBpbiByICYmIHIuc2V0KHRoaXMsIG8sIFwidmFsdWVcIikgIT09IHQgfHwgKHRoaXMudmFsdWUgPSBvKSkgfSk7IGlmIChvKSByZXR1cm4gciA9IGIudmFsSG9va3Nbby50eXBlXSB8fCBiLnZhbEhvb2tzW28ubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sIHIgJiYgXCJnZXRcIiBpbiByICYmIChuID0gci5nZXQobywgXCJ2YWx1ZVwiKSkgIT09IHQgPyBuIDogKG4gPSBvLnZhbHVlLCBcInN0cmluZ1wiID09IHR5cGVvZiBuID8gbi5yZXBsYWNlKFUsIFwiXCIpIDogbnVsbCA9PSBuID8gXCJcIiA6IG4pIH0gfSB9KSwgYi5leHRlbmQoeyB2YWxIb29rczogeyBvcHRpb246IHsgZ2V0OiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGUuYXR0cmlidXRlcy52YWx1ZTsgcmV0dXJuICF0IHx8IHQuc3BlY2lmaWVkID8gZS52YWx1ZSA6IGUudGV4dCB9IH0sIHNlbGVjdDogeyBnZXQ6IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuLCByID0gZS5vcHRpb25zLCBpID0gZS5zZWxlY3RlZEluZGV4LCBvID0gXCJzZWxlY3Qtb25lXCIgPT09IGUudHlwZSB8fCAwID4gaSwgYSA9IG8gPyBudWxsIDogW10sIHMgPSBvID8gaSArIDEgOiByLmxlbmd0aCwgdSA9IDAgPiBpID8gcyA6IG8gPyBpIDogMDsgZm9yICg7IHMgPiB1OyB1KyspIGlmIChuID0gclt1XSwgISghbi5zZWxlY3RlZCAmJiB1ICE9PSBpIHx8IChiLnN1cHBvcnQub3B0RGlzYWJsZWQgPyBuLmRpc2FibGVkIDogbnVsbCAhPT0gbi5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSkgfHwgbi5wYXJlbnROb2RlLmRpc2FibGVkICYmIGIubm9kZU5hbWUobi5wYXJlbnROb2RlLCBcIm9wdGdyb3VwXCIpKSkgeyBpZiAodCA9IGIobikudmFsKCksIG8pIHJldHVybiB0OyBhLnB1c2godCkgfSByZXR1cm4gYSB9LCBzZXQ6IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gYi5tYWtlQXJyYXkodCk7IHJldHVybiBiKGUpLmZpbmQoXCJvcHRpb25cIikuZWFjaChmdW5jdGlvbiAoKSB7IHRoaXMuc2VsZWN0ZWQgPSBiLmluQXJyYXkoYih0aGlzKS52YWwoKSwgbikgPj0gMCB9KSwgbi5sZW5ndGggfHwgKGUuc2VsZWN0ZWRJbmRleCA9IC0xKSwgbiB9IH0gfSwgYXR0cjogZnVuY3Rpb24gKGUsIG4sIHIpIHsgdmFyIG8sIGEsIHMsIHUgPSBlLm5vZGVUeXBlOyBpZiAoZSAmJiAzICE9PSB1ICYmIDggIT09IHUgJiYgMiAhPT0gdSkgcmV0dXJuIHR5cGVvZiBlLmdldEF0dHJpYnV0ZSA9PT0gaSA/IGIucHJvcChlLCBuLCByKSA6IChhID0gMSAhPT0gdSB8fCAhYi5pc1hNTERvYyhlKSwgYSAmJiAobiA9IG4udG9Mb3dlckNhc2UoKSwgbyA9IGIuYXR0ckhvb2tzW25dIHx8IChKLnRlc3QobikgPyB6IDogSSkpLCByID09PSB0ID8gbyAmJiBhICYmIFwiZ2V0XCIgaW4gbyAmJiBudWxsICE9PSAocyA9IG8uZ2V0KGUsIG4pKSA/IHMgOiAodHlwZW9mIGUuZ2V0QXR0cmlidXRlICE9PSBpICYmIChzID0gZS5nZXRBdHRyaWJ1dGUobikpLCBudWxsID09IHMgPyB0IDogcykgOiBudWxsICE9PSByID8gbyAmJiBhICYmIFwic2V0XCIgaW4gbyAmJiAocyA9IG8uc2V0KGUsIHIsIG4pKSAhPT0gdCA/IHMgOiAoZS5zZXRBdHRyaWJ1dGUobiwgciArIFwiXCIpLCByKSA6IChiLnJlbW92ZUF0dHIoZSwgbiksIHQpKSB9LCByZW1vdmVBdHRyOiBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiwgciwgaSA9IDAsIG8gPSB0ICYmIHQubWF0Y2godyk7IGlmIChvICYmIDEgPT09IGUubm9kZVR5cGUpIHdoaWxlIChuID0gb1tpKytdKSByID0gYi5wcm9wRml4W25dIHx8IG4sIEoudGVzdChuKSA/ICFRICYmIEcudGVzdChuKSA/IGVbYi5jYW1lbENhc2UoXCJkZWZhdWx0LVwiICsgbildID0gZVtyXSA9ICExIDogZVtyXSA9ICExIDogYi5hdHRyKGUsIG4sIFwiXCIpLCBlLnJlbW92ZUF0dHJpYnV0ZShRID8gbiA6IHIpIH0sIGF0dHJIb29rczogeyB0eXBlOiB7IHNldDogZnVuY3Rpb24gKGUsIHQpIHsgaWYgKCFiLnN1cHBvcnQucmFkaW9WYWx1ZSAmJiBcInJhZGlvXCIgPT09IHQgJiYgYi5ub2RlTmFtZShlLCBcImlucHV0XCIpKSB7IHZhciBuID0gZS52YWx1ZTsgcmV0dXJuIGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLCB0KSwgbiAmJiAoZS52YWx1ZSA9IG4pLCB0IH0gfSB9IH0sIHByb3BGaXg6IHsgdGFiaW5kZXg6IFwidGFiSW5kZXhcIiwgcmVhZG9ubHk6IFwicmVhZE9ubHlcIiwgXCJmb3JcIjogXCJodG1sRm9yXCIsIFwiY2xhc3NcIjogXCJjbGFzc05hbWVcIiwgbWF4bGVuZ3RoOiBcIm1heExlbmd0aFwiLCBjZWxsc3BhY2luZzogXCJjZWxsU3BhY2luZ1wiLCBjZWxscGFkZGluZzogXCJjZWxsUGFkZGluZ1wiLCByb3dzcGFuOiBcInJvd1NwYW5cIiwgY29sc3BhbjogXCJjb2xTcGFuXCIsIHVzZW1hcDogXCJ1c2VNYXBcIiwgZnJhbWVib3JkZXI6IFwiZnJhbWVCb3JkZXJcIiwgY29udGVudGVkaXRhYmxlOiBcImNvbnRlbnRFZGl0YWJsZVwiIH0sIHByb3A6IGZ1bmN0aW9uIChlLCBuLCByKSB7IHZhciBpLCBvLCBhLCBzID0gZS5ub2RlVHlwZTsgaWYgKGUgJiYgMyAhPT0gcyAmJiA4ICE9PSBzICYmIDIgIT09IHMpIHJldHVybiBhID0gMSAhPT0gcyB8fCAhYi5pc1hNTERvYyhlKSwgYSAmJiAobiA9IGIucHJvcEZpeFtuXSB8fCBuLCBvID0gYi5wcm9wSG9va3Nbbl0pLCByICE9PSB0ID8gbyAmJiBcInNldFwiIGluIG8gJiYgKGkgPSBvLnNldChlLCByLCBuKSkgIT09IHQgPyBpIDogZVtuXSA9IHIgOiBvICYmIFwiZ2V0XCIgaW4gbyAmJiBudWxsICE9PSAoaSA9IG8uZ2V0KGUsIG4pKSA/IGkgOiBlW25dIH0sIHByb3BIb29rczogeyB0YWJJbmRleDogeyBnZXQ6IGZ1bmN0aW9uIChlKSB7IHZhciBuID0gZS5nZXRBdHRyaWJ1dGVOb2RlKFwidGFiaW5kZXhcIik7IHJldHVybiBuICYmIG4uc3BlY2lmaWVkID8gcGFyc2VJbnQobi52YWx1ZSwgMTApIDogVi50ZXN0KGUubm9kZU5hbWUpIHx8IFkudGVzdChlLm5vZGVOYW1lKSAmJiBlLmhyZWYgPyAwIDogdCB9IH19IH0pLCB6ID0geyBnZXQ6IGZ1bmN0aW9uIChlLCBuKSB7IHZhciByID0gYi5wcm9wKGUsIG4pLCBpID0gXCJib29sZWFuXCIgPT0gdHlwZW9mIHIgJiYgZS5nZXRBdHRyaWJ1dGUobiksIG8gPSBcImJvb2xlYW5cIiA9PSB0eXBlb2YgciA/IEsgJiYgUSA/IG51bGwgIT0gaSA6IEcudGVzdChuKSA/IGVbYi5jYW1lbENhc2UoXCJkZWZhdWx0LVwiICsgbildIDogISFpIDogZS5nZXRBdHRyaWJ1dGVOb2RlKG4pOyByZXR1cm4gbyAmJiBvLnZhbHVlICE9PSAhMSA/IG4udG9Mb3dlckNhc2UoKSA6IHQgfSwgc2V0OiBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gdCA9PT0gITEgPyBiLnJlbW92ZUF0dHIoZSwgbikgOiBLICYmIFEgfHwgIUcudGVzdChuKSA/IGUuc2V0QXR0cmlidXRlKCFRICYmIGIucHJvcEZpeFtuXSB8fCBuLCBuKSA6IGVbYi5jYW1lbENhc2UoXCJkZWZhdWx0LVwiICsgbildID0gZVtuXSA9ICEwLCBuIH0gfSwgSyAmJiBRIHx8IChiLmF0dHJIb29rcy52YWx1ZSA9IHsgZ2V0OiBmdW5jdGlvbiAoZSwgbikgeyB2YXIgciA9IGUuZ2V0QXR0cmlidXRlTm9kZShuKTsgcmV0dXJuIGIubm9kZU5hbWUoZSwgXCJpbnB1dFwiKSA/IGUuZGVmYXVsdFZhbHVlIDogciAmJiByLnNwZWNpZmllZCA/IHIudmFsdWUgOiB0IH0sIHNldDogZnVuY3Rpb24gKGUsIG4sIHIpIHsgcmV0dXJuIGIubm9kZU5hbWUoZSwgXCJpbnB1dFwiKSA/IChlLmRlZmF1bHRWYWx1ZSA9IG4sIHQpIDogSSAmJiBJLnNldChlLCBuLCByKSB9IH0pLCBRIHx8IChJID0gYi52YWxIb29rcy5idXR0b24gPSB7IGdldDogZnVuY3Rpb24gKGUsIG4pIHsgdmFyIHIgPSBlLmdldEF0dHJpYnV0ZU5vZGUobik7IHJldHVybiByICYmIChcImlkXCIgPT09IG4gfHwgXCJuYW1lXCIgPT09IG4gfHwgXCJjb29yZHNcIiA9PT0gbiA/IFwiXCIgIT09IHIudmFsdWUgOiByLnNwZWNpZmllZCkgPyByLnZhbHVlIDogdCB9LCBzZXQ6IGZ1bmN0aW9uIChlLCBuLCByKSB7IHZhciBpID0gZS5nZXRBdHRyaWJ1dGVOb2RlKHIpOyByZXR1cm4gaSB8fCBlLnNldEF0dHJpYnV0ZU5vZGUoaSA9IGUub3duZXJEb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUocikpLCBpLnZhbHVlID0gbiArPSBcIlwiLCBcInZhbHVlXCIgPT09IHIgfHwgbiA9PT0gZS5nZXRBdHRyaWJ1dGUocikgPyBuIDogdCB9IH0sIGIuYXR0ckhvb2tzLmNvbnRlbnRlZGl0YWJsZSA9IHsgZ2V0OiBJLmdldCwgc2V0OiBmdW5jdGlvbiAoZSwgdCwgbikgeyBJLnNldChlLCBcIlwiID09PSB0ID8gITEgOiB0LCBuKSB9IH0sIGIuZWFjaChbXCJ3aWR0aFwiLCBcImhlaWdodFwiXSwgZnVuY3Rpb24gKGUsIG4pIHsgYi5hdHRySG9va3Nbbl0gPSBiLmV4dGVuZChiLmF0dHJIb29rc1tuXSwgeyBzZXQ6IGZ1bmN0aW9uIChlLCByKSB7IHJldHVybiBcIlwiID09PSByID8gKGUuc2V0QXR0cmlidXRlKG4sIFwiYXV0b1wiKSwgcikgOiB0IH0gfSkgfSkpLCBiLnN1cHBvcnQuaHJlZk5vcm1hbGl6ZWQgfHwgKGIuZWFjaChbXCJocmVmXCIsIFwic3JjXCIsIFwid2lkdGhcIiwgXCJoZWlnaHRcIl0sIGZ1bmN0aW9uIChlLCBuKSB7IGIuYXR0ckhvb2tzW25dID0gYi5leHRlbmQoYi5hdHRySG9va3Nbbl0sIHsgZ2V0OiBmdW5jdGlvbiAoZSkgeyB2YXIgciA9IGUuZ2V0QXR0cmlidXRlKG4sIDIpOyByZXR1cm4gbnVsbCA9PSByID8gdCA6IHIgfSB9KSB9KSwgYi5lYWNoKFtcImhyZWZcIiwgXCJzcmNcIl0sIGZ1bmN0aW9uIChlLCB0KSB7IGIucHJvcEhvb2tzW3RdID0geyBnZXQ6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLmdldEF0dHJpYnV0ZSh0LCA0KSB9IH0gfSkpLCBiLnN1cHBvcnQuc3R5bGUgfHwgKGIuYXR0ckhvb2tzLnN0eWxlID0geyBnZXQ6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLnN0eWxlLmNzc1RleHQgfHwgdCB9LCBzZXQ6IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiBlLnN0eWxlLmNzc1RleHQgPSB0ICsgXCJcIiB9IH0pLCBiLnN1cHBvcnQub3B0U2VsZWN0ZWQgfHwgKGIucHJvcEhvb2tzLnNlbGVjdGVkID0gYi5leHRlbmQoYi5wcm9wSG9va3Muc2VsZWN0ZWQsIHsgZ2V0OiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGUucGFyZW50Tm9kZTsgcmV0dXJuIHQgJiYgKHQuc2VsZWN0ZWRJbmRleCwgdC5wYXJlbnROb2RlICYmIHQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4KSwgbnVsbCB9IH0pKSwgYi5zdXBwb3J0LmVuY3R5cGUgfHwgKGIucHJvcEZpeC5lbmN0eXBlID0gXCJlbmNvZGluZ1wiKSwgYi5zdXBwb3J0LmNoZWNrT24gfHwgYi5lYWNoKFtcInJhZGlvXCIsIFwiY2hlY2tib3hcIl0sIGZ1bmN0aW9uICgpIHsgYi52YWxIb29rc1t0aGlzXSA9IHsgZ2V0OiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gbnVsbCA9PT0gZS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSA/IFwib25cIiA6IGUudmFsdWUgfSB9IH0pLCBiLmVhY2goW1wicmFkaW9cIiwgXCJjaGVja2JveFwiXSwgZnVuY3Rpb24gKCkgeyBiLnZhbEhvb2tzW3RoaXNdID0gYi5leHRlbmQoYi52YWxIb29rc1t0aGlzXSwgeyBzZXQ6IGZ1bmN0aW9uIChlLCBuKSB7IHJldHVybiBiLmlzQXJyYXkobikgPyBlLmNoZWNrZWQgPSBiLmluQXJyYXkoYihlKS52YWwoKSwgbikgPj0gMCA6IHQgfSB9KSB9KTsgdmFyIFogPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksIGV0ID0gL15rZXkvLCB0dCA9IC9eKD86bW91c2V8Y29udGV4dG1lbnUpfGNsaWNrLywgbnQgPSAvXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sIHJ0ID0gL14oW14uXSopKD86XFwuKC4rKXwpJC87IGZ1bmN0aW9uIGl0KCkgeyByZXR1cm4gITAgfSBmdW5jdGlvbiBvdCgpIHsgcmV0dXJuICExIH0gYi5ldmVudCA9IHsgZ2xvYmFsOiB7fSwgYWRkOiBmdW5jdGlvbiAoZSwgbiwgciwgbywgYSkgeyB2YXIgcywgdSwgbCwgYywgcCwgZiwgZCwgaCwgZywgbSwgeSwgdiA9IGIuX2RhdGEoZSk7IGlmICh2KSB7IHIuaGFuZGxlciAmJiAoYyA9IHIsIHIgPSBjLmhhbmRsZXIsIGEgPSBjLnNlbGVjdG9yKSwgci5ndWlkIHx8IChyLmd1aWQgPSBiLmd1aWQrKyksICh1ID0gdi5ldmVudHMpIHx8ICh1ID0gdi5ldmVudHMgPSB7fSksIChmID0gdi5oYW5kbGUpIHx8IChmID0gdi5oYW5kbGUgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdHlwZW9mIGIgPT09IGkgfHwgZSAmJiBiLmV2ZW50LnRyaWdnZXJlZCA9PT0gZS50eXBlID8gdCA6IGIuZXZlbnQuZGlzcGF0Y2guYXBwbHkoZi5lbGVtLCBhcmd1bWVudHMpIH0sIGYuZWxlbSA9IGUpLCBuID0gKG4gfHwgXCJcIikubWF0Y2godykgfHwgW1wiXCJdLCBsID0gbi5sZW5ndGg7IHdoaWxlIChsLS0pIHMgPSBydC5leGVjKG5bbF0pIHx8IFtdLCBnID0geSA9IHNbMV0sIG0gPSAoc1syXSB8fCBcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLCBwID0gYi5ldmVudC5zcGVjaWFsW2ddIHx8IHt9LCBnID0gKGEgPyBwLmRlbGVnYXRlVHlwZSA6IHAuYmluZFR5cGUpIHx8IGcsIHAgPSBiLmV2ZW50LnNwZWNpYWxbZ10gfHwge30sIGQgPSBiLmV4dGVuZCh7IHR5cGU6IGcsIG9yaWdUeXBlOiB5LCBkYXRhOiBvLCBoYW5kbGVyOiByLCBndWlkOiByLmd1aWQsIHNlbGVjdG9yOiBhLCBuZWVkc0NvbnRleHQ6IGEgJiYgYi5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGEpLCBuYW1lc3BhY2U6IG0uam9pbihcIi5cIikgfSwgYyksIChoID0gdVtnXSkgfHwgKGggPSB1W2ddID0gW10sIGguZGVsZWdhdGVDb3VudCA9IDAsIHAuc2V0dXAgJiYgcC5zZXR1cC5jYWxsKGUsIG8sIG0sIGYpICE9PSAhMSB8fCAoZS5hZGRFdmVudExpc3RlbmVyID8gZS5hZGRFdmVudExpc3RlbmVyKGcsIGYsICExKSA6IGUuYXR0YWNoRXZlbnQgJiYgZS5hdHRhY2hFdmVudChcIm9uXCIgKyBnLCBmKSkpLCBwLmFkZCAmJiAocC5hZGQuY2FsbChlLCBkKSwgZC5oYW5kbGVyLmd1aWQgfHwgKGQuaGFuZGxlci5ndWlkID0gci5ndWlkKSksIGEgPyBoLnNwbGljZShoLmRlbGVnYXRlQ291bnQrKywgMCwgZCkgOiBoLnB1c2goZCksIGIuZXZlbnQuZ2xvYmFsW2ddID0gITA7IGUgPSBudWxsIH0gfSwgcmVtb3ZlOiBmdW5jdGlvbiAoZSwgdCwgbiwgciwgaSkgeyB2YXIgbywgYSwgcywgdSwgbCwgYywgcCwgZiwgZCwgaCwgZywgbSA9IGIuaGFzRGF0YShlKSAmJiBiLl9kYXRhKGUpOyBpZiAobSAmJiAoYyA9IG0uZXZlbnRzKSkgeyB0ID0gKHQgfHwgXCJcIikubWF0Y2godykgfHwgW1wiXCJdLCBsID0gdC5sZW5ndGg7IHdoaWxlIChsLS0pIGlmIChzID0gcnQuZXhlYyh0W2xdKSB8fCBbXSwgZCA9IGcgPSBzWzFdLCBoID0gKHNbMl0gfHwgXCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSwgZCkgeyBwID0gYi5ldmVudC5zcGVjaWFsW2RdIHx8IHt9LCBkID0gKHIgPyBwLmRlbGVnYXRlVHlwZSA6IHAuYmluZFR5cGUpIHx8IGQsIGYgPSBjW2RdIHx8IFtdLCBzID0gc1syXSAmJiBSZWdFeHAoXCIoXnxcXFxcLilcIiArIGguam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpICsgXCIoXFxcXC58JClcIiksIHUgPSBvID0gZi5sZW5ndGg7IHdoaWxlIChvLS0pIGEgPSBmW29dLCAhaSAmJiBnICE9PSBhLm9yaWdUeXBlIHx8IG4gJiYgbi5ndWlkICE9PSBhLmd1aWQgfHwgcyAmJiAhcy50ZXN0KGEubmFtZXNwYWNlKSB8fCByICYmIHIgIT09IGEuc2VsZWN0b3IgJiYgKFwiKipcIiAhPT0gciB8fCAhYS5zZWxlY3RvcikgfHwgKGYuc3BsaWNlKG8sIDEpLCBhLnNlbGVjdG9yICYmIGYuZGVsZWdhdGVDb3VudC0tLCBwLnJlbW92ZSAmJiBwLnJlbW92ZS5jYWxsKGUsIGEpKTsgdSAmJiAhZi5sZW5ndGggJiYgKHAudGVhcmRvd24gJiYgcC50ZWFyZG93bi5jYWxsKGUsIGgsIG0uaGFuZGxlKSAhPT0gITEgfHwgYi5yZW1vdmVFdmVudChlLCBkLCBtLmhhbmRsZSksIGRlbGV0ZSBjW2RdKSB9IGVsc2UgZm9yIChkIGluIGMpIGIuZXZlbnQucmVtb3ZlKGUsIGQgKyB0W2xdLCBuLCByLCAhMCk7IGIuaXNFbXB0eU9iamVjdChjKSAmJiAoZGVsZXRlIG0uaGFuZGxlLCBiLl9yZW1vdmVEYXRhKGUsIFwiZXZlbnRzXCIpKSB9IH0sIHRyaWdnZXI6IGZ1bmN0aW9uIChuLCByLCBpLCBhKSB7IHZhciBzLCB1LCBsLCBjLCBwLCBmLCBkLCBoID0gW2kgfHwgb10sIGcgPSB5LmNhbGwobiwgXCJ0eXBlXCIpID8gbi50eXBlIDogbiwgbSA9IHkuY2FsbChuLCBcIm5hbWVzcGFjZVwiKSA/IG4ubmFtZXNwYWNlLnNwbGl0KFwiLlwiKSA6IFtdOyBpZiAobCA9IGYgPSBpID0gaSB8fCBvLCAzICE9PSBpLm5vZGVUeXBlICYmIDggIT09IGkubm9kZVR5cGUgJiYgIW50LnRlc3QoZyArIGIuZXZlbnQudHJpZ2dlcmVkKSAmJiAoZy5pbmRleE9mKFwiLlwiKSA+PSAwICYmIChtID0gZy5zcGxpdChcIi5cIiksIGcgPSBtLnNoaWZ0KCksIG0uc29ydCgpKSwgdSA9IDAgPiBnLmluZGV4T2YoXCI6XCIpICYmIFwib25cIiArIGcsIG4gPSBuW2IuZXhwYW5kb10gPyBuIDogbmV3IGIuRXZlbnQoZywgXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiBuKSwgbi5pc1RyaWdnZXIgPSAhMCwgbi5uYW1lc3BhY2UgPSBtLmpvaW4oXCIuXCIpLCBuLm5hbWVzcGFjZV9yZSA9IG4ubmFtZXNwYWNlID8gUmVnRXhwKFwiKF58XFxcXC4pXCIgKyBtLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKSArIFwiKFxcXFwufCQpXCIpIDogbnVsbCwgbi5yZXN1bHQgPSB0LCBuLnRhcmdldCB8fCAobi50YXJnZXQgPSBpKSwgciA9IG51bGwgPT0gciA/IFtuXSA6IGIubWFrZUFycmF5KHIsIFtuXSksIHAgPSBiLmV2ZW50LnNwZWNpYWxbZ10gfHwge30sIGEgfHwgIXAudHJpZ2dlciB8fCBwLnRyaWdnZXIuYXBwbHkoaSwgcikgIT09ICExKSkgeyBpZiAoIWEgJiYgIXAubm9CdWJibGUgJiYgIWIuaXNXaW5kb3coaSkpIHsgZm9yIChjID0gcC5kZWxlZ2F0ZVR5cGUgfHwgZywgbnQudGVzdChjICsgZykgfHwgKGwgPSBsLnBhcmVudE5vZGUpOyBsOyBsID0gbC5wYXJlbnROb2RlKSBoLnB1c2gobCksIGYgPSBsOyBmID09PSAoaS5vd25lckRvY3VtZW50IHx8IG8pICYmIGgucHVzaChmLmRlZmF1bHRWaWV3IHx8IGYucGFyZW50V2luZG93IHx8IGUpIH0gZCA9IDA7IHdoaWxlICgobCA9IGhbZCsrXSkgJiYgIW4uaXNQcm9wYWdhdGlvblN0b3BwZWQoKSkgbi50eXBlID0gZCA+IDEgPyBjIDogcC5iaW5kVHlwZSB8fCBnLCBzID0gKGIuX2RhdGEobCwgXCJldmVudHNcIikgfHwge30pW24udHlwZV0gJiYgYi5fZGF0YShsLCBcImhhbmRsZVwiKSwgcyAmJiBzLmFwcGx5KGwsIHIpLCBzID0gdSAmJiBsW3VdLCBzICYmIGIuYWNjZXB0RGF0YShsKSAmJiBzLmFwcGx5ICYmIHMuYXBwbHkobCwgcikgPT09ICExICYmIG4ucHJldmVudERlZmF1bHQoKTsgaWYgKG4udHlwZSA9IGcsICEoYSB8fCBuLmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8IHAuX2RlZmF1bHQgJiYgcC5fZGVmYXVsdC5hcHBseShpLm93bmVyRG9jdW1lbnQsIHIpICE9PSAhMSB8fCBcImNsaWNrXCIgPT09IGcgJiYgYi5ub2RlTmFtZShpLCBcImFcIikgfHwgIWIuYWNjZXB0RGF0YShpKSB8fCAhdSB8fCAhaVtnXSB8fCBiLmlzV2luZG93KGkpKSkgeyBmID0gaVt1XSwgZiAmJiAoaVt1XSA9IG51bGwpLCBiLmV2ZW50LnRyaWdnZXJlZCA9IGc7IHRyeSB7IGlbZ10oKSB9IGNhdGNoICh2KSB7IH0gYi5ldmVudC50cmlnZ2VyZWQgPSB0LCBmICYmIChpW3VdID0gZikgfSByZXR1cm4gbi5yZXN1bHQgfSB9LCBkaXNwYXRjaDogZnVuY3Rpb24gKGUpIHsgZSA9IGIuZXZlbnQuZml4KGUpOyB2YXIgbiwgciwgaSwgbywgYSwgcyA9IFtdLCB1ID0gaC5jYWxsKGFyZ3VtZW50cyksIGwgPSAoYi5fZGF0YSh0aGlzLCBcImV2ZW50c1wiKSB8fCB7fSlbZS50eXBlXSB8fCBbXSwgYyA9IGIuZXZlbnQuc3BlY2lhbFtlLnR5cGVdIHx8IHt9OyBpZiAodVswXSA9IGUsIGUuZGVsZWdhdGVUYXJnZXQgPSB0aGlzLCAhYy5wcmVEaXNwYXRjaCB8fCBjLnByZURpc3BhdGNoLmNhbGwodGhpcywgZSkgIT09ICExKSB7IHMgPSBiLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcywgZSwgbCksIG4gPSAwOyB3aGlsZSAoKG8gPSBzW24rK10pICYmICFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpIHsgZS5jdXJyZW50VGFyZ2V0ID0gby5lbGVtLCBhID0gMDsgd2hpbGUgKChpID0gby5oYW5kbGVyc1thKytdKSAmJiAhZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSAoIWUubmFtZXNwYWNlX3JlIHx8IGUubmFtZXNwYWNlX3JlLnRlc3QoaS5uYW1lc3BhY2UpKSAmJiAoZS5oYW5kbGVPYmogPSBpLCBlLmRhdGEgPSBpLmRhdGEsIHIgPSAoKGIuZXZlbnQuc3BlY2lhbFtpLm9yaWdUeXBlXSB8fCB7fSkuaGFuZGxlIHx8IGkuaGFuZGxlcikuYXBwbHkoby5lbGVtLCB1KSwgciAhPT0gdCAmJiAoZS5yZXN1bHQgPSByKSA9PT0gITEgJiYgKGUucHJldmVudERlZmF1bHQoKSwgZS5zdG9wUHJvcGFnYXRpb24oKSkpIH0gcmV0dXJuIGMucG9zdERpc3BhdGNoICYmIGMucG9zdERpc3BhdGNoLmNhbGwodGhpcywgZSksIGUucmVzdWx0IH0gfSwgaGFuZGxlcnM6IGZ1bmN0aW9uIChlLCBuKSB7IHZhciByLCBpLCBvLCBhLCBzID0gW10sIHUgPSBuLmRlbGVnYXRlQ291bnQsIGwgPSBlLnRhcmdldDsgaWYgKHUgJiYgbC5ub2RlVHlwZSAmJiAoIWUuYnV0dG9uIHx8IFwiY2xpY2tcIiAhPT0gZS50eXBlKSkgZm9yICg7IGwgIT0gdGhpczsgbCA9IGwucGFyZW50Tm9kZSB8fCB0aGlzKSBpZiAoMSA9PT0gbC5ub2RlVHlwZSAmJiAobC5kaXNhYmxlZCAhPT0gITAgfHwgXCJjbGlja1wiICE9PSBlLnR5cGUpKSB7IGZvciAobyA9IFtdLCBhID0gMDsgdSA+IGE7IGErKykgaSA9IG5bYV0sIHIgPSBpLnNlbGVjdG9yICsgXCIgXCIsIG9bcl0gPT09IHQgJiYgKG9bcl0gPSBpLm5lZWRzQ29udGV4dCA/IGIociwgdGhpcykuaW5kZXgobCkgPj0gMCA6IGIuZmluZChyLCB0aGlzLCBudWxsLCBbbF0pLmxlbmd0aCksIG9bcl0gJiYgby5wdXNoKGkpOyBvLmxlbmd0aCAmJiBzLnB1c2goeyBlbGVtOiBsLCBoYW5kbGVyczogbyB9KSB9IHJldHVybiBuLmxlbmd0aCA+IHUgJiYgcy5wdXNoKHsgZWxlbTogdGhpcywgaGFuZGxlcnM6IG4uc2xpY2UodSkgfSksIHMgfSwgZml4OiBmdW5jdGlvbiAoZSkgeyBpZiAoZVtiLmV4cGFuZG9dKSByZXR1cm4gZTsgdmFyIHQsIG4sIHIsIGkgPSBlLnR5cGUsIGEgPSBlLCBzID0gdGhpcy5maXhIb29rc1tpXTsgcyB8fCAodGhpcy5maXhIb29rc1tpXSA9IHMgPSB0dC50ZXN0KGkpID8gdGhpcy5tb3VzZUhvb2tzIDogZXQudGVzdChpKSA/IHRoaXMua2V5SG9va3MgOiB7fSksIHIgPSBzLnByb3BzID8gdGhpcy5wcm9wcy5jb25jYXQocy5wcm9wcykgOiB0aGlzLnByb3BzLCBlID0gbmV3IGIuRXZlbnQoYSksIHQgPSByLmxlbmd0aDsgd2hpbGUgKHQtLSkgbiA9IHJbdF0sIGVbbl0gPSBhW25dOyByZXR1cm4gZS50YXJnZXQgfHwgKGUudGFyZ2V0ID0gYS5zcmNFbGVtZW50IHx8IG8pLCAzID09PSBlLnRhcmdldC5ub2RlVHlwZSAmJiAoZS50YXJnZXQgPSBlLnRhcmdldC5wYXJlbnROb2RlKSwgZS5tZXRhS2V5ID0gISFlLm1ldGFLZXksIHMuZmlsdGVyID8gcy5maWx0ZXIoZSwgYSkgOiBlIH0sIHByb3BzOiBcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSwgZml4SG9va3M6IHt9LCBrZXlIb29rczogeyBwcm9wczogXCJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlXCIuc3BsaXQoXCIgXCIpLCBmaWx0ZXI6IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiBudWxsID09IGUud2hpY2ggJiYgKGUud2hpY2ggPSBudWxsICE9IHQuY2hhckNvZGUgPyB0LmNoYXJDb2RlIDogdC5rZXlDb2RlKSwgZSB9IH0sIG1vdXNlSG9va3M6IHsgcHJvcHM6IFwiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIGZyb21FbGVtZW50IG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50XCIuc3BsaXQoXCIgXCIpLCBmaWx0ZXI6IGZ1bmN0aW9uIChlLCBuKSB7IHZhciByLCBpLCBhLCBzID0gbi5idXR0b24sIHUgPSBuLmZyb21FbGVtZW50OyByZXR1cm4gbnVsbCA9PSBlLnBhZ2VYICYmIG51bGwgIT0gbi5jbGllbnRYICYmIChpID0gZS50YXJnZXQub3duZXJEb2N1bWVudCB8fCBvLCBhID0gaS5kb2N1bWVudEVsZW1lbnQsIHIgPSBpLmJvZHksIGUucGFnZVggPSBuLmNsaWVudFggKyAoYSAmJiBhLnNjcm9sbExlZnQgfHwgciAmJiByLnNjcm9sbExlZnQgfHwgMCkgLSAoYSAmJiBhLmNsaWVudExlZnQgfHwgciAmJiByLmNsaWVudExlZnQgfHwgMCksIGUucGFnZVkgPSBuLmNsaWVudFkgKyAoYSAmJiBhLnNjcm9sbFRvcCB8fCByICYmIHIuc2Nyb2xsVG9wIHx8IDApIC0gKGEgJiYgYS5jbGllbnRUb3AgfHwgciAmJiByLmNsaWVudFRvcCB8fCAwKSksICFlLnJlbGF0ZWRUYXJnZXQgJiYgdSAmJiAoZS5yZWxhdGVkVGFyZ2V0ID0gdSA9PT0gZS50YXJnZXQgPyBuLnRvRWxlbWVudCA6IHUpLCBlLndoaWNoIHx8IHMgPT09IHQgfHwgKGUud2hpY2ggPSAxICYgcyA/IDEgOiAyICYgcyA/IDMgOiA0ICYgcyA/IDIgOiAwKSwgZSB9IH0sIHNwZWNpYWw6IHsgbG9hZDogeyBub0J1YmJsZTogITAgfSwgY2xpY2s6IHsgdHJpZ2dlcjogZnVuY3Rpb24gKCkgeyByZXR1cm4gYi5ub2RlTmFtZSh0aGlzLCBcImlucHV0XCIpICYmIFwiY2hlY2tib3hcIiA9PT0gdGhpcy50eXBlICYmIHRoaXMuY2xpY2sgPyAodGhpcy5jbGljaygpLCAhMSkgOiB0IH0gfSwgZm9jdXM6IHsgdHJpZ2dlcjogZnVuY3Rpb24gKCkgeyBpZiAodGhpcyAhPT0gby5hY3RpdmVFbGVtZW50ICYmIHRoaXMuZm9jdXMpIHRyeSB7IHJldHVybiB0aGlzLmZvY3VzKCksICExIH0gY2F0Y2ggKGUpIHsgfSB9LCBkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNpblwiIH0sIGJsdXI6IHsgdHJpZ2dlcjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcyA9PT0gby5hY3RpdmVFbGVtZW50ICYmIHRoaXMuYmx1ciA/ICh0aGlzLmJsdXIoKSwgITEpIDogdCB9LCBkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNvdXRcIiB9LCBiZWZvcmV1bmxvYWQ6IHsgcG9zdERpc3BhdGNoOiBmdW5jdGlvbiAoZSkgeyBlLnJlc3VsdCAhPT0gdCAmJiAoZS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZS5yZXN1bHQpIH0gfSB9LCBzaW11bGF0ZTogZnVuY3Rpb24gKGUsIHQsIG4sIHIpIHsgdmFyIGkgPSBiLmV4dGVuZChuZXcgYi5FdmVudCwgbiwgeyB0eXBlOiBlLCBpc1NpbXVsYXRlZDogITAsIG9yaWdpbmFsRXZlbnQ6IHt9IH0pOyByID8gYi5ldmVudC50cmlnZ2VyKGksIG51bGwsIHQpIDogYi5ldmVudC5kaXNwYXRjaC5jYWxsKHQsIGkpLCBpLmlzRGVmYXVsdFByZXZlbnRlZCgpICYmIG4ucHJldmVudERlZmF1bHQoKSB9IH0sIGIucmVtb3ZlRXZlbnQgPSBvLnJlbW92ZUV2ZW50TGlzdGVuZXIgPyBmdW5jdGlvbiAoZSwgdCwgbikgeyBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsIG4sICExKSB9IDogZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHIgPSBcIm9uXCIgKyB0OyBlLmRldGFjaEV2ZW50ICYmICh0eXBlb2YgZVtyXSA9PT0gaSAmJiAoZVtyXSA9IG51bGwpLCBlLmRldGFjaEV2ZW50KHIsIG4pKSB9LCBiLkV2ZW50ID0gZnVuY3Rpb24gKGUsIG4pIHsgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBiLkV2ZW50ID8gKGUgJiYgZS50eXBlID8gKHRoaXMub3JpZ2luYWxFdmVudCA9IGUsIHRoaXMudHlwZSA9IGUudHlwZSwgdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBlLmRlZmF1bHRQcmV2ZW50ZWQgfHwgZS5yZXR1cm5WYWx1ZSA9PT0gITEgfHwgZS5nZXRQcmV2ZW50RGVmYXVsdCAmJiBlLmdldFByZXZlbnREZWZhdWx0KCkgPyBpdCA6IG90KSA6IHRoaXMudHlwZSA9IGUsIG4gJiYgYi5leHRlbmQodGhpcywgbiksIHRoaXMudGltZVN0YW1wID0gZSAmJiBlLnRpbWVTdGFtcCB8fCBiLm5vdygpLCB0aGlzW2IuZXhwYW5kb10gPSAhMCwgdCkgOiBuZXcgYi5FdmVudChlLCBuKSB9LCBiLkV2ZW50LnByb3RvdHlwZSA9IHsgaXNEZWZhdWx0UHJldmVudGVkOiBvdCwgaXNQcm9wYWdhdGlvblN0b3BwZWQ6IG90LCBpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDogb3QsIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbiAoKSB7IHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50OyB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGl0LCBlICYmIChlLnByZXZlbnREZWZhdWx0ID8gZS5wcmV2ZW50RGVmYXVsdCgpIDogZS5yZXR1cm5WYWx1ZSA9ICExKSB9LCBzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uICgpIHsgdmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7IHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSBpdCwgZSAmJiAoZS5zdG9wUHJvcGFnYXRpb24gJiYgZS5zdG9wUHJvcGFnYXRpb24oKSwgZS5jYW5jZWxCdWJibGUgPSAhMCkgfSwgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiBmdW5jdGlvbiAoKSB7IHRoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSBpdCwgdGhpcy5zdG9wUHJvcGFnYXRpb24oKSB9IH0sIGIuZWFjaCh7IG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsIG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIiB9LCBmdW5jdGlvbiAoZSwgdCkge1xyXG4gICAgICAgIGIuZXZlbnQuc3BlY2lhbFtlXSA9IHsgZGVsZWdhdGVUeXBlOiB0LCBiaW5kVHlwZTogdCwgaGFuZGxlOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgbiwgciA9IHRoaXMsIGkgPSBlLnJlbGF0ZWRUYXJnZXQsIG8gPSBlLmhhbmRsZU9iajtcclxuICAgICAgICAgICAgcmV0dXJuICghaSB8fCBpICE9PSByICYmICFiLmNvbnRhaW5zKHIsIGkpKSAmJiAoZS50eXBlID0gby5vcmlnVHlwZSwgbiA9IG8uaGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBlLnR5cGUgPSB0KSwgblxyXG4gICAgICAgIH0gXHJcbiAgICAgICAgfVxyXG4gICAgfSksIGIuc3VwcG9ydC5zdWJtaXRCdWJibGVzIHx8IChiLmV2ZW50LnNwZWNpYWwuc3VibWl0ID0geyBzZXR1cDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYi5ub2RlTmFtZSh0aGlzLCBcImZvcm1cIikgPyAhMSA6IChiLmV2ZW50LmFkZCh0aGlzLCBcImNsaWNrLl9zdWJtaXQga2V5cHJlc3MuX3N1Ym1pdFwiLCBmdW5jdGlvbiAoZSkgeyB2YXIgbiA9IGUudGFyZ2V0LCByID0gYi5ub2RlTmFtZShuLCBcImlucHV0XCIpIHx8IGIubm9kZU5hbWUobiwgXCJidXR0b25cIikgPyBuLmZvcm0gOiB0OyByICYmICFiLl9kYXRhKHIsIFwic3VibWl0QnViYmxlc1wiKSAmJiAoYi5ldmVudC5hZGQociwgXCJzdWJtaXQuX3N1Ym1pdFwiLCBmdW5jdGlvbiAoZSkgeyBlLl9zdWJtaXRfYnViYmxlID0gITAgfSksIGIuX2RhdGEociwgXCJzdWJtaXRCdWJibGVzXCIsICEwKSkgfSksIHQpIH0sIHBvc3REaXNwYXRjaDogZnVuY3Rpb24gKGUpIHsgZS5fc3VibWl0X2J1YmJsZSAmJiAoZGVsZXRlIGUuX3N1Ym1pdF9idWJibGUsIHRoaXMucGFyZW50Tm9kZSAmJiAhZS5pc1RyaWdnZXIgJiYgYi5ldmVudC5zaW11bGF0ZShcInN1Ym1pdFwiLCB0aGlzLnBhcmVudE5vZGUsIGUsICEwKSkgfSwgdGVhcmRvd246IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGIubm9kZU5hbWUodGhpcywgXCJmb3JtXCIpID8gITEgOiAoYi5ldmVudC5yZW1vdmUodGhpcywgXCIuX3N1Ym1pdFwiKSwgdCkgfSB9KSwgYi5zdXBwb3J0LmNoYW5nZUJ1YmJsZXMgfHwgKGIuZXZlbnQuc3BlY2lhbC5jaGFuZ2UgPSB7IHNldHVwOiBmdW5jdGlvbiAoKSB7IHJldHVybiBaLnRlc3QodGhpcy5ub2RlTmFtZSkgPyAoKFwiY2hlY2tib3hcIiA9PT0gdGhpcy50eXBlIHx8IFwicmFkaW9cIiA9PT0gdGhpcy50eXBlKSAmJiAoYi5ldmVudC5hZGQodGhpcywgXCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7IFwiY2hlY2tlZFwiID09PSBlLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lICYmICh0aGlzLl9qdXN0X2NoYW5nZWQgPSAhMCkgfSksIGIuZXZlbnQuYWRkKHRoaXMsIFwiY2xpY2suX2NoYW5nZVwiLCBmdW5jdGlvbiAoZSkgeyB0aGlzLl9qdXN0X2NoYW5nZWQgJiYgIWUuaXNUcmlnZ2VyICYmICh0aGlzLl9qdXN0X2NoYW5nZWQgPSAhMSksIGIuZXZlbnQuc2ltdWxhdGUoXCJjaGFuZ2VcIiwgdGhpcywgZSwgITApIH0pKSwgITEpIDogKGIuZXZlbnQuYWRkKHRoaXMsIFwiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZVwiLCBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGUudGFyZ2V0OyBaLnRlc3QodC5ub2RlTmFtZSkgJiYgIWIuX2RhdGEodCwgXCJjaGFuZ2VCdWJibGVzXCIpICYmIChiLmV2ZW50LmFkZCh0LCBcImNoYW5nZS5fY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7ICF0aGlzLnBhcmVudE5vZGUgfHwgZS5pc1NpbXVsYXRlZCB8fCBlLmlzVHJpZ2dlciB8fCBiLmV2ZW50LnNpbXVsYXRlKFwiY2hhbmdlXCIsIHRoaXMucGFyZW50Tm9kZSwgZSwgITApIH0pLCBiLl9kYXRhKHQsIFwiY2hhbmdlQnViYmxlc1wiLCAhMCkpIH0pLCB0KSB9LCBoYW5kbGU6IGZ1bmN0aW9uIChlKSB7IHZhciBuID0gZS50YXJnZXQ7IHJldHVybiB0aGlzICE9PSBuIHx8IGUuaXNTaW11bGF0ZWQgfHwgZS5pc1RyaWdnZXIgfHwgXCJyYWRpb1wiICE9PSBuLnR5cGUgJiYgXCJjaGVja2JveFwiICE9PSBuLnR5cGUgPyBlLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiB0IH0sIHRlYXJkb3duOiBmdW5jdGlvbiAoKSB7IHJldHVybiBiLmV2ZW50LnJlbW92ZSh0aGlzLCBcIi5fY2hhbmdlXCIpLCAhWi50ZXN0KHRoaXMubm9kZU5hbWUpIH0gfSksIGIuc3VwcG9ydC5mb2N1c2luQnViYmxlcyB8fCBiLmVhY2goeyBmb2N1czogXCJmb2N1c2luXCIsIGJsdXI6IFwiZm9jdXNvdXRcIiB9LCBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IDAsIHIgPSBmdW5jdGlvbiAoZSkgeyBiLmV2ZW50LnNpbXVsYXRlKHQsIGUudGFyZ2V0LCBiLmV2ZW50LmZpeChlKSwgITApIH07IGIuZXZlbnQuc3BlY2lhbFt0XSA9IHsgc2V0dXA6IGZ1bmN0aW9uICgpIHsgMCA9PT0gbisrICYmIG8uYWRkRXZlbnRMaXN0ZW5lcihlLCByLCAhMCkgfSwgdGVhcmRvd246IGZ1bmN0aW9uICgpIHsgMCA9PT0gLS1uICYmIG8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLCByLCAhMCkgfSB9IH0pLCBiLmZuLmV4dGVuZCh7IG9uOiBmdW5jdGlvbiAoZSwgbiwgciwgaSwgbykgeyB2YXIgYSwgczsgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIGUpIHsgXCJzdHJpbmdcIiAhPSB0eXBlb2YgbiAmJiAociA9IHIgfHwgbiwgbiA9IHQpOyBmb3IgKGEgaW4gZSkgdGhpcy5vbihhLCBuLCByLCBlW2FdLCBvKTsgcmV0dXJuIHRoaXMgfSBpZiAobnVsbCA9PSByICYmIG51bGwgPT0gaSA/IChpID0gbiwgciA9IG4gPSB0KSA6IG51bGwgPT0gaSAmJiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiA/IChpID0gciwgciA9IHQpIDogKGkgPSByLCByID0gbiwgbiA9IHQpKSwgaSA9PT0gITEpIGkgPSBvdDsgZWxzZSBpZiAoIWkpIHJldHVybiB0aGlzOyByZXR1cm4gMSA9PT0gbyAmJiAocyA9IGksIGkgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gYigpLm9mZihlKSwgcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpIH0sIGkuZ3VpZCA9IHMuZ3VpZCB8fCAocy5ndWlkID0gYi5ndWlkKyspKSwgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsgYi5ldmVudC5hZGQodGhpcywgZSwgaSwgciwgbikgfSkgfSwgb25lOiBmdW5jdGlvbiAoZSwgdCwgbiwgcikgeyByZXR1cm4gdGhpcy5vbihlLCB0LCBuLCByLCAxKSB9LCBvZmY6IGZ1bmN0aW9uIChlLCBuLCByKSB7IHZhciBpLCBvOyBpZiAoZSAmJiBlLnByZXZlbnREZWZhdWx0ICYmIGUuaGFuZGxlT2JqKSByZXR1cm4gaSA9IGUuaGFuZGxlT2JqLCBiKGUuZGVsZWdhdGVUYXJnZXQpLm9mZihpLm5hbWVzcGFjZSA/IGkub3JpZ1R5cGUgKyBcIi5cIiArIGkubmFtZXNwYWNlIDogaS5vcmlnVHlwZSwgaS5zZWxlY3RvciwgaS5oYW5kbGVyKSwgdGhpczsgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIGUpIHsgZm9yIChvIGluIGUpIHRoaXMub2ZmKG8sIG4sIGVbb10pOyByZXR1cm4gdGhpcyB9IHJldHVybiAobiA9PT0gITEgfHwgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuKSAmJiAociA9IG4sIG4gPSB0KSwgciA9PT0gITEgJiYgKHIgPSBvdCksIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IGIuZXZlbnQucmVtb3ZlKHRoaXMsIGUsIHIsIG4pIH0pIH0sIGJpbmQ6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiB0aGlzLm9uKGUsIG51bGwsIHQsIG4pIH0sIHVuYmluZDogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIHRoaXMub2ZmKGUsIG51bGwsIHQpIH0sIGRlbGVnYXRlOiBmdW5jdGlvbiAoZSwgdCwgbiwgcikgeyByZXR1cm4gdGhpcy5vbih0LCBlLCBuLCByKSB9LCB1bmRlbGVnYXRlOiBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gMSA9PT0gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMub2ZmKGUsIFwiKipcIikgOiB0aGlzLm9mZih0LCBlIHx8IFwiKipcIiwgbikgfSwgdHJpZ2dlcjogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IGIuZXZlbnQudHJpZ2dlcihlLCB0LCB0aGlzKSB9KSB9LCB0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24gKGUsIG4pIHsgdmFyIHIgPSB0aGlzWzBdOyByZXR1cm4gciA/IGIuZXZlbnQudHJpZ2dlcihlLCBuLCByLCAhMCkgOiB0IH0gfSksIGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuLCByLCBpLCBvLCBhLCBzLCB1LCBsLCBjLCBwLCBmLCBkLCBoLCBnLCBtLCB5LCB2LCB4ID0gXCJzaXp6bGVcIiArIC1uZXcgRGF0ZSwgdyA9IGUuZG9jdW1lbnQsIFQgPSB7fSwgTiA9IDAsIEMgPSAwLCBrID0gaXQoKSwgRSA9IGl0KCksIFMgPSBpdCgpLCBBID0gdHlwZW9mIHQsIGogPSAxIDw8IDMxLCBEID0gW10sIEwgPSBELnBvcCwgSCA9IEQucHVzaCwgcSA9IEQuc2xpY2UsIE0gPSBELmluZGV4T2YgfHwgZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSAwLCBuID0gdGhpcy5sZW5ndGg7IGZvciAoOyBuID4gdDsgdCsrKSBpZiAodGhpc1t0XSA9PT0gZSkgcmV0dXJuIHQ7IHJldHVybiAtMSB9LCBfID0gXCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLCBGID0gXCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIiwgTyA9IEYucmVwbGFjZShcIndcIiwgXCJ3I1wiKSwgQiA9IFwiKFsqXiR8IX5dPz0pXCIsIFAgPSBcIlxcXFxbXCIgKyBfICsgXCIqKFwiICsgRiArIFwiKVwiICsgXyArIFwiKig/OlwiICsgQiArIF8gKyBcIiooPzooWydcXFwiXSkoKD86XFxcXFxcXFwufFteXFxcXFxcXFxdKSo/KVxcXFwzfChcIiArIE8gKyBcIil8KXwpXCIgKyBfICsgXCIqXFxcXF1cIiwgUiA9IFwiOihcIiArIEYgKyBcIikoPzpcXFxcKCgoWydcXFwiXSkoKD86XFxcXFxcXFwufFteXFxcXFxcXFxdKSo/KVxcXFwzfCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIiArIFAucmVwbGFjZSgzLCA4KSArIFwiKSopfC4qKVxcXFwpfClcIiwgVyA9IFJlZ0V4cChcIl5cIiArIF8gKyBcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIgKyBfICsgXCIrJFwiLCBcImdcIiksICQgPSBSZWdFeHAoXCJeXCIgKyBfICsgXCIqLFwiICsgXyArIFwiKlwiKSwgSSA9IFJlZ0V4cChcIl5cIiArIF8gKyBcIiooW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZj4rfl0pXCIgKyBfICsgXCIqXCIpLCB6ID0gUmVnRXhwKFIpLCBYID0gUmVnRXhwKFwiXlwiICsgTyArIFwiJFwiKSwgVSA9IHsgSUQ6IFJlZ0V4cChcIl4jKFwiICsgRiArIFwiKVwiKSwgQ0xBU1M6IFJlZ0V4cChcIl5cXFxcLihcIiArIEYgKyBcIilcIiksIE5BTUU6IFJlZ0V4cChcIl5cXFxcW25hbWU9WydcXFwiXT8oXCIgKyBGICsgXCIpWydcXFwiXT9cXFxcXVwiKSwgVEFHOiBSZWdFeHAoXCJeKFwiICsgRi5yZXBsYWNlKFwid1wiLCBcIncqXCIpICsgXCIpXCIpLCBBVFRSOiBSZWdFeHAoXCJeXCIgKyBQKSwgUFNFVURPOiBSZWdFeHAoXCJeXCIgKyBSKSwgQ0hJTEQ6IFJlZ0V4cChcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIgKyBfICsgXCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIF8gKyBcIiooPzooWystXXwpXCIgKyBfICsgXCIqKFxcXFxkKyl8KSlcIiArIF8gKyBcIipcXFxcKXwpXCIsIFwiaVwiKSwgbmVlZHNDb250ZXh0OiBSZWdFeHAoXCJeXCIgKyBfICsgXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiICsgXyArIFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIF8gKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIikgfSwgViA9IC9bXFx4MjBcXHRcXHJcXG5cXGZdKlsrfl0vLCBZID0gL15bXntdK1xce1xccypcXFtuYXRpdmUgY29kZS8sIEogPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLywgRyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksIFEgPSAvXmhcXGQkL2ksIEsgPSAvJ3xcXFxcL2csIFogPSAvXFw9W1xceDIwXFx0XFxyXFxuXFxmXSooW14nXCJcXF1dKilbXFx4MjBcXHRcXHJcXG5cXGZdKlxcXS9nLCBldCA9IC9cXFxcKFtcXGRhLWZBLUZdezEsNn1bXFx4MjBcXHRcXHJcXG5cXGZdP3wuKS9nLCB0dCA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gXCIweFwiICsgdCAtIDY1NTM2OyByZXR1cm4gbiAhPT0gbiA/IHQgOiAwID4gbiA/IFN0cmluZy5mcm9tQ2hhckNvZGUobiArIDY1NTM2KSA6IFN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTYgfCBuID4+IDEwLCA1NjMyMCB8IDEwMjMgJiBuKSB9OyB0cnkgeyBxLmNhbGwody5kb2N1bWVudEVsZW1lbnQuY2hpbGROb2RlcywgMClbMF0ubm9kZVR5cGUgfSBjYXRjaCAobnQpIHsgcSA9IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuID0gW107IHdoaWxlICh0ID0gdGhpc1tlKytdKSBuLnB1c2godCk7IHJldHVybiBuIH0gfSBmdW5jdGlvbiBydChlKSB7IHJldHVybiBZLnRlc3QoZSArIFwiXCIpIH0gZnVuY3Rpb24gaXQoKSB7IHZhciBlLCB0ID0gW107IHJldHVybiBlID0gZnVuY3Rpb24gKG4sIHIpIHsgcmV0dXJuIHQucHVzaChuICs9IFwiIFwiKSA+IGkuY2FjaGVMZW5ndGggJiYgZGVsZXRlIGVbdC5zaGlmdCgpXSwgZVtuXSA9IHIgfSB9IGZ1bmN0aW9uIG90KGUpIHsgcmV0dXJuIGVbeF0gPSAhMCwgZSB9IGZ1bmN0aW9uIGF0KGUpIHsgdmFyIHQgPSBwLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7IHRyeSB7IHJldHVybiBlKHQpIH0gY2F0Y2ggKG4pIHsgcmV0dXJuICExIH0gZmluYWxseSB7IHQgPSBudWxsIH0gfSBmdW5jdGlvbiBzdChlLCB0LCBuLCByKSB7IHZhciBpLCBvLCBhLCBzLCB1LCBsLCBmLCBnLCBtLCB2OyBpZiAoKHQgPyB0Lm93bmVyRG9jdW1lbnQgfHwgdCA6IHcpICE9PSBwICYmIGModCksIHQgPSB0IHx8IHAsIG4gPSBuIHx8IFtdLCAhZSB8fCBcInN0cmluZ1wiICE9IHR5cGVvZiBlKSByZXR1cm4gbjsgaWYgKDEgIT09IChzID0gdC5ub2RlVHlwZSkgJiYgOSAhPT0gcykgcmV0dXJuIFtdOyBpZiAoIWQgJiYgIXIpIHsgaWYgKGkgPSBKLmV4ZWMoZSkpIGlmIChhID0gaVsxXSkgeyBpZiAoOSA9PT0gcykgeyBpZiAobyA9IHQuZ2V0RWxlbWVudEJ5SWQoYSksICFvIHx8ICFvLnBhcmVudE5vZGUpIHJldHVybiBuOyBpZiAoby5pZCA9PT0gYSkgcmV0dXJuIG4ucHVzaChvKSwgbiB9IGVsc2UgaWYgKHQub3duZXJEb2N1bWVudCAmJiAobyA9IHQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKSkgJiYgeSh0LCBvKSAmJiBvLmlkID09PSBhKSByZXR1cm4gbi5wdXNoKG8pLCBuIH0gZWxzZSB7IGlmIChpWzJdKSByZXR1cm4gSC5hcHBseShuLCBxLmNhbGwodC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSwgMCkpLCBuOyBpZiAoKGEgPSBpWzNdKSAmJiBULmdldEJ5Q2xhc3NOYW1lICYmIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkgcmV0dXJuIEguYXBwbHkobiwgcS5jYWxsKHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKSwgMCkpLCBuIH0gaWYgKFQucXNhICYmICFoLnRlc3QoZSkpIHsgaWYgKGYgPSAhMCwgZyA9IHgsIG0gPSB0LCB2ID0gOSA9PT0gcyAmJiBlLCAxID09PSBzICYmIFwib2JqZWN0XCIgIT09IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkgeyBsID0gZnQoZSksIChmID0gdC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSkgPyBnID0gZi5yZXBsYWNlKEssIFwiXFxcXCQmXCIpIDogdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBnKSwgZyA9IFwiW2lkPSdcIiArIGcgKyBcIiddIFwiLCB1ID0gbC5sZW5ndGg7IHdoaWxlICh1LS0pIGxbdV0gPSBnICsgZHQobFt1XSk7IG0gPSBWLnRlc3QoZSkgJiYgdC5wYXJlbnROb2RlIHx8IHQsIHYgPSBsLmpvaW4oXCIsXCIpIH0gaWYgKHYpIHRyeSB7IHJldHVybiBILmFwcGx5KG4sIHEuY2FsbChtLnF1ZXJ5U2VsZWN0b3JBbGwodiksIDApKSwgbiB9IGNhdGNoIChiKSB7IH0gZmluYWxseSB7IGYgfHwgdC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKSB9IH0gfSByZXR1cm4gd3QoZS5yZXBsYWNlKFcsIFwiJDFcIiksIHQsIG4sIHIpIH0gYSA9IHN0LmlzWE1MID0gZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBlICYmIChlLm93bmVyRG9jdW1lbnQgfHwgZSkuZG9jdW1lbnRFbGVtZW50OyByZXR1cm4gdCA/IFwiSFRNTFwiICE9PSB0Lm5vZGVOYW1lIDogITEgfSwgYyA9IHN0LnNldERvY3VtZW50ID0gZnVuY3Rpb24gKGUpIHsgdmFyIG4gPSBlID8gZS5vd25lckRvY3VtZW50IHx8IGUgOiB3OyByZXR1cm4gbiAhPT0gcCAmJiA5ID09PSBuLm5vZGVUeXBlICYmIG4uZG9jdW1lbnRFbGVtZW50ID8gKHAgPSBuLCBmID0gbi5kb2N1bWVudEVsZW1lbnQsIGQgPSBhKG4pLCBULnRhZ05hbWVOb0NvbW1lbnRzID0gYXQoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUuYXBwZW5kQ2hpbGQobi5jcmVhdGVDb21tZW50KFwiXCIpKSwgIWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aCB9KSwgVC5hdHRyaWJ1dGVzID0gYXQoZnVuY3Rpb24gKGUpIHsgZS5pbm5lckhUTUwgPSBcIjxzZWxlY3Q+PC9zZWxlY3Q+XCI7IHZhciB0ID0gdHlwZW9mIGUubGFzdENoaWxkLmdldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIpOyByZXR1cm4gXCJib29sZWFuXCIgIT09IHQgJiYgXCJzdHJpbmdcIiAhPT0gdCB9KSwgVC5nZXRCeUNsYXNzTmFtZSA9IGF0KGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLmlubmVySFRNTCA9IFwiPGRpdiBjbGFzcz0naGlkZGVuIGUnPjwvZGl2PjxkaXYgY2xhc3M9J2hpZGRlbic+PC9kaXY+XCIsIGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJlXCIpLmxlbmd0aCA/IChlLmxhc3RDaGlsZC5jbGFzc05hbWUgPSBcImVcIiwgMiA9PT0gZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZVwiKS5sZW5ndGgpIDogITEgfSksIFQuZ2V0QnlOYW1lID0gYXQoZnVuY3Rpb24gKGUpIHsgZS5pZCA9IHggKyAwLCBlLmlubmVySFRNTCA9IFwiPGEgbmFtZT0nXCIgKyB4ICsgXCInPjwvYT48ZGl2IG5hbWU9J1wiICsgeCArIFwiJz48L2Rpdj5cIiwgZi5pbnNlcnRCZWZvcmUoZSwgZi5maXJzdENoaWxkKTsgdmFyIHQgPSBuLmdldEVsZW1lbnRzQnlOYW1lICYmIG4uZ2V0RWxlbWVudHNCeU5hbWUoeCkubGVuZ3RoID09PSAyICsgbi5nZXRFbGVtZW50c0J5TmFtZSh4ICsgMCkubGVuZ3RoOyByZXR1cm4gVC5nZXRJZE5vdE5hbWUgPSAhbi5nZXRFbGVtZW50QnlJZCh4KSwgZi5yZW1vdmVDaGlsZChlKSwgdCB9KSwgaS5hdHRySGFuZGxlID0gYXQoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUuaW5uZXJIVE1MID0gXCI8YSBocmVmPScjJz48L2E+XCIsIGUuZmlyc3RDaGlsZCAmJiB0eXBlb2YgZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSAhPT0gQSAmJiBcIiNcIiA9PT0gZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIikgfSkgPyB7fSA6IHsgaHJlZjogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUuZ2V0QXR0cmlidXRlKFwiaHJlZlwiLCAyKSB9LCB0eXBlOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpIH0gfSwgVC5nZXRJZE5vdE5hbWUgPyAoaS5maW5kLklEID0gZnVuY3Rpb24gKGUsIHQpIHsgaWYgKHR5cGVvZiB0LmdldEVsZW1lbnRCeUlkICE9PSBBICYmICFkKSB7IHZhciBuID0gdC5nZXRFbGVtZW50QnlJZChlKTsgcmV0dXJuIG4gJiYgbi5wYXJlbnROb2RlID8gW25dIDogW10gfSB9LCBpLmZpbHRlci5JRCA9IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZS5yZXBsYWNlKGV0LCB0dCk7IHJldHVybiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PT0gdCB9IH0pIDogKGkuZmluZC5JRCA9IGZ1bmN0aW9uIChlLCBuKSB7IGlmICh0eXBlb2Ygbi5nZXRFbGVtZW50QnlJZCAhPT0gQSAmJiAhZCkgeyB2YXIgciA9IG4uZ2V0RWxlbWVudEJ5SWQoZSk7IHJldHVybiByID8gci5pZCA9PT0gZSB8fCB0eXBlb2Ygci5nZXRBdHRyaWJ1dGVOb2RlICE9PSBBICYmIHIuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpLnZhbHVlID09PSBlID8gW3JdIDogdCA6IFtdIH0gfSwgaS5maWx0ZXIuSUQgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGUucmVwbGFjZShldCwgdHQpOyByZXR1cm4gZnVuY3Rpb24gKGUpIHsgdmFyIG4gPSB0eXBlb2YgZS5nZXRBdHRyaWJ1dGVOb2RlICE9PSBBICYmIGUuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpOyByZXR1cm4gbiAmJiBuLnZhbHVlID09PSB0IH0gfSksIGkuZmluZC5UQUcgPSBULnRhZ05hbWVOb0NvbW1lbnRzID8gZnVuY3Rpb24gKGUsIG4pIHsgcmV0dXJuIHR5cGVvZiBuLmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBBID8gbi5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSA6IHQgfSA6IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuLCByID0gW10sIGkgPSAwLCBvID0gdC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTsgaWYgKFwiKlwiID09PSBlKSB7IHdoaWxlIChuID0gb1tpKytdKSAxID09PSBuLm5vZGVUeXBlICYmIHIucHVzaChuKTsgcmV0dXJuIHIgfSByZXR1cm4gbyB9LCBpLmZpbmQuTkFNRSA9IFQuZ2V0QnlOYW1lICYmIGZ1bmN0aW9uIChlLCBuKSB7IHJldHVybiB0eXBlb2Ygbi5nZXRFbGVtZW50c0J5TmFtZSAhPT0gQSA/IG4uZ2V0RWxlbWVudHNCeU5hbWUobmFtZSkgOiB0IH0sIGkuZmluZC5DTEFTUyA9IFQuZ2V0QnlDbGFzc05hbWUgJiYgZnVuY3Rpb24gKGUsIG4pIHsgcmV0dXJuIHR5cGVvZiBuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPT09IEEgfHwgZCA/IHQgOiBuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZSkgfSwgZyA9IFtdLCBoID0gW1wiOmZvY3VzXCJdLCAoVC5xc2EgPSBydChuLnF1ZXJ5U2VsZWN0b3JBbGwpKSAmJiAoYXQoZnVuY3Rpb24gKGUpIHsgZS5pbm5lckhUTUwgPSBcIjxzZWxlY3Q+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIiwgZS5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGggfHwgaC5wdXNoKFwiXFxcXFtcIiArIF8gKyBcIiooPzpjaGVja2VkfGRpc2FibGVkfGlzbWFwfG11bHRpcGxlfHJlYWRvbmx5fHNlbGVjdGVkfHZhbHVlKVwiKSwgZS5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RoIHx8IGgucHVzaChcIjpjaGVja2VkXCIpIH0pLCBhdChmdW5jdGlvbiAoZSkgeyBlLmlubmVySFRNTCA9IFwiPGlucHV0IHR5cGU9J2hpZGRlbicgaT0nJy8+XCIsIGUucXVlcnlTZWxlY3RvckFsbChcIltpXj0nJ11cIikubGVuZ3RoICYmIGgucHVzaChcIlsqXiRdPVwiICsgXyArIFwiKig/OlxcXCJcXFwifCcnKVwiKSwgZS5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RoIHx8IGgucHVzaChcIjplbmFibGVkXCIsIFwiOmRpc2FibGVkXCIpLCBlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLCBoLnB1c2goXCIsLio6XCIpIH0pKSwgKFQubWF0Y2hlc1NlbGVjdG9yID0gcnQobSA9IGYubWF0Y2hlc1NlbGVjdG9yIHx8IGYubW96TWF0Y2hlc1NlbGVjdG9yIHx8IGYud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IGYub01hdGNoZXNTZWxlY3RvciB8fCBmLm1zTWF0Y2hlc1NlbGVjdG9yKSkgJiYgYXQoZnVuY3Rpb24gKGUpIHsgVC5kaXNjb25uZWN0ZWRNYXRjaCA9IG0uY2FsbChlLCBcImRpdlwiKSwgbS5jYWxsKGUsIFwiW3MhPScnXTp4XCIpLCBnLnB1c2goXCIhPVwiLCBSKSB9KSwgaCA9IFJlZ0V4cChoLmpvaW4oXCJ8XCIpKSwgZyA9IFJlZ0V4cChnLmpvaW4oXCJ8XCIpKSwgeSA9IHJ0KGYuY29udGFpbnMpIHx8IGYuY29tcGFyZURvY3VtZW50UG9zaXRpb24gPyBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IDkgPT09IGUubm9kZVR5cGUgPyBlLmRvY3VtZW50RWxlbWVudCA6IGUsIHIgPSB0ICYmIHQucGFyZW50Tm9kZTsgcmV0dXJuIGUgPT09IHIgfHwgISghciB8fCAxICE9PSByLm5vZGVUeXBlIHx8ICEobi5jb250YWlucyA/IG4uY29udGFpbnMocikgOiBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIDE2ICYgZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpIH0gOiBmdW5jdGlvbiAoZSwgdCkgeyBpZiAodCkgd2hpbGUgKHQgPSB0LnBhcmVudE5vZGUpIGlmICh0ID09PSBlKSByZXR1cm4gITA7IHJldHVybiAhMSB9LCB2ID0gZi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiA/IGZ1bmN0aW9uIChlLCB0KSB7IHZhciByOyByZXR1cm4gZSA9PT0gdCA/ICh1ID0gITAsIDApIDogKHIgPSB0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24gJiYgZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KSkgPyAxICYgciB8fCBlLnBhcmVudE5vZGUgJiYgMTEgPT09IGUucGFyZW50Tm9kZS5ub2RlVHlwZSA/IGUgPT09IG4gfHwgeSh3LCBlKSA/IC0xIDogdCA9PT0gbiB8fCB5KHcsIHQpID8gMSA6IDAgOiA0ICYgciA/IC0xIDogMSA6IGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24gPyAtMSA6IDEgfSA6IGZ1bmN0aW9uIChlLCB0KSB7IHZhciByLCBpID0gMCwgbyA9IGUucGFyZW50Tm9kZSwgYSA9IHQucGFyZW50Tm9kZSwgcyA9IFtlXSwgbCA9IFt0XTsgaWYgKGUgPT09IHQpIHJldHVybiB1ID0gITAsIDA7IGlmICghbyB8fCAhYSkgcmV0dXJuIGUgPT09IG4gPyAtMSA6IHQgPT09IG4gPyAxIDogbyA/IC0xIDogYSA/IDEgOiAwOyBpZiAobyA9PT0gYSkgcmV0dXJuIHV0KGUsIHQpOyByID0gZTsgd2hpbGUgKHIgPSByLnBhcmVudE5vZGUpIHMudW5zaGlmdChyKTsgciA9IHQ7IHdoaWxlIChyID0gci5wYXJlbnROb2RlKSBsLnVuc2hpZnQocik7IHdoaWxlIChzW2ldID09PSBsW2ldKSBpKys7IHJldHVybiBpID8gdXQoc1tpXSwgbFtpXSkgOiBzW2ldID09PSB3ID8gLTEgOiBsW2ldID09PSB3ID8gMSA6IDAgfSwgdSA9ICExLCBbMCwgMF0uc29ydCh2KSwgVC5kZXRlY3REdXBsaWNhdGVzID0gdSwgcCkgOiBwIH0sIHN0Lm1hdGNoZXMgPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gc3QoZSwgbnVsbCwgbnVsbCwgdCkgfSwgc3QubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24gKGUsIHQpIHsgaWYgKChlLm93bmVyRG9jdW1lbnQgfHwgZSkgIT09IHAgJiYgYyhlKSwgdCA9IHQucmVwbGFjZShaLCBcIj0nJDEnXVwiKSwgISghVC5tYXRjaGVzU2VsZWN0b3IgfHwgZCB8fCBnICYmIGcudGVzdCh0KSB8fCBoLnRlc3QodCkpKSB0cnkgeyB2YXIgbiA9IG0uY2FsbChlLCB0KTsgaWYgKG4gfHwgVC5kaXNjb25uZWN0ZWRNYXRjaCB8fCBlLmRvY3VtZW50ICYmIDExICE9PSBlLmRvY3VtZW50Lm5vZGVUeXBlKSByZXR1cm4gbiB9IGNhdGNoIChyKSB7IH0gcmV0dXJuIHN0KHQsIHAsIG51bGwsIFtlXSkubGVuZ3RoID4gMCB9LCBzdC5jb250YWlucyA9IGZ1bmN0aW9uIChlLCB0KSB7IHJldHVybiAoZS5vd25lckRvY3VtZW50IHx8IGUpICE9PSBwICYmIGMoZSksIHkoZSwgdCkgfSwgc3QuYXR0ciA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuOyByZXR1cm4gKGUub3duZXJEb2N1bWVudCB8fCBlKSAhPT0gcCAmJiBjKGUpLCBkIHx8ICh0ID0gdC50b0xvd2VyQ2FzZSgpKSwgKG4gPSBpLmF0dHJIYW5kbGVbdF0pID8gbihlKSA6IGQgfHwgVC5hdHRyaWJ1dGVzID8gZS5nZXRBdHRyaWJ1dGUodCkgOiAoKG4gPSBlLmdldEF0dHJpYnV0ZU5vZGUodCkpIHx8IGUuZ2V0QXR0cmlidXRlKHQpKSAmJiBlW3RdID09PSAhMCA/IHQgOiBuICYmIG4uc3BlY2lmaWVkID8gbi52YWx1ZSA6IG51bGwgfSwgc3QuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aHJvdyBFcnJvcihcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiICsgZSkgfSwgc3QudW5pcXVlU29ydCA9IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuID0gW10sIHIgPSAxLCBpID0gMDsgaWYgKHUgPSAhVC5kZXRlY3REdXBsaWNhdGVzLCBlLnNvcnQodiksIHUpIHsgZm9yICg7IHQgPSBlW3JdOyByKyspIHQgPT09IGVbciAtIDFdICYmIChpID0gbi5wdXNoKHIpKTsgd2hpbGUgKGktLSkgZS5zcGxpY2UobltpXSwgMSkgfSByZXR1cm4gZSB9OyBmdW5jdGlvbiB1dChlLCB0KSB7IHZhciBuID0gdCAmJiBlLCByID0gbiAmJiAofnQuc291cmNlSW5kZXggfHwgaikgLSAofmUuc291cmNlSW5kZXggfHwgaik7IGlmIChyKSByZXR1cm4gcjsgaWYgKG4pIHdoaWxlIChuID0gbi5uZXh0U2libGluZykgaWYgKG4gPT09IHQpIHJldHVybiAtMTsgcmV0dXJuIGUgPyAxIDogLTEgfSBmdW5jdGlvbiBsdChlKSB7IHJldHVybiBmdW5jdGlvbiAodCkgeyB2YXIgbiA9IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsgcmV0dXJuIFwiaW5wdXRcIiA9PT0gbiAmJiB0LnR5cGUgPT09IGUgfSB9IGZ1bmN0aW9uIGN0KGUpIHsgcmV0dXJuIGZ1bmN0aW9uICh0KSB7IHZhciBuID0gdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOyByZXR1cm4gKFwiaW5wdXRcIiA9PT0gbiB8fCBcImJ1dHRvblwiID09PSBuKSAmJiB0LnR5cGUgPT09IGUgfSB9IGZ1bmN0aW9uIHB0KGUpIHsgcmV0dXJuIG90KGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ID0gK3QsIG90KGZ1bmN0aW9uIChuLCByKSB7IHZhciBpLCBvID0gZShbXSwgbi5sZW5ndGgsIHQpLCBhID0gby5sZW5ndGg7IHdoaWxlIChhLS0pIG5baSA9IG9bYV1dICYmIChuW2ldID0gIShyW2ldID0gbltpXSkpIH0pIH0pIH0gbyA9IHN0LmdldFRleHQgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCwgbiA9IFwiXCIsIHIgPSAwLCBpID0gZS5ub2RlVHlwZTsgaWYgKGkpIHsgaWYgKDEgPT09IGkgfHwgOSA9PT0gaSB8fCAxMSA9PT0gaSkgeyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50ZXh0Q29udGVudCkgcmV0dXJuIGUudGV4dENvbnRlbnQ7IGZvciAoZSA9IGUuZmlyc3RDaGlsZDsgZTsgZSA9IGUubmV4dFNpYmxpbmcpIG4gKz0gbyhlKSB9IGVsc2UgaWYgKDMgPT09IGkgfHwgNCA9PT0gaSkgcmV0dXJuIGUubm9kZVZhbHVlIH0gZWxzZSBmb3IgKDsgdCA9IGVbcl07IHIrKykgbiArPSBvKHQpOyByZXR1cm4gbiB9LCBpID0gc3Quc2VsZWN0b3JzID0geyBjYWNoZUxlbmd0aDogNTAsIGNyZWF0ZVBzZXVkbzogb3QsIG1hdGNoOiBVLCBmaW5kOiB7fSwgcmVsYXRpdmU6IHsgXCI+XCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiwgZmlyc3Q6ICEwIH0sIFwiIFwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIgfSwgXCIrXCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiLCBmaXJzdDogITAgfSwgXCJ+XCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wifSB9LCBwcmVGaWx0ZXI6IHsgQVRUUjogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGVbMV0gPSBlWzFdLnJlcGxhY2UoZXQsIHR0KSwgZVszXSA9IChlWzRdIHx8IGVbNV0gfHwgXCJcIikucmVwbGFjZShldCwgdHQpLCBcIn49XCIgPT09IGVbMl0gJiYgKGVbM10gPSBcIiBcIiArIGVbM10gKyBcIiBcIiksIGUuc2xpY2UoMCwgNCkgfSwgQ0hJTEQ6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlWzFdID0gZVsxXS50b0xvd2VyQ2FzZSgpLCBcIm50aFwiID09PSBlWzFdLnNsaWNlKDAsIDMpID8gKGVbM10gfHwgc3QuZXJyb3IoZVswXSksIGVbNF0gPSArKGVbNF0gPyBlWzVdICsgKGVbNl0gfHwgMSkgOiAyICogKFwiZXZlblwiID09PSBlWzNdIHx8IFwib2RkXCIgPT09IGVbM10pKSwgZVs1XSA9ICsoZVs3XSArIGVbOF0gfHwgXCJvZGRcIiA9PT0gZVszXSkpIDogZVszXSAmJiBzdC5lcnJvcihlWzBdKSwgZSB9LCBQU0VVRE86IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuID0gIWVbNV0gJiYgZVsyXTsgcmV0dXJuIFUuQ0hJTEQudGVzdChlWzBdKSA/IG51bGwgOiAoZVs0XSA/IGVbMl0gPSBlWzRdIDogbiAmJiB6LnRlc3QobikgJiYgKHQgPSBmdChuLCAhMCkpICYmICh0ID0gbi5pbmRleE9mKFwiKVwiLCBuLmxlbmd0aCAtIHQpIC0gbi5sZW5ndGgpICYmIChlWzBdID0gZVswXS5zbGljZSgwLCB0KSwgZVsyXSA9IG4uc2xpY2UoMCwgdCkpLCBlLnNsaWNlKDAsIDMpKSB9IH0sIGZpbHRlcjogeyBUQUc6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBcIipcIiA9PT0gZSA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuICEwIH0gOiAoZSA9IGUucmVwbGFjZShldCwgdHQpLnRvTG93ZXJDYXNlKCksIGZ1bmN0aW9uICh0KSB7IHJldHVybiB0Lm5vZGVOYW1lICYmIHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gZSB9KSB9LCBDTEFTUzogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBrW2UgKyBcIiBcIl07IHJldHVybiB0IHx8ICh0ID0gUmVnRXhwKFwiKF58XCIgKyBfICsgXCIpXCIgKyBlICsgXCIoXCIgKyBfICsgXCJ8JClcIikpICYmIGsoZSwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHQudGVzdChlLmNsYXNzTmFtZSB8fCB0eXBlb2YgZS5nZXRBdHRyaWJ1dGUgIT09IEEgJiYgZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiKSB9KSB9LCBBVFRSOiBmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gZnVuY3Rpb24gKHIpIHsgdmFyIGkgPSBzdC5hdHRyKHIsIGUpOyByZXR1cm4gbnVsbCA9PSBpID8gXCIhPVwiID09PSB0IDogdCA/IChpICs9IFwiXCIsIFwiPVwiID09PSB0ID8gaSA9PT0gbiA6IFwiIT1cIiA9PT0gdCA/IGkgIT09IG4gOiBcIl49XCIgPT09IHQgPyBuICYmIDAgPT09IGkuaW5kZXhPZihuKSA6IFwiKj1cIiA9PT0gdCA/IG4gJiYgaS5pbmRleE9mKG4pID4gLTEgOiBcIiQ9XCIgPT09IHQgPyBuICYmIGkuc2xpY2UoLW4ubGVuZ3RoKSA9PT0gbiA6IFwifj1cIiA9PT0gdCA/IChcIiBcIiArIGkgKyBcIiBcIikuaW5kZXhPZihuKSA+IC0xIDogXCJ8PVwiID09PSB0ID8gaSA9PT0gbiB8fCBpLnNsaWNlKDAsIG4ubGVuZ3RoICsgMSkgPT09IG4gKyBcIi1cIiA6ICExKSA6ICEwIH0gfSwgQ0hJTEQ6IGZ1bmN0aW9uIChlLCB0LCBuLCByLCBpKSB7IHZhciBvID0gXCJudGhcIiAhPT0gZS5zbGljZSgwLCAzKSwgYSA9IFwibGFzdFwiICE9PSBlLnNsaWNlKC00KSwgcyA9IFwib2YtdHlwZVwiID09PSB0OyByZXR1cm4gMSA9PT0gciAmJiAwID09PSBpID8gZnVuY3Rpb24gKGUpIHsgcmV0dXJuICEhZS5wYXJlbnROb2RlIH0gOiBmdW5jdGlvbiAodCwgbiwgdSkgeyB2YXIgbCwgYywgcCwgZiwgZCwgaCwgZyA9IG8gIT09IGEgPyBcIm5leHRTaWJsaW5nXCIgOiBcInByZXZpb3VzU2libGluZ1wiLCBtID0gdC5wYXJlbnROb2RlLCB5ID0gcyAmJiB0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIHYgPSAhdSAmJiAhczsgaWYgKG0pIHsgaWYgKG8pIHsgd2hpbGUgKGcpIHsgcCA9IHQ7IHdoaWxlIChwID0gcFtnXSkgaWYgKHMgPyBwLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHkgOiAxID09PSBwLm5vZGVUeXBlKSByZXR1cm4gITE7IGggPSBnID0gXCJvbmx5XCIgPT09IGUgJiYgIWggJiYgXCJuZXh0U2libGluZ1wiIH0gcmV0dXJuICEwIH0gaWYgKGggPSBbYSA/IG0uZmlyc3RDaGlsZCA6IG0ubGFzdENoaWxkXSwgYSAmJiB2KSB7IGMgPSBtW3hdIHx8IChtW3hdID0ge30pLCBsID0gY1tlXSB8fCBbXSwgZCA9IGxbMF0gPT09IE4gJiYgbFsxXSwgZiA9IGxbMF0gPT09IE4gJiYgbFsyXSwgcCA9IGQgJiYgbS5jaGlsZE5vZGVzW2RdOyB3aGlsZSAocCA9ICsrZCAmJiBwICYmIHBbZ10gfHwgKGYgPSBkID0gMCkgfHwgaC5wb3AoKSkgaWYgKDEgPT09IHAubm9kZVR5cGUgJiYgKytmICYmIHAgPT09IHQpIHsgY1tlXSA9IFtOLCBkLCBmXTsgYnJlYWsgfSB9IGVsc2UgaWYgKHYgJiYgKGwgPSAodFt4XSB8fCAodFt4XSA9IHt9KSlbZV0pICYmIGxbMF0gPT09IE4pIGYgPSBsWzFdOyBlbHNlIHdoaWxlIChwID0gKytkICYmIHAgJiYgcFtnXSB8fCAoZiA9IGQgPSAwKSB8fCBoLnBvcCgpKSBpZiAoKHMgPyBwLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHkgOiAxID09PSBwLm5vZGVUeXBlKSAmJiArK2YgJiYgKHYgJiYgKChwW3hdIHx8IChwW3hdID0ge30pKVtlXSA9IFtOLCBmXSksIHAgPT09IHQpKSBicmVhazsgcmV0dXJuIGYgLT0gaSwgZiA9PT0gciB8fCAwID09PSBmICUgciAmJiBmIC8gciA+PSAwIH0gfSB9LCBQU0VVRE86IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuLCByID0gaS5wc2V1ZG9zW2VdIHx8IGkuc2V0RmlsdGVyc1tlLnRvTG93ZXJDYXNlKCldIHx8IHN0LmVycm9yKFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIiArIGUpOyByZXR1cm4gclt4XSA/IHIodCkgOiByLmxlbmd0aCA+IDEgPyAobiA9IFtlLCBlLCBcIlwiLCB0XSwgaS5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSkgPyBvdChmdW5jdGlvbiAoZSwgbikgeyB2YXIgaSwgbyA9IHIoZSwgdCksIGEgPSBvLmxlbmd0aDsgd2hpbGUgKGEtLSkgaSA9IE0uY2FsbChlLCBvW2FdKSwgZVtpXSA9ICEobltpXSA9IG9bYV0pIH0pIDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHIoZSwgMCwgbikgfSkgOiByIH0gfSwgcHNldWRvczogeyBub3Q6IG90KGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gW10sIG4gPSBbXSwgciA9IHMoZS5yZXBsYWNlKFcsIFwiJDFcIikpOyByZXR1cm4gclt4XSA/IG90KGZ1bmN0aW9uIChlLCB0LCBuLCBpKSB7IHZhciBvLCBhID0gcihlLCBudWxsLCBpLCBbXSksIHMgPSBlLmxlbmd0aDsgd2hpbGUgKHMtLSkgKG8gPSBhW3NdKSAmJiAoZVtzXSA9ICEodFtzXSA9IG8pKSB9KSA6IGZ1bmN0aW9uIChlLCBpLCBvKSB7IHJldHVybiB0WzBdID0gZSwgcih0LCBudWxsLCBvLCBuKSwgIW4ucG9wKCkgfSB9KSwgaGFzOiBvdChmdW5jdGlvbiAoZSkgeyByZXR1cm4gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHN0KGUsIHQpLmxlbmd0aCA+IDAgfSB9KSwgY29udGFpbnM6IG90KGZ1bmN0aW9uIChlKSB7IHJldHVybiBmdW5jdGlvbiAodCkgeyByZXR1cm4gKHQudGV4dENvbnRlbnQgfHwgdC5pbm5lclRleHQgfHwgbyh0KSkuaW5kZXhPZihlKSA+IC0xIH0gfSksIGxhbmc6IG90KGZ1bmN0aW9uIChlKSB7IHJldHVybiBYLnRlc3QoZSB8fCBcIlwiKSB8fCBzdC5lcnJvcihcInVuc3VwcG9ydGVkIGxhbmc6IFwiICsgZSksIGUgPSBlLnJlcGxhY2UoZXQsIHR0KS50b0xvd2VyQ2FzZSgpLCBmdW5jdGlvbiAodCkgeyB2YXIgbjsgZG8gaWYgKG4gPSBkID8gdC5nZXRBdHRyaWJ1dGUoXCJ4bWw6bGFuZ1wiKSB8fCB0LmdldEF0dHJpYnV0ZShcImxhbmdcIikgOiB0LmxhbmcpIHJldHVybiBuID0gbi50b0xvd2VyQ2FzZSgpLCBuID09PSBlIHx8IDAgPT09IG4uaW5kZXhPZihlICsgXCItXCIpOyB3aGlsZSAoKHQgPSB0LnBhcmVudE5vZGUpICYmIDEgPT09IHQubm9kZVR5cGUpOyByZXR1cm4gITEgfSB9KSwgdGFyZ2V0OiBmdW5jdGlvbiAodCkgeyB2YXIgbiA9IGUubG9jYXRpb24gJiYgZS5sb2NhdGlvbi5oYXNoOyByZXR1cm4gbiAmJiBuLnNsaWNlKDEpID09PSB0LmlkIH0sIHJvb3Q6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlID09PSBmIH0sIGZvY3VzOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSA9PT0gcC5hY3RpdmVFbGVtZW50ICYmICghcC5oYXNGb2N1cyB8fCBwLmhhc0ZvY3VzKCkpICYmICEhKGUudHlwZSB8fCBlLmhyZWYgfHwgfmUudGFiSW5kZXgpIH0sIGVuYWJsZWQ6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLmRpc2FibGVkID09PSAhMSB9LCBkaXNhYmxlZDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUuZGlzYWJsZWQgPT09ICEwIH0sIGNoZWNrZWQ6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOyByZXR1cm4gXCJpbnB1dFwiID09PSB0ICYmICEhZS5jaGVja2VkIHx8IFwib3B0aW9uXCIgPT09IHQgJiYgISFlLnNlbGVjdGVkIH0sIHNlbGVjdGVkOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS5wYXJlbnROb2RlICYmIGUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LCBlLnNlbGVjdGVkID09PSAhMCB9LCBlbXB0eTogZnVuY3Rpb24gKGUpIHsgZm9yIChlID0gZS5maXJzdENoaWxkOyBlOyBlID0gZS5uZXh0U2libGluZykgaWYgKGUubm9kZU5hbWUgPiBcIkBcIiB8fCAzID09PSBlLm5vZGVUeXBlIHx8IDQgPT09IGUubm9kZVR5cGUpIHJldHVybiAhMTsgcmV0dXJuICEwIH0sIHBhcmVudDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuICFpLnBzZXVkb3MuZW1wdHkoZSkgfSwgaGVhZGVyOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gUS50ZXN0KGUubm9kZU5hbWUpIH0sIGlucHV0OiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gRy50ZXN0KGUubm9kZU5hbWUpIH0sIGJ1dHRvbjogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7IHJldHVybiBcImlucHV0XCIgPT09IHQgJiYgXCJidXR0b25cIiA9PT0gZS50eXBlIHx8IFwiYnV0dG9uXCIgPT09IHQgfSwgdGV4dDogZnVuY3Rpb24gKGUpIHsgdmFyIHQ7IHJldHVybiBcImlucHV0XCIgPT09IGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAmJiBcInRleHRcIiA9PT0gZS50eXBlICYmIChudWxsID09ICh0ID0gZS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKSB8fCB0LnRvTG93ZXJDYXNlKCkgPT09IGUudHlwZSkgfSwgZmlyc3Q6IHB0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIFswXSB9KSwgbGFzdDogcHQoZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIFt0IC0gMV0gfSksIGVxOiBwdChmdW5jdGlvbiAoZSwgdCwgbikgeyByZXR1cm4gWzAgPiBuID8gbiArIHQgOiBuXSB9KSwgZXZlbjogcHQoZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4gPSAwOyBmb3IgKDsgdCA+IG47IG4gKz0gMikgZS5wdXNoKG4pOyByZXR1cm4gZSB9KSwgb2RkOiBwdChmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IDE7IGZvciAoOyB0ID4gbjsgbiArPSAyKSBlLnB1c2gobik7IHJldHVybiBlIH0pLCBsdDogcHQoZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHIgPSAwID4gbiA/IG4gKyB0IDogbjsgZm9yICg7IC0tciA+PSAwOyApIGUucHVzaChyKTsgcmV0dXJuIGUgfSksIGd0OiBwdChmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciA9IDAgPiBuID8gbiArIHQgOiBuOyBmb3IgKDsgdCA+ICsrcjsgKSBlLnB1c2gocik7IHJldHVybiBlIH0pfSB9OyBmb3IgKG4gaW4geyByYWRpbzogITAsIGNoZWNrYm94OiAhMCwgZmlsZTogITAsIHBhc3N3b3JkOiAhMCwgaW1hZ2U6ICEwIH0pIGkucHNldWRvc1tuXSA9IGx0KG4pOyBmb3IgKG4gaW4geyBzdWJtaXQ6ICEwLCByZXNldDogITAgfSkgaS5wc2V1ZG9zW25dID0gY3Qobik7IGZ1bmN0aW9uIGZ0KGUsIHQpIHsgdmFyIG4sIHIsIG8sIGEsIHMsIHUsIGwsIGMgPSBFW2UgKyBcIiBcIl07IGlmIChjKSByZXR1cm4gdCA/IDAgOiBjLnNsaWNlKDApOyBzID0gZSwgdSA9IFtdLCBsID0gaS5wcmVGaWx0ZXI7IHdoaWxlIChzKSB7ICghbiB8fCAociA9ICQuZXhlYyhzKSkpICYmIChyICYmIChzID0gcy5zbGljZShyWzBdLmxlbmd0aCkgfHwgcyksIHUucHVzaChvID0gW10pKSwgbiA9ICExLCAociA9IEkuZXhlYyhzKSkgJiYgKG4gPSByLnNoaWZ0KCksIG8ucHVzaCh7IHZhbHVlOiBuLCB0eXBlOiByWzBdLnJlcGxhY2UoVywgXCIgXCIpIH0pLCBzID0gcy5zbGljZShuLmxlbmd0aCkpOyBmb3IgKGEgaW4gaS5maWx0ZXIpICEociA9IFVbYV0uZXhlYyhzKSkgfHwgbFthXSAmJiAhKHIgPSBsW2FdKHIpKSB8fCAobiA9IHIuc2hpZnQoKSwgby5wdXNoKHsgdmFsdWU6IG4sIHR5cGU6IGEsIG1hdGNoZXM6IHIgfSksIHMgPSBzLnNsaWNlKG4ubGVuZ3RoKSk7IGlmICghbikgYnJlYWsgfSByZXR1cm4gdCA/IHMubGVuZ3RoIDogcyA/IHN0LmVycm9yKGUpIDogRShlLCB1KS5zbGljZSgwKSB9IGZ1bmN0aW9uIGR0KGUpIHsgdmFyIHQgPSAwLCBuID0gZS5sZW5ndGgsIHIgPSBcIlwiOyBmb3IgKDsgbiA+IHQ7IHQrKykgciArPSBlW3RdLnZhbHVlOyByZXR1cm4gciB9IGZ1bmN0aW9uIGh0KGUsIHQsIG4pIHsgdmFyIGkgPSB0LmRpciwgbyA9IG4gJiYgXCJwYXJlbnROb2RlXCIgPT09IGksIGEgPSBDKys7IHJldHVybiB0LmZpcnN0ID8gZnVuY3Rpb24gKHQsIG4sIHIpIHsgd2hpbGUgKHQgPSB0W2ldKSBpZiAoMSA9PT0gdC5ub2RlVHlwZSB8fCBvKSByZXR1cm4gZSh0LCBuLCByKSB9IDogZnVuY3Rpb24gKHQsIG4sIHMpIHsgdmFyIHUsIGwsIGMsIHAgPSBOICsgXCIgXCIgKyBhOyBpZiAocykgeyB3aGlsZSAodCA9IHRbaV0pIGlmICgoMSA9PT0gdC5ub2RlVHlwZSB8fCBvKSAmJiBlKHQsIG4sIHMpKSByZXR1cm4gITAgfSBlbHNlIHdoaWxlICh0ID0gdFtpXSkgaWYgKDEgPT09IHQubm9kZVR5cGUgfHwgbykgaWYgKGMgPSB0W3hdIHx8ICh0W3hdID0ge30pLCAobCA9IGNbaV0pICYmIGxbMF0gPT09IHApIHsgaWYgKCh1ID0gbFsxXSkgPT09ICEwIHx8IHUgPT09IHIpIHJldHVybiB1ID09PSAhMCB9IGVsc2UgaWYgKGwgPSBjW2ldID0gW3BdLCBsWzFdID0gZSh0LCBuLCBzKSB8fCByLCBsWzFdID09PSAhMCkgcmV0dXJuICEwIH0gfSBmdW5jdGlvbiBndChlKSB7IHJldHVybiBlLmxlbmd0aCA+IDEgPyBmdW5jdGlvbiAodCwgbiwgcikgeyB2YXIgaSA9IGUubGVuZ3RoOyB3aGlsZSAoaS0tKSBpZiAoIWVbaV0odCwgbiwgcikpIHJldHVybiAhMTsgcmV0dXJuICEwIH0gOiBlWzBdIH0gZnVuY3Rpb24gbXQoZSwgdCwgbiwgciwgaSkgeyB2YXIgbywgYSA9IFtdLCBzID0gMCwgdSA9IGUubGVuZ3RoLCBsID0gbnVsbCAhPSB0OyBmb3IgKDsgdSA+IHM7IHMrKykgKG8gPSBlW3NdKSAmJiAoIW4gfHwgbihvLCByLCBpKSkgJiYgKGEucHVzaChvKSwgbCAmJiB0LnB1c2gocykpOyByZXR1cm4gYSB9IGZ1bmN0aW9uIHl0KGUsIHQsIG4sIHIsIGksIG8pIHsgcmV0dXJuIHIgJiYgIXJbeF0gJiYgKHIgPSB5dChyKSksIGkgJiYgIWlbeF0gJiYgKGkgPSB5dChpLCBvKSksIG90KGZ1bmN0aW9uIChvLCBhLCBzLCB1KSB7IHZhciBsLCBjLCBwLCBmID0gW10sIGQgPSBbXSwgaCA9IGEubGVuZ3RoLCBnID0gbyB8fCB4dCh0IHx8IFwiKlwiLCBzLm5vZGVUeXBlID8gW3NdIDogcywgW10pLCBtID0gIWUgfHwgIW8gJiYgdCA/IGcgOiBtdChnLCBmLCBlLCBzLCB1KSwgeSA9IG4gPyBpIHx8IChvID8gZSA6IGggfHwgcikgPyBbXSA6IGEgOiBtOyBpZiAobiAmJiBuKG0sIHksIHMsIHUpLCByKSB7IGwgPSBtdCh5LCBkKSwgcihsLCBbXSwgcywgdSksIGMgPSBsLmxlbmd0aDsgd2hpbGUgKGMtLSkgKHAgPSBsW2NdKSAmJiAoeVtkW2NdXSA9ICEobVtkW2NdXSA9IHApKSB9IGlmIChvKSB7IGlmIChpIHx8IGUpIHsgaWYgKGkpIHsgbCA9IFtdLCBjID0geS5sZW5ndGg7IHdoaWxlIChjLS0pIChwID0geVtjXSkgJiYgbC5wdXNoKG1bY10gPSBwKTsgaShudWxsLCB5ID0gW10sIGwsIHUpIH0gYyA9IHkubGVuZ3RoOyB3aGlsZSAoYy0tKSAocCA9IHlbY10pICYmIChsID0gaSA/IE0uY2FsbChvLCBwKSA6IGZbY10pID4gLTEgJiYgKG9bbF0gPSAhKGFbbF0gPSBwKSkgfSB9IGVsc2UgeSA9IG10KHkgPT09IGEgPyB5LnNwbGljZShoLCB5Lmxlbmd0aCkgOiB5KSwgaSA/IGkobnVsbCwgYSwgeSwgdSkgOiBILmFwcGx5KGEsIHkpIH0pIH0gZnVuY3Rpb24gdnQoZSkgeyB2YXIgdCwgbiwgciwgbyA9IGUubGVuZ3RoLCBhID0gaS5yZWxhdGl2ZVtlWzBdLnR5cGVdLCBzID0gYSB8fCBpLnJlbGF0aXZlW1wiIFwiXSwgdSA9IGEgPyAxIDogMCwgYyA9IGh0KGZ1bmN0aW9uIChlKSB7IHJldHVybiBlID09PSB0IH0sIHMsICEwKSwgcCA9IGh0KGZ1bmN0aW9uIChlKSB7IHJldHVybiBNLmNhbGwodCwgZSkgPiAtMSB9LCBzLCAhMCksIGYgPSBbZnVuY3Rpb24gKGUsIG4sIHIpIHsgcmV0dXJuICFhICYmIChyIHx8IG4gIT09IGwpIHx8ICgodCA9IG4pLm5vZGVUeXBlID8gYyhlLCBuLCByKSA6IHAoZSwgbiwgcikpIH0gXTsgZm9yICg7IG8gPiB1OyB1KyspIGlmIChuID0gaS5yZWxhdGl2ZVtlW3VdLnR5cGVdKSBmID0gW2h0KGd0KGYpLCBuKV07IGVsc2UgeyBpZiAobiA9IGkuZmlsdGVyW2VbdV0udHlwZV0uYXBwbHkobnVsbCwgZVt1XS5tYXRjaGVzKSwgblt4XSkgeyBmb3IgKHIgPSArK3U7IG8gPiByOyByKyspIGlmIChpLnJlbGF0aXZlW2Vbcl0udHlwZV0pIGJyZWFrOyByZXR1cm4geXQodSA+IDEgJiYgZ3QoZiksIHUgPiAxICYmIGR0KGUuc2xpY2UoMCwgdSAtIDEpKS5yZXBsYWNlKFcsIFwiJDFcIiksIG4sIHIgPiB1ICYmIHZ0KGUuc2xpY2UodSwgcikpLCBvID4gciAmJiB2dChlID0gZS5zbGljZShyKSksIG8gPiByICYmIGR0KGUpKSB9IGYucHVzaChuKSB9IHJldHVybiBndChmKSB9IGZ1bmN0aW9uIGJ0KGUsIHQpIHsgdmFyIG4gPSAwLCBvID0gdC5sZW5ndGggPiAwLCBhID0gZS5sZW5ndGggPiAwLCBzID0gZnVuY3Rpb24gKHMsIHUsIGMsIGYsIGQpIHsgdmFyIGgsIGcsIG0sIHkgPSBbXSwgdiA9IDAsIGIgPSBcIjBcIiwgeCA9IHMgJiYgW10sIHcgPSBudWxsICE9IGQsIFQgPSBsLCBDID0gcyB8fCBhICYmIGkuZmluZC5UQUcoXCIqXCIsIGQgJiYgdS5wYXJlbnROb2RlIHx8IHUpLCBrID0gTiArPSBudWxsID09IFQgPyAxIDogTWF0aC5yYW5kb20oKSB8fCAuMTsgZm9yICh3ICYmIChsID0gdSAhPT0gcCAmJiB1LCByID0gbik7IG51bGwgIT0gKGggPSBDW2JdKTsgYisrKSB7IGlmIChhICYmIGgpIHsgZyA9IDA7IHdoaWxlIChtID0gZVtnKytdKSBpZiAobShoLCB1LCBjKSkgeyBmLnB1c2goaCk7IGJyZWFrIH0gdyAmJiAoTiA9IGssIHIgPSArK24pIH0gbyAmJiAoKGggPSAhbSAmJiBoKSAmJiB2LS0sIHMgJiYgeC5wdXNoKGgpKSB9IGlmICh2ICs9IGIsIG8gJiYgYiAhPT0gdikgeyBnID0gMDsgd2hpbGUgKG0gPSB0W2crK10pIG0oeCwgeSwgdSwgYyk7IGlmIChzKSB7IGlmICh2ID4gMCkgd2hpbGUgKGItLSkgeFtiXSB8fCB5W2JdIHx8ICh5W2JdID0gTC5jYWxsKGYpKTsgeSA9IG10KHkpIH0gSC5hcHBseShmLCB5KSwgdyAmJiAhcyAmJiB5Lmxlbmd0aCA+IDAgJiYgdiArIHQubGVuZ3RoID4gMSAmJiBzdC51bmlxdWVTb3J0KGYpIH0gcmV0dXJuIHcgJiYgKE4gPSBrLCBsID0gVCksIHggfTsgcmV0dXJuIG8gPyBvdChzKSA6IHMgfSBzID0gc3QuY29tcGlsZSA9IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuLCByID0gW10sIGkgPSBbXSwgbyA9IFNbZSArIFwiIFwiXTsgaWYgKCFvKSB7IHQgfHwgKHQgPSBmdChlKSksIG4gPSB0Lmxlbmd0aDsgd2hpbGUgKG4tLSkgbyA9IHZ0KHRbbl0pLCBvW3hdID8gci5wdXNoKG8pIDogaS5wdXNoKG8pOyBvID0gUyhlLCBidChpLCByKSkgfSByZXR1cm4gbyB9OyBmdW5jdGlvbiB4dChlLCB0LCBuKSB7IHZhciByID0gMCwgaSA9IHQubGVuZ3RoOyBmb3IgKDsgaSA+IHI7IHIrKykgc3QoZSwgdFtyXSwgbik7IHJldHVybiBuIH0gZnVuY3Rpb24gd3QoZSwgdCwgbiwgcikgeyB2YXIgbywgYSwgdSwgbCwgYywgcCA9IGZ0KGUpOyBpZiAoIXIgJiYgMSA9PT0gcC5sZW5ndGgpIHsgaWYgKGEgPSBwWzBdID0gcFswXS5zbGljZSgwKSwgYS5sZW5ndGggPiAyICYmIFwiSURcIiA9PT0gKHUgPSBhWzBdKS50eXBlICYmIDkgPT09IHQubm9kZVR5cGUgJiYgIWQgJiYgaS5yZWxhdGl2ZVthWzFdLnR5cGVdKSB7IGlmICh0ID0gaS5maW5kLklEKHUubWF0Y2hlc1swXS5yZXBsYWNlKGV0LCB0dCksIHQpWzBdLCAhdCkgcmV0dXJuIG47IGUgPSBlLnNsaWNlKGEuc2hpZnQoKS52YWx1ZS5sZW5ndGgpIH0gbyA9IFUubmVlZHNDb250ZXh0LnRlc3QoZSkgPyAwIDogYS5sZW5ndGg7IHdoaWxlIChvLS0pIHsgaWYgKHUgPSBhW29dLCBpLnJlbGF0aXZlW2wgPSB1LnR5cGVdKSBicmVhazsgaWYgKChjID0gaS5maW5kW2xdKSAmJiAociA9IGModS5tYXRjaGVzWzBdLnJlcGxhY2UoZXQsIHR0KSwgVi50ZXN0KGFbMF0udHlwZSkgJiYgdC5wYXJlbnROb2RlIHx8IHQpKSkgeyBpZiAoYS5zcGxpY2UobywgMSksIGUgPSByLmxlbmd0aCAmJiBkdChhKSwgIWUpIHJldHVybiBILmFwcGx5KG4sIHEuY2FsbChyLCAwKSksIG47IGJyZWFrIH0gfSB9IHJldHVybiBzKGUsIHApKHIsIHQsIGQsIG4sIFYudGVzdChlKSksIG4gfSBpLnBzZXVkb3MubnRoID0gaS5wc2V1ZG9zLmVxOyBmdW5jdGlvbiBUdCgpIHsgfSBpLmZpbHRlcnMgPSBUdC5wcm90b3R5cGUgPSBpLnBzZXVkb3MsIGkuc2V0RmlsdGVycyA9IG5ldyBUdCwgYygpLCBzdC5hdHRyID0gYi5hdHRyLCBiLmZpbmQgPSBzdCwgYi5leHByID0gc3Quc2VsZWN0b3JzLCBiLmV4cHJbXCI6XCJdID0gYi5leHByLnBzZXVkb3MsIGIudW5pcXVlID0gc3QudW5pcXVlU29ydCwgYi50ZXh0ID0gc3QuZ2V0VGV4dCwgYi5pc1hNTERvYyA9IHN0LmlzWE1MLCBiLmNvbnRhaW5zID0gc3QuY29udGFpbnMgfSAoZSk7IHZhciBhdCA9IC9VbnRpbCQvLCBzdCA9IC9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLCB1dCA9IC9eLlteOiNcXFtcXC4sXSokLywgbHQgPSBiLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LCBjdCA9IHsgY2hpbGRyZW46ICEwLCBjb250ZW50czogITAsIG5leHQ6ICEwLCBwcmV2OiAhMCB9OyBiLmZuLmV4dGVuZCh7IGZpbmQ6IGZ1bmN0aW9uIChlKSB7IHZhciB0LCBuLCByLCBpID0gdGhpcy5sZW5ndGg7IGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiBlKSByZXR1cm4gciA9IHRoaXMsIHRoaXMucHVzaFN0YWNrKGIoZSkuZmlsdGVyKGZ1bmN0aW9uICgpIHsgZm9yICh0ID0gMDsgaSA+IHQ7IHQrKykgaWYgKGIuY29udGFpbnMoclt0XSwgdGhpcykpIHJldHVybiAhMCB9KSk7IGZvciAobiA9IFtdLCB0ID0gMDsgaSA+IHQ7IHQrKykgYi5maW5kKGUsIHRoaXNbdF0sIG4pOyByZXR1cm4gbiA9IHRoaXMucHVzaFN0YWNrKGkgPiAxID8gYi51bmlxdWUobikgOiBuKSwgbi5zZWxlY3RvciA9ICh0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArIFwiIFwiIDogXCJcIikgKyBlLCBuIH0sIGhhczogZnVuY3Rpb24gKGUpIHsgdmFyIHQsIG4gPSBiKGUsIHRoaXMpLCByID0gbi5sZW5ndGg7IHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbiAoKSB7IGZvciAodCA9IDA7IHIgPiB0OyB0KyspIGlmIChiLmNvbnRhaW5zKHRoaXMsIG5bdF0pKSByZXR1cm4gITAgfSkgfSwgbm90OiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gdGhpcy5wdXNoU3RhY2soZnQodGhpcywgZSwgITEpKSB9LCBmaWx0ZXI6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLCBlLCAhMCkpIH0sIGlzOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gISFlICYmIChcInN0cmluZ1wiID09IHR5cGVvZiBlID8gbHQudGVzdChlKSA/IGIoZSwgdGhpcy5jb250ZXh0KS5pbmRleCh0aGlzWzBdKSA+PSAwIDogYi5maWx0ZXIoZSwgdGhpcykubGVuZ3RoID4gMCA6IHRoaXMuZmlsdGVyKGUpLmxlbmd0aCA+IDApIH0sIGNsb3Nlc3Q6IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuLCByID0gMCwgaSA9IHRoaXMubGVuZ3RoLCBvID0gW10sIGEgPSBsdC50ZXN0KGUpIHx8IFwic3RyaW5nXCIgIT0gdHlwZW9mIGUgPyBiKGUsIHQgfHwgdGhpcy5jb250ZXh0KSA6IDA7IGZvciAoOyBpID4gcjsgcisrKSB7IG4gPSB0aGlzW3JdOyB3aGlsZSAobiAmJiBuLm93bmVyRG9jdW1lbnQgJiYgbiAhPT0gdCAmJiAxMSAhPT0gbi5ub2RlVHlwZSkgeyBpZiAoYSA/IGEuaW5kZXgobikgPiAtMSA6IGIuZmluZC5tYXRjaGVzU2VsZWN0b3IobiwgZSkpIHsgby5wdXNoKG4pOyBicmVhayB9IG4gPSBuLnBhcmVudE5vZGUgfSB9IHJldHVybiB0aGlzLnB1c2hTdGFjayhvLmxlbmd0aCA+IDEgPyBiLnVuaXF1ZShvKSA6IG8pIH0sIGluZGV4OiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSA/IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBiLmluQXJyYXkodGhpc1swXSwgYihlKSkgOiBiLmluQXJyYXkoZS5qcXVlcnkgPyBlWzBdIDogZSwgdGhpcykgOiB0aGlzWzBdICYmIHRoaXNbMF0ucGFyZW50Tm9kZSA/IHRoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoIDogLTEgfSwgYWRkOiBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBiKGUsIHQpIDogYi5tYWtlQXJyYXkoZSAmJiBlLm5vZGVUeXBlID8gW2VdIDogZSksIHIgPSBiLm1lcmdlKHRoaXMuZ2V0KCksIG4pOyByZXR1cm4gdGhpcy5wdXNoU3RhY2soYi51bmlxdWUocikpIH0sIGFkZEJhY2s6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLmFkZChudWxsID09IGUgPyB0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKSB9IH0pLCBiLmZuLmFuZFNlbGYgPSBiLmZuLmFkZEJhY2s7IGZ1bmN0aW9uIHB0KGUsIHQpIHsgZG8gZSA9IGVbdF07IHdoaWxlIChlICYmIDEgIT09IGUubm9kZVR5cGUpOyByZXR1cm4gZSB9IGIuZWFjaCh7IHBhcmVudDogZnVuY3Rpb24gKGUpIHsgdmFyIHQgPSBlLnBhcmVudE5vZGU7IHJldHVybiB0ICYmIDExICE9PSB0Lm5vZGVUeXBlID8gdCA6IG51bGwgfSwgcGFyZW50czogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGIuZGlyKGUsIFwicGFyZW50Tm9kZVwiKSB9LCBwYXJlbnRzVW50aWw6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiBiLmRpcihlLCBcInBhcmVudE5vZGVcIiwgbikgfSwgbmV4dDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHB0KGUsIFwibmV4dFNpYmxpbmdcIikgfSwgcHJldjogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHB0KGUsIFwicHJldmlvdXNTaWJsaW5nXCIpIH0sIG5leHRBbGw6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBiLmRpcihlLCBcIm5leHRTaWJsaW5nXCIpIH0sIHByZXZBbGw6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBiLmRpcihlLCBcInByZXZpb3VzU2libGluZ1wiKSB9LCBuZXh0VW50aWw6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiBiLmRpcihlLCBcIm5leHRTaWJsaW5nXCIsIG4pIH0sIHByZXZVbnRpbDogZnVuY3Rpb24gKGUsIHQsIG4pIHsgcmV0dXJuIGIuZGlyKGUsIFwicHJldmlvdXNTaWJsaW5nXCIsIG4pIH0sIHNpYmxpbmdzOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gYi5zaWJsaW5nKChlLnBhcmVudE5vZGUgfHwge30pLmZpcnN0Q2hpbGQsIGUpIH0sIGNoaWxkcmVuOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gYi5zaWJsaW5nKGUuZmlyc3RDaGlsZCkgfSwgY29udGVudHM6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBiLm5vZGVOYW1lKGUsIFwiaWZyYW1lXCIpID8gZS5jb250ZW50RG9jdW1lbnQgfHwgZS5jb250ZW50V2luZG93LmRvY3VtZW50IDogYi5tZXJnZShbXSwgZS5jaGlsZE5vZGVzKSB9IH0sIGZ1bmN0aW9uIChlLCB0KSB7IGIuZm5bZV0gPSBmdW5jdGlvbiAobiwgcikgeyB2YXIgaSA9IGIubWFwKHRoaXMsIHQsIG4pOyByZXR1cm4gYXQudGVzdChlKSB8fCAociA9IG4pLCByICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHIgJiYgKGkgPSBiLmZpbHRlcihyLCBpKSksIGkgPSB0aGlzLmxlbmd0aCA+IDEgJiYgIWN0W2VdID8gYi51bmlxdWUoaSkgOiBpLCB0aGlzLmxlbmd0aCA+IDEgJiYgc3QudGVzdChlKSAmJiAoaSA9IGkucmV2ZXJzZSgpKSwgdGhpcy5wdXNoU3RhY2soaSkgfSB9KSwgYi5leHRlbmQoeyBmaWx0ZXI6IGZ1bmN0aW9uIChlLCB0LCBuKSB7IHJldHVybiBuICYmIChlID0gXCI6bm90KFwiICsgZSArIFwiKVwiKSwgMSA9PT0gdC5sZW5ndGggPyBiLmZpbmQubWF0Y2hlc1NlbGVjdG9yKHRbMF0sIGUpID8gW3RbMF1dIDogW10gOiBiLmZpbmQubWF0Y2hlcyhlLCB0KSB9LCBkaXI6IGZ1bmN0aW9uIChlLCBuLCByKSB7IHZhciBpID0gW10sIG8gPSBlW25dOyB3aGlsZSAobyAmJiA5ICE9PSBvLm5vZGVUeXBlICYmIChyID09PSB0IHx8IDEgIT09IG8ubm9kZVR5cGUgfHwgIWIobykuaXMocikpKSAxID09PSBvLm5vZGVUeXBlICYmIGkucHVzaChvKSwgbyA9IG9bbl07IHJldHVybiBpIH0sIHNpYmxpbmc6IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuID0gW107IGZvciAoOyBlOyBlID0gZS5uZXh0U2libGluZykgMSA9PT0gZS5ub2RlVHlwZSAmJiBlICE9PSB0ICYmIG4ucHVzaChlKTsgcmV0dXJuIG4gfSB9KTsgZnVuY3Rpb24gZnQoZSwgdCwgbikgeyBpZiAodCA9IHQgfHwgMCwgYi5pc0Z1bmN0aW9uKHQpKSByZXR1cm4gYi5ncmVwKGUsIGZ1bmN0aW9uIChlLCByKSB7IHZhciBpID0gISF0LmNhbGwoZSwgciwgZSk7IHJldHVybiBpID09PSBuIH0pOyBpZiAodC5ub2RlVHlwZSkgcmV0dXJuIGIuZ3JlcChlLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSA9PT0gdCA9PT0gbiB9KTsgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHsgdmFyIHIgPSBiLmdyZXAoZSwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIDEgPT09IGUubm9kZVR5cGUgfSk7IGlmICh1dC50ZXN0KHQpKSByZXR1cm4gYi5maWx0ZXIodCwgciwgIW4pOyB0ID0gYi5maWx0ZXIodCwgcikgfSByZXR1cm4gYi5ncmVwKGUsIGZ1bmN0aW9uIChlKSB7IHJldHVybiBiLmluQXJyYXkoZSwgdCkgPj0gMCA9PT0gbiB9KSB9IGZ1bmN0aW9uIGR0KGUpIHsgdmFyIHQgPSBodC5zcGxpdChcInxcIiksIG4gPSBlLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsgaWYgKG4uY3JlYXRlRWxlbWVudCkgd2hpbGUgKHQubGVuZ3RoKSBuLmNyZWF0ZUVsZW1lbnQodC5wb3AoKSk7IHJldHVybiBuIH0gdmFyIGh0ID0gXCJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGhlYWRlcnxoZ3JvdXB8bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHByb2dyZXNzfHNlY3Rpb258c3VtbWFyeXx0aW1lfHZpZGVvXCIsIGd0ID0gLyBqUXVlcnlcXGQrPVwiKD86bnVsbHxcXGQrKVwiL2csIG10ID0gUmVnRXhwKFwiPCg/OlwiICsgaHQgKyBcIilbXFxcXHMvPl1cIiwgXCJpXCIpLCB5dCA9IC9eXFxzKy8sIHZ0ID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLCBidCA9IC88KFtcXHc6XSspLywgeHQgPSAvPHRib2R5L2ksIHd0ID0gLzx8JiM/XFx3KzsvLCBUdCA9IC88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksIE50ID0gL14oPzpjaGVja2JveHxyYWRpbykkL2ksIEN0ID0gL2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSwga3QgPSAvXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLCBFdCA9IC9edHJ1ZVxcLyguKikvLCBTdCA9IC9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZywgQXQgPSB7IG9wdGlvbjogWzEsIFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLCBcIjwvc2VsZWN0PlwiXSwgbGVnZW5kOiBbMSwgXCI8ZmllbGRzZXQ+XCIsIFwiPC9maWVsZHNldD5cIl0sIGFyZWE6IFsxLCBcIjxtYXA+XCIsIFwiPC9tYXA+XCJdLCBwYXJhbTogWzEsIFwiPG9iamVjdD5cIiwgXCI8L29iamVjdD5cIl0sIHRoZWFkOiBbMSwgXCI8dGFibGU+XCIsIFwiPC90YWJsZT5cIl0sIHRyOiBbMiwgXCI8dGFibGU+PHRib2R5PlwiLCBcIjwvdGJvZHk+PC90YWJsZT5cIl0sIGNvbDogWzIsIFwiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD5cIiwgXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLCB0ZDogWzMsIFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsIFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLCBfZGVmYXVsdDogYi5zdXBwb3J0Lmh0bWxTZXJpYWxpemUgPyBbMCwgXCJcIiwgXCJcIl0gOiBbMSwgXCJYPGRpdj5cIiwgXCI8L2Rpdj5cIl0gfSwganQgPSBkdChvKSwgRHQgPSBqdC5hcHBlbmRDaGlsZChvLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpOyBBdC5vcHRncm91cCA9IEF0Lm9wdGlvbiwgQXQudGJvZHkgPSBBdC50Zm9vdCA9IEF0LmNvbGdyb3VwID0gQXQuY2FwdGlvbiA9IEF0LnRoZWFkLCBBdC50aCA9IEF0LnRkLCBiLmZuLmV4dGVuZCh7IHRleHQ6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBiLmFjY2Vzcyh0aGlzLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZSA9PT0gdCA/IGIudGV4dCh0aGlzKSA6IHRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0gJiYgdGhpc1swXS5vd25lckRvY3VtZW50IHx8IG8pLmNyZWF0ZVRleHROb2RlKGUpKSB9LCBudWxsLCBlLCBhcmd1bWVudHMubGVuZ3RoKSB9LCB3cmFwQWxsOiBmdW5jdGlvbiAoZSkgeyBpZiAoYi5pc0Z1bmN0aW9uKGUpKSByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh0KSB7IGIodGhpcykud3JhcEFsbChlLmNhbGwodGhpcywgdCkpIH0pOyBpZiAodGhpc1swXSkgeyB2YXIgdCA9IGIoZSwgdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCk7IHRoaXNbMF0ucGFyZW50Tm9kZSAmJiB0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSwgdC5tYXAoZnVuY3Rpb24gKCkgeyB2YXIgZSA9IHRoaXM7IHdoaWxlIChlLmZpcnN0Q2hpbGQgJiYgMSA9PT0gZS5maXJzdENoaWxkLm5vZGVUeXBlKSBlID0gZS5maXJzdENoaWxkOyByZXR1cm4gZSB9KS5hcHBlbmQodGhpcykgfSByZXR1cm4gdGhpcyB9LCB3cmFwSW5uZXI6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBiLmlzRnVuY3Rpb24oZSkgPyB0aGlzLmVhY2goZnVuY3Rpb24gKHQpIHsgYih0aGlzKS53cmFwSW5uZXIoZS5jYWxsKHRoaXMsIHQpKSB9KSA6IHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IHZhciB0ID0gYih0aGlzKSwgbiA9IHQuY29udGVudHMoKTsgbi5sZW5ndGggPyBuLndyYXBBbGwoZSkgOiB0LmFwcGVuZChlKSB9KSB9LCB3cmFwOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGIuaXNGdW5jdGlvbihlKTsgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAobikgeyBiKHRoaXMpLndyYXBBbGwodCA/IGUuY2FsbCh0aGlzLCBuKSA6IGUpIH0pIH0sIHVud3JhcDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uICgpIHsgYi5ub2RlTmFtZSh0aGlzLCBcImJvZHlcIikgfHwgYih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpIH0pLmVuZCgpIH0sIGFwcGVuZDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsICEwLCBmdW5jdGlvbiAoZSkgeyAoMSA9PT0gdGhpcy5ub2RlVHlwZSB8fCAxMSA9PT0gdGhpcy5ub2RlVHlwZSB8fCA5ID09PSB0aGlzLm5vZGVUeXBlKSAmJiB0aGlzLmFwcGVuZENoaWxkKGUpIH0pIH0sIHByZXBlbmQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCAhMCwgZnVuY3Rpb24gKGUpIHsgKDEgPT09IHRoaXMubm9kZVR5cGUgfHwgMTEgPT09IHRoaXMubm9kZVR5cGUgfHwgOSA9PT0gdGhpcy5ub2RlVHlwZSkgJiYgdGhpcy5pbnNlcnRCZWZvcmUoZSwgdGhpcy5maXJzdENoaWxkKSB9KSB9LCBiZWZvcmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCAhMSwgZnVuY3Rpb24gKGUpIHsgdGhpcy5wYXJlbnROb2RlICYmIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSwgdGhpcykgfSkgfSwgYWZ0ZXI6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLCAhMSwgZnVuY3Rpb24gKGUpIHsgdGhpcy5wYXJlbnROb2RlICYmIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSwgdGhpcy5uZXh0U2libGluZykgfSkgfSwgcmVtb3ZlOiBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiwgciA9IDA7IGZvciAoOyBudWxsICE9IChuID0gdGhpc1tyXSk7IHIrKykgKCFlIHx8IGIuZmlsdGVyKGUsIFtuXSkubGVuZ3RoID4gMCkgJiYgKHQgfHwgMSAhPT0gbi5ub2RlVHlwZSB8fCBiLmNsZWFuRGF0YShPdChuKSksIG4ucGFyZW50Tm9kZSAmJiAodCAmJiBiLmNvbnRhaW5zKG4ub3duZXJEb2N1bWVudCwgbikgJiYgTXQoT3QobiwgXCJzY3JpcHRcIikpLCBuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpKTsgcmV0dXJuIHRoaXMgfSwgZW1wdHk6IGZ1bmN0aW9uICgpIHsgdmFyIGUsIHQgPSAwOyBmb3IgKDsgbnVsbCAhPSAoZSA9IHRoaXNbdF0pOyB0KyspIHsgMSA9PT0gZS5ub2RlVHlwZSAmJiBiLmNsZWFuRGF0YShPdChlLCAhMSkpOyB3aGlsZSAoZS5maXJzdENoaWxkKSBlLnJlbW92ZUNoaWxkKGUuZmlyc3RDaGlsZCk7IGUub3B0aW9ucyAmJiBiLm5vZGVOYW1lKGUsIFwic2VsZWN0XCIpICYmIChlLm9wdGlvbnMubGVuZ3RoID0gMCkgfSByZXR1cm4gdGhpcyB9LCBjbG9uZTogZnVuY3Rpb24gKGUsIHQpIHsgcmV0dXJuIGUgPSBudWxsID09IGUgPyAhMSA6IGUsIHQgPSBudWxsID09IHQgPyBlIDogdCwgdGhpcy5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gYi5jbG9uZSh0aGlzLCBlLCB0KSB9KSB9LCBodG1sOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gYi5hY2Nlc3ModGhpcywgZnVuY3Rpb24gKGUpIHsgdmFyIG4gPSB0aGlzWzBdIHx8IHt9LCByID0gMCwgaSA9IHRoaXMubGVuZ3RoOyBpZiAoZSA9PT0gdCkgcmV0dXJuIDEgPT09IG4ubm9kZVR5cGUgPyBuLmlubmVySFRNTC5yZXBsYWNlKGd0LCBcIlwiKSA6IHQ7IGlmICghKFwic3RyaW5nXCIgIT0gdHlwZW9mIGUgfHwgVHQudGVzdChlKSB8fCAhYi5zdXBwb3J0Lmh0bWxTZXJpYWxpemUgJiYgbXQudGVzdChlKSB8fCAhYi5zdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlICYmIHl0LnRlc3QoZSkgfHwgQXRbKGJ0LmV4ZWMoZSkgfHwgW1wiXCIsIFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpXSkpIHsgZSA9IGUucmVwbGFjZSh2dCwgXCI8JDE+PC8kMj5cIik7IHRyeSB7IGZvciAoOyBpID4gcjsgcisrKSBuID0gdGhpc1tyXSB8fCB7fSwgMSA9PT0gbi5ub2RlVHlwZSAmJiAoYi5jbGVhbkRhdGEoT3QobiwgITEpKSwgbi5pbm5lckhUTUwgPSBlKTsgbiA9IDAgfSBjYXRjaCAobykgeyB9IH0gbiAmJiB0aGlzLmVtcHR5KCkuYXBwZW5kKGUpIH0sIG51bGwsIGUsIGFyZ3VtZW50cy5sZW5ndGgpIH0sIHJlcGxhY2VXaXRoOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGIuaXNGdW5jdGlvbihlKTsgcmV0dXJuIHQgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSB8fCAoZSA9IGIoZSkubm90KHRoaXMpLmRldGFjaCgpKSwgdGhpcy5kb21NYW5pcChbZV0sICEwLCBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IHRoaXMubmV4dFNpYmxpbmcsIG4gPSB0aGlzLnBhcmVudE5vZGU7IG4gJiYgKGIodGhpcykucmVtb3ZlKCksIG4uaW5zZXJ0QmVmb3JlKGUsIHQpKSB9KSB9LCBkZXRhY2g6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB0aGlzLnJlbW92ZShlLCAhMCkgfSwgZG9tTWFuaXA6IGZ1bmN0aW9uIChlLCBuLCByKSB7IGUgPSBmLmFwcGx5KFtdLCBlKTsgdmFyIGksIG8sIGEsIHMsIHUsIGwsIGMgPSAwLCBwID0gdGhpcy5sZW5ndGgsIGQgPSB0aGlzLCBoID0gcCAtIDEsIGcgPSBlWzBdLCBtID0gYi5pc0Z1bmN0aW9uKGcpOyBpZiAobSB8fCAhKDEgPj0gcCB8fCBcInN0cmluZ1wiICE9IHR5cGVvZiBnIHx8IGIuc3VwcG9ydC5jaGVja0Nsb25lKSAmJiBDdC50ZXN0KGcpKSByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uIChpKSB7IHZhciBvID0gZC5lcShpKTsgbSAmJiAoZVswXSA9IGcuY2FsbCh0aGlzLCBpLCBuID8gby5odG1sKCkgOiB0KSksIG8uZG9tTWFuaXAoZSwgbiwgcikgfSk7IGlmIChwICYmIChsID0gYi5idWlsZEZyYWdtZW50KGUsIHRoaXNbMF0ub3duZXJEb2N1bWVudCwgITEsIHRoaXMpLCBpID0gbC5maXJzdENoaWxkLCAxID09PSBsLmNoaWxkTm9kZXMubGVuZ3RoICYmIChsID0gaSksIGkpKSB7IGZvciAobiA9IG4gJiYgYi5ub2RlTmFtZShpLCBcInRyXCIpLCBzID0gYi5tYXAoT3QobCwgXCJzY3JpcHRcIiksIEh0KSwgYSA9IHMubGVuZ3RoOyBwID4gYzsgYysrKSBvID0gbCwgYyAhPT0gaCAmJiAobyA9IGIuY2xvbmUobywgITAsICEwKSwgYSAmJiBiLm1lcmdlKHMsIE90KG8sIFwic2NyaXB0XCIpKSksIHIuY2FsbChuICYmIGIubm9kZU5hbWUodGhpc1tjXSwgXCJ0YWJsZVwiKSA/IEx0KHRoaXNbY10sIFwidGJvZHlcIikgOiB0aGlzW2NdLCBvLCBjKTsgaWYgKGEpIGZvciAodSA9IHNbcy5sZW5ndGggLSAxXS5vd25lckRvY3VtZW50LCBiLm1hcChzLCBxdCksIGMgPSAwOyBhID4gYzsgYysrKSBvID0gc1tjXSwga3QudGVzdChvLnR5cGUgfHwgXCJcIikgJiYgIWIuX2RhdGEobywgXCJnbG9iYWxFdmFsXCIpICYmIGIuY29udGFpbnModSwgbykgJiYgKG8uc3JjID8gYi5hamF4KHsgdXJsOiBvLnNyYywgdHlwZTogXCJHRVRcIiwgZGF0YVR5cGU6IFwic2NyaXB0XCIsIGFzeW5jOiAhMSwgZ2xvYmFsOiAhMSwgXCJ0aHJvd3NcIjogITAgfSkgOiBiLmdsb2JhbEV2YWwoKG8udGV4dCB8fCBvLnRleHRDb250ZW50IHx8IG8uaW5uZXJIVE1MIHx8IFwiXCIpLnJlcGxhY2UoU3QsIFwiXCIpKSk7IGwgPSBpID0gbnVsbCB9IHJldHVybiB0aGlzIH0gfSk7IGZ1bmN0aW9uIEx0KGUsIHQpIHsgcmV0dXJuIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUodClbMF0gfHwgZS5hcHBlbmRDaGlsZChlLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KSkgfSBmdW5jdGlvbiBIdChlKSB7IHZhciB0ID0gZS5nZXRBdHRyaWJ1dGVOb2RlKFwidHlwZVwiKTsgcmV0dXJuIGUudHlwZSA9ICh0ICYmIHQuc3BlY2lmaWVkKSArIFwiL1wiICsgZS50eXBlLCBlIH0gZnVuY3Rpb24gcXQoZSkgeyB2YXIgdCA9IEV0LmV4ZWMoZS50eXBlKTsgcmV0dXJuIHQgPyBlLnR5cGUgPSB0WzFdIDogZS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpLCBlIH0gZnVuY3Rpb24gTXQoZSwgdCkgeyB2YXIgbiwgciA9IDA7IGZvciAoOyBudWxsICE9IChuID0gZVtyXSk7IHIrKykgYi5fZGF0YShuLCBcImdsb2JhbEV2YWxcIiwgIXQgfHwgYi5fZGF0YSh0W3JdLCBcImdsb2JhbEV2YWxcIikpIH0gZnVuY3Rpb24gX3QoZSwgdCkgeyBpZiAoMSA9PT0gdC5ub2RlVHlwZSAmJiBiLmhhc0RhdGEoZSkpIHsgdmFyIG4sIHIsIGksIG8gPSBiLl9kYXRhKGUpLCBhID0gYi5fZGF0YSh0LCBvKSwgcyA9IG8uZXZlbnRzOyBpZiAocykgeyBkZWxldGUgYS5oYW5kbGUsIGEuZXZlbnRzID0ge307IGZvciAobiBpbiBzKSBmb3IgKHIgPSAwLCBpID0gc1tuXS5sZW5ndGg7IGkgPiByOyByKyspIGIuZXZlbnQuYWRkKHQsIG4sIHNbbl1bcl0pIH0gYS5kYXRhICYmIChhLmRhdGEgPSBiLmV4dGVuZCh7fSwgYS5kYXRhKSkgfSB9IGZ1bmN0aW9uIEZ0KGUsIHQpIHsgdmFyIG4sIHIsIGk7IGlmICgxID09PSB0Lm5vZGVUeXBlKSB7IGlmIChuID0gdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCAhYi5zdXBwb3J0Lm5vQ2xvbmVFdmVudCAmJiB0W2IuZXhwYW5kb10pIHsgaSA9IGIuX2RhdGEodCk7IGZvciAociBpbiBpLmV2ZW50cykgYi5yZW1vdmVFdmVudCh0LCByLCBpLmhhbmRsZSk7IHQucmVtb3ZlQXR0cmlidXRlKGIuZXhwYW5kbykgfSBcInNjcmlwdFwiID09PSBuICYmIHQudGV4dCAhPT0gZS50ZXh0ID8gKEh0KHQpLnRleHQgPSBlLnRleHQsIHF0KHQpKSA6IFwib2JqZWN0XCIgPT09IG4gPyAodC5wYXJlbnROb2RlICYmICh0Lm91dGVySFRNTCA9IGUub3V0ZXJIVE1MKSwgYi5zdXBwb3J0Lmh0bWw1Q2xvbmUgJiYgZS5pbm5lckhUTUwgJiYgIWIudHJpbSh0LmlubmVySFRNTCkgJiYgKHQuaW5uZXJIVE1MID0gZS5pbm5lckhUTUwpKSA6IFwiaW5wdXRcIiA9PT0gbiAmJiBOdC50ZXN0KGUudHlwZSkgPyAodC5kZWZhdWx0Q2hlY2tlZCA9IHQuY2hlY2tlZCA9IGUuY2hlY2tlZCwgdC52YWx1ZSAhPT0gZS52YWx1ZSAmJiAodC52YWx1ZSA9IGUudmFsdWUpKSA6IFwib3B0aW9uXCIgPT09IG4gPyB0LmRlZmF1bHRTZWxlY3RlZCA9IHQuc2VsZWN0ZWQgPSBlLmRlZmF1bHRTZWxlY3RlZCA6IChcImlucHV0XCIgPT09IG4gfHwgXCJ0ZXh0YXJlYVwiID09PSBuKSAmJiAodC5kZWZhdWx0VmFsdWUgPSBlLmRlZmF1bHRWYWx1ZSkgfSB9IGIuZWFjaCh7IGFwcGVuZFRvOiBcImFwcGVuZFwiLCBwcmVwZW5kVG86IFwicHJlcGVuZFwiLCBpbnNlcnRCZWZvcmU6IFwiYmVmb3JlXCIsIGluc2VydEFmdGVyOiBcImFmdGVyXCIsIHJlcGxhY2VBbGw6IFwicmVwbGFjZVdpdGhcIiB9LCBmdW5jdGlvbiAoZSwgdCkgeyBiLmZuW2VdID0gZnVuY3Rpb24gKGUpIHsgdmFyIG4sIHIgPSAwLCBpID0gW10sIG8gPSBiKGUpLCBhID0gby5sZW5ndGggLSAxOyBmb3IgKDsgYSA+PSByOyByKyspIG4gPSByID09PSBhID8gdGhpcyA6IHRoaXMuY2xvbmUoITApLCBiKG9bcl0pW3RdKG4pLCBkLmFwcGx5KGksIG4uZ2V0KCkpOyByZXR1cm4gdGhpcy5wdXNoU3RhY2soaSkgfSB9KTsgZnVuY3Rpb24gT3QoZSwgbikgeyB2YXIgciwgbywgYSA9IDAsIHMgPSB0eXBlb2YgZS5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gaSA/IGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUobiB8fCBcIipcIikgOiB0eXBlb2YgZS5xdWVyeVNlbGVjdG9yQWxsICE9PSBpID8gZS5xdWVyeVNlbGVjdG9yQWxsKG4gfHwgXCIqXCIpIDogdDsgaWYgKCFzKSBmb3IgKHMgPSBbXSwgciA9IGUuY2hpbGROb2RlcyB8fCBlOyBudWxsICE9IChvID0gclthXSk7IGErKykgIW4gfHwgYi5ub2RlTmFtZShvLCBuKSA/IHMucHVzaChvKSA6IGIubWVyZ2UocywgT3QobywgbikpOyByZXR1cm4gbiA9PT0gdCB8fCBuICYmIGIubm9kZU5hbWUoZSwgbikgPyBiLm1lcmdlKFtlXSwgcykgOiBzIH0gZnVuY3Rpb24gQnQoZSkgeyBOdC50ZXN0KGUudHlwZSkgJiYgKGUuZGVmYXVsdENoZWNrZWQgPSBlLmNoZWNrZWQpIH0gYi5leHRlbmQoeyBjbG9uZTogZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHIsIGksIG8sIGEsIHMsIHUgPSBiLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCwgZSk7IGlmIChiLnN1cHBvcnQuaHRtbDVDbG9uZSB8fCBiLmlzWE1MRG9jKGUpIHx8ICFtdC50ZXN0KFwiPFwiICsgZS5ub2RlTmFtZSArIFwiPlwiKSA/IG8gPSBlLmNsb25lTm9kZSghMCkgOiAoRHQuaW5uZXJIVE1MID0gZS5vdXRlckhUTUwsIER0LnJlbW92ZUNoaWxkKG8gPSBEdC5maXJzdENoaWxkKSksICEoYi5zdXBwb3J0Lm5vQ2xvbmVFdmVudCAmJiBiLnN1cHBvcnQubm9DbG9uZUNoZWNrZWQgfHwgMSAhPT0gZS5ub2RlVHlwZSAmJiAxMSAhPT0gZS5ub2RlVHlwZSB8fCBiLmlzWE1MRG9jKGUpKSkgZm9yIChyID0gT3QobyksIHMgPSBPdChlKSwgYSA9IDA7IG51bGwgIT0gKGkgPSBzW2FdKTsgKythKSByW2FdICYmIEZ0KGksIHJbYV0pOyBpZiAodCkgaWYgKG4pIGZvciAocyA9IHMgfHwgT3QoZSksIHIgPSByIHx8IE90KG8pLCBhID0gMDsgbnVsbCAhPSAoaSA9IHNbYV0pOyBhKyspIF90KGksIHJbYV0pOyBlbHNlIF90KGUsIG8pOyByZXR1cm4gciA9IE90KG8sIFwic2NyaXB0XCIpLCByLmxlbmd0aCA+IDAgJiYgTXQociwgIXUgJiYgT3QoZSwgXCJzY3JpcHRcIikpLCByID0gcyA9IGkgPSBudWxsLCBvIH0sIGJ1aWxkRnJhZ21lbnQ6IGZ1bmN0aW9uIChlLCB0LCBuLCByKSB7XHJcbiAgICAgICAgdmFyIGksIG8sIGEsIHMsIHUsIGwsIGMsIHAgPSBlLmxlbmd0aCwgZiA9IGR0KHQpLCBkID0gW10sIGggPSAwOyBmb3IgKDsgcCA+IGg7IGgrKykgaWYgKG8gPSBlW2hdLCBvIHx8IDAgPT09IG8pIGlmIChcIm9iamVjdFwiID09PSBiLnR5cGUobykpIGIubWVyZ2UoZCwgby5ub2RlVHlwZSA/IFtvXSA6IG8pOyBlbHNlIGlmICh3dC50ZXN0KG8pKSB7XHJcbiAgICAgICAgICAgIHMgPSBzIHx8IGYuYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSwgdSA9IChidC5leGVjKG8pIHx8IFtcIlwiLCBcIlwiXSlbMV0udG9Mb3dlckNhc2UoKSwgYyA9IEF0W3VdIHx8IEF0Ll9kZWZhdWx0LCBzLmlubmVySFRNTCA9IGNbMV0gKyBvLnJlcGxhY2UodnQsIFwiPCQxPjwvJDI+XCIpICsgY1syXSwgaSA9IGNbMF07IHdoaWxlIChpLS0pIHMgPSBzLmxhc3RDaGlsZDsgaWYgKCFiLnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UgJiYgeXQudGVzdChvKSAmJiBkLnB1c2godC5jcmVhdGVUZXh0Tm9kZSh5dC5leGVjKG8pWzBdKSksICFiLnN1cHBvcnQudGJvZHkpIHtcclxuICAgICAgICAgICAgICAgIG8gPSBcInRhYmxlXCIgIT09IHUgfHwgeHQudGVzdChvKSA/IFwiPHRhYmxlPlwiICE9PSBjWzFdIHx8IHh0LnRlc3QobykgPyAwIDogcyA6IHMuZmlyc3RDaGlsZCwgaSA9IG8gJiYgby5jaGlsZE5vZGVzLmxlbmd0aDsgd2hpbGUgKGktLSkgYi5ub2RlTmFtZShsID0gby5jaGlsZE5vZGVzW2ldLCBcInRib2R5XCIpICYmICFsLmNoaWxkTm9kZXMubGVuZ3RoICYmIG8ucmVtb3ZlQ2hpbGQobClcclxuICAgICAgICAgICAgfSBiLm1lcmdlKGQsIHMuY2hpbGROb2RlcyksIHMudGV4dENvbnRlbnQgPSBcIlwiOyB3aGlsZSAocy5maXJzdENoaWxkKSBzLnJlbW92ZUNoaWxkKHMuZmlyc3RDaGlsZCk7IHMgPSBmLmxhc3RDaGlsZFxyXG4gICAgICAgIH0gZWxzZSBkLnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7IHMgJiYgZi5yZW1vdmVDaGlsZChzKSwgYi5zdXBwb3J0LmFwcGVuZENoZWNrZWQgfHwgYi5ncmVwKE90KGQsIFwiaW5wdXRcIiksIEJ0KSwgaCA9IDA7IHdoaWxlIChvID0gZFtoKytdKSBpZiAoKCFyIHx8IC0xID09PSBiLmluQXJyYXkobywgcikpICYmIChhID0gYi5jb250YWlucyhvLm93bmVyRG9jdW1lbnQsIG8pLCBzID0gT3QoZi5hcHBlbmRDaGlsZChvKSwgXCJzY3JpcHRcIiksIGEgJiYgTXQocyksIG4pKSB7IGkgPSAwOyB3aGlsZSAobyA9IHNbaSsrXSkga3QudGVzdChvLnR5cGUgfHwgXCJcIikgJiYgbi5wdXNoKG8pIH0gcmV0dXJuIHMgPSBudWxsLCBmXHJcbiAgICB9LCBjbGVhbkRhdGE6IGZ1bmN0aW9uIChlLCB0KSB7IHZhciBuLCByLCBvLCBhLCBzID0gMCwgdSA9IGIuZXhwYW5kbywgbCA9IGIuY2FjaGUsIHAgPSBiLnN1cHBvcnQuZGVsZXRlRXhwYW5kbywgZiA9IGIuZXZlbnQuc3BlY2lhbDsgZm9yICg7IG51bGwgIT0gKG4gPSBlW3NdKTsgcysrKSBpZiAoKHQgfHwgYi5hY2NlcHREYXRhKG4pKSAmJiAobyA9IG5bdV0sIGEgPSBvICYmIGxbb10pKSB7IGlmIChhLmV2ZW50cykgZm9yIChyIGluIGEuZXZlbnRzKSBmW3JdID8gYi5ldmVudC5yZW1vdmUobiwgcikgOiBiLnJlbW92ZUV2ZW50KG4sIHIsIGEuaGFuZGxlKTsgbFtvXSAmJiAoZGVsZXRlIGxbb10sIHAgPyBkZWxldGUgblt1XSA6IHR5cGVvZiBuLnJlbW92ZUF0dHJpYnV0ZSAhPT0gaSA/IG4ucmVtb3ZlQXR0cmlidXRlKHUpIDogblt1XSA9IG51bGwsIGMucHVzaChvKSkgfSB9IFxyXG4gICAgfSk7IHZhciBQdCwgUnQsIFd0LCAkdCA9IC9hbHBoYVxcKFteKV0qXFwpL2ksIEl0ID0gL29wYWNpdHlcXHMqPVxccyooW14pXSopLywgenQgPSAvXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC8sIFh0ID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLCBVdCA9IC9ebWFyZ2luLywgVnQgPSBSZWdFeHAoXCJeKFwiICsgeCArIFwiKSguKikkXCIsIFwiaVwiKSwgWXQgPSBSZWdFeHAoXCJeKFwiICsgeCArIFwiKSg/IXB4KVthLXolXSskXCIsIFwiaVwiKSwgSnQgPSBSZWdFeHAoXCJeKFsrLV0pPShcIiArIHggKyBcIilcIiwgXCJpXCIpLCBHdCA9IHsgQk9EWTogXCJibG9ja1wiIH0sIFF0ID0geyBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCB2aXNpYmlsaXR5OiBcImhpZGRlblwiLCBkaXNwbGF5OiBcImJsb2NrXCIgfSwgS3QgPSB7IGxldHRlclNwYWNpbmc6IDAsIGZvbnRXZWlnaHQ6IDQwMCB9LCBadCA9IFtcIlRvcFwiLCBcIlJpZ2h0XCIsIFwiQm90dG9tXCIsIFwiTGVmdFwiXSwgZW4gPSBbXCJXZWJraXRcIiwgXCJPXCIsIFwiTW96XCIsIFwibXNcIl07IGZ1bmN0aW9uIHRuKGUsIHQpIHsgaWYgKHQgaW4gZSkgcmV0dXJuIHQ7IHZhciBuID0gdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHQuc2xpY2UoMSksIHIgPSB0LCBpID0gZW4ubGVuZ3RoOyB3aGlsZSAoaS0tKSBpZiAodCA9IGVuW2ldICsgbiwgdCBpbiBlKSByZXR1cm4gdDsgcmV0dXJuIHIgfSBmdW5jdGlvbiBubihlLCB0KSB7IHJldHVybiBlID0gdCB8fCBlLCBcIm5vbmVcIiA9PT0gYi5jc3MoZSwgXCJkaXNwbGF5XCIpIHx8ICFiLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCwgZSkgfSBmdW5jdGlvbiBybihlLCB0KSB7IHZhciBuLCByLCBpLCBvID0gW10sIGEgPSAwLCBzID0gZS5sZW5ndGg7IGZvciAoOyBzID4gYTsgYSsrKSByID0gZVthXSwgci5zdHlsZSAmJiAob1thXSA9IGIuX2RhdGEociwgXCJvbGRkaXNwbGF5XCIpLCBuID0gci5zdHlsZS5kaXNwbGF5LCB0ID8gKG9bYV0gfHwgXCJub25lXCIgIT09IG4gfHwgKHIuc3R5bGUuZGlzcGxheSA9IFwiXCIpLCBcIlwiID09PSByLnN0eWxlLmRpc3BsYXkgJiYgbm4ocikgJiYgKG9bYV0gPSBiLl9kYXRhKHIsIFwib2xkZGlzcGxheVwiLCB1bihyLm5vZGVOYW1lKSkpKSA6IG9bYV0gfHwgKGkgPSBubihyKSwgKG4gJiYgXCJub25lXCIgIT09IG4gfHwgIWkpICYmIGIuX2RhdGEociwgXCJvbGRkaXNwbGF5XCIsIGkgPyBuIDogYi5jc3MociwgXCJkaXNwbGF5XCIpKSkpOyBmb3IgKGEgPSAwOyBzID4gYTsgYSsrKSByID0gZVthXSwgci5zdHlsZSAmJiAodCAmJiBcIm5vbmVcIiAhPT0gci5zdHlsZS5kaXNwbGF5ICYmIFwiXCIgIT09IHIuc3R5bGUuZGlzcGxheSB8fCAoci5zdHlsZS5kaXNwbGF5ID0gdCA/IG9bYV0gfHwgXCJcIiA6IFwibm9uZVwiKSk7IHJldHVybiBlIH0gYi5mbi5leHRlbmQoeyBjc3M6IGZ1bmN0aW9uIChlLCBuKSB7IHJldHVybiBiLmFjY2Vzcyh0aGlzLCBmdW5jdGlvbiAoZSwgbiwgcikgeyB2YXIgaSwgbywgYSA9IHt9LCBzID0gMDsgaWYgKGIuaXNBcnJheShuKSkgeyBmb3IgKG8gPSBSdChlKSwgaSA9IG4ubGVuZ3RoOyBpID4gczsgcysrKSBhW25bc11dID0gYi5jc3MoZSwgbltzXSwgITEsIG8pOyByZXR1cm4gYSB9IHJldHVybiByICE9PSB0ID8gYi5zdHlsZShlLCBuLCByKSA6IGIuY3NzKGUsIG4pIH0sIGUsIG4sIGFyZ3VtZW50cy5sZW5ndGggPiAxKSB9LCBzaG93OiBmdW5jdGlvbiAoKSB7IHJldHVybiBybih0aGlzLCAhMCkgfSwgaGlkZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gcm4odGhpcykgfSwgdG9nZ2xlOiBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IFwiYm9vbGVhblwiID09IHR5cGVvZiBlOyByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsgKHQgPyBlIDogbm4odGhpcykpID8gYih0aGlzKS5zaG93KCkgOiBiKHRoaXMpLmhpZGUoKSB9KSB9IH0pLCBiLmV4dGVuZCh7IGNzc0hvb2tzOiB7IG9wYWNpdHk6IHsgZ2V0OiBmdW5jdGlvbiAoZSwgdCkgeyBpZiAodCkgeyB2YXIgbiA9IFd0KGUsIFwib3BhY2l0eVwiKTsgcmV0dXJuIFwiXCIgPT09IG4gPyBcIjFcIiA6IG4gfSB9IH0gfSwgY3NzTnVtYmVyOiB7IGNvbHVtbkNvdW50OiAhMCwgZmlsbE9wYWNpdHk6ICEwLCBmb250V2VpZ2h0OiAhMCwgbGluZUhlaWdodDogITAsIG9wYWNpdHk6ICEwLCBvcnBoYW5zOiAhMCwgd2lkb3dzOiAhMCwgekluZGV4OiAhMCwgem9vbTogITAgfSwgY3NzUHJvcHM6IHsgXCJmbG9hdFwiOiBiLnN1cHBvcnQuY3NzRmxvYXQgPyBcImNzc0Zsb2F0XCIgOiBcInN0eWxlRmxvYXRcIiB9LCBzdHlsZTogZnVuY3Rpb24gKGUsIG4sIHIsIGkpIHsgaWYgKGUgJiYgMyAhPT0gZS5ub2RlVHlwZSAmJiA4ICE9PSBlLm5vZGVUeXBlICYmIGUuc3R5bGUpIHsgdmFyIG8sIGEsIHMsIHUgPSBiLmNhbWVsQ2FzZShuKSwgbCA9IGUuc3R5bGU7IGlmIChuID0gYi5jc3NQcm9wc1t1XSB8fCAoYi5jc3NQcm9wc1t1XSA9IHRuKGwsIHUpKSwgcyA9IGIuY3NzSG9va3Nbbl0gfHwgYi5jc3NIb29rc1t1XSwgciA9PT0gdCkgcmV0dXJuIHMgJiYgXCJnZXRcIiBpbiBzICYmIChvID0gcy5nZXQoZSwgITEsIGkpKSAhPT0gdCA/IG8gOiBsW25dOyBpZiAoYSA9IHR5cGVvZiByLCBcInN0cmluZ1wiID09PSBhICYmIChvID0gSnQuZXhlYyhyKSkgJiYgKHIgPSAob1sxXSArIDEpICogb1syXSArIHBhcnNlRmxvYXQoYi5jc3MoZSwgbikpLCBhID0gXCJudW1iZXJcIiksICEobnVsbCA9PSByIHx8IFwibnVtYmVyXCIgPT09IGEgJiYgaXNOYU4ocikgfHwgKFwibnVtYmVyXCIgIT09IGEgfHwgYi5jc3NOdW1iZXJbdV0gfHwgKHIgKz0gXCJweFwiKSwgYi5zdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSB8fCBcIlwiICE9PSByIHx8IDAgIT09IG4uaW5kZXhPZihcImJhY2tncm91bmRcIikgfHwgKGxbbl0gPSBcImluaGVyaXRcIiksIHMgJiYgXCJzZXRcIiBpbiBzICYmIChyID0gcy5zZXQoZSwgciwgaSkpID09PSB0KSkpIHRyeSB7IGxbbl0gPSByIH0gY2F0Y2ggKGMpIHsgfSB9IH0sIGNzczogZnVuY3Rpb24gKGUsIG4sIHIsIGkpIHsgdmFyIG8sIGEsIHMsIHUgPSBiLmNhbWVsQ2FzZShuKTsgcmV0dXJuIG4gPSBiLmNzc1Byb3BzW3VdIHx8IChiLmNzc1Byb3BzW3VdID0gdG4oZS5zdHlsZSwgdSkpLCBzID0gYi5jc3NIb29rc1tuXSB8fCBiLmNzc0hvb2tzW3VdLCBzICYmIFwiZ2V0XCIgaW4gcyAmJiAoYSA9IHMuZ2V0KGUsICEwLCByKSksIGEgPT09IHQgJiYgKGEgPSBXdChlLCBuLCBpKSksIFwibm9ybWFsXCIgPT09IGEgJiYgbiBpbiBLdCAmJiAoYSA9IEt0W25dKSwgXCJcIiA9PT0gciB8fCByID8gKG8gPSBwYXJzZUZsb2F0KGEpLCByID09PSAhMCB8fCBiLmlzTnVtZXJpYyhvKSA/IG8gfHwgMCA6IGEpIDogYSB9LCBzd2FwOiBmdW5jdGlvbiAoZSwgdCwgbiwgcikgeyB2YXIgaSwgbywgYSA9IHt9OyBmb3IgKG8gaW4gdCkgYVtvXSA9IGUuc3R5bGVbb10sIGUuc3R5bGVbb10gPSB0W29dOyBpID0gbi5hcHBseShlLCByIHx8IFtdKTsgZm9yIChvIGluIHQpIGUuc3R5bGVbb10gPSBhW29dOyByZXR1cm4gaSB9IH0pLCBlLmdldENvbXB1dGVkU3R5bGUgPyAoUnQgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gZS5nZXRDb21wdXRlZFN0eWxlKHQsIG51bGwpIH0sIFd0ID0gZnVuY3Rpb24gKGUsIG4sIHIpIHsgdmFyIGksIG8sIGEsIHMgPSByIHx8IFJ0KGUpLCB1ID0gcyA/IHMuZ2V0UHJvcGVydHlWYWx1ZShuKSB8fCBzW25dIDogdCwgbCA9IGUuc3R5bGU7IHJldHVybiBzICYmIChcIlwiICE9PSB1IHx8IGIuY29udGFpbnMoZS5vd25lckRvY3VtZW50LCBlKSB8fCAodSA9IGIuc3R5bGUoZSwgbikpLCBZdC50ZXN0KHUpICYmIFV0LnRlc3QobikgJiYgKGkgPSBsLndpZHRoLCBvID0gbC5taW5XaWR0aCwgYSA9IGwubWF4V2lkdGgsIGwubWluV2lkdGggPSBsLm1heFdpZHRoID0gbC53aWR0aCA9IHUsIHUgPSBzLndpZHRoLCBsLndpZHRoID0gaSwgbC5taW5XaWR0aCA9IG8sIGwubWF4V2lkdGggPSBhKSksIHUgfSkgOiBvLmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUgJiYgKFJ0ID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUuY3VycmVudFN0eWxlIH0sIFd0ID0gZnVuY3Rpb24gKGUsIG4sIHIpIHsgdmFyIGksIG8sIGEsIHMgPSByIHx8IFJ0KGUpLCB1ID0gcyA/IHNbbl0gOiB0LCBsID0gZS5zdHlsZTsgcmV0dXJuIG51bGwgPT0gdSAmJiBsICYmIGxbbl0gJiYgKHUgPSBsW25dKSwgWXQudGVzdCh1KSAmJiAhenQudGVzdChuKSAmJiAoaSA9IGwubGVmdCwgbyA9IGUucnVudGltZVN0eWxlLCBhID0gbyAmJiBvLmxlZnQsIGEgJiYgKG8ubGVmdCA9IGUuY3VycmVudFN0eWxlLmxlZnQpLCBsLmxlZnQgPSBcImZvbnRTaXplXCIgPT09IG4gPyBcIjFlbVwiIDogdSwgdSA9IGwucGl4ZWxMZWZ0ICsgXCJweFwiLCBsLmxlZnQgPSBpLCBhICYmIChvLmxlZnQgPSBhKSksIFwiXCIgPT09IHUgPyBcImF1dG9cIiA6IHUgfSk7IGZ1bmN0aW9uIG9uKGUsIHQsIG4pIHsgdmFyIHIgPSBWdC5leGVjKHQpOyByZXR1cm4gciA/IE1hdGgubWF4KDAsIHJbMV0gLSAobiB8fCAwKSkgKyAoclsyXSB8fCBcInB4XCIpIDogdCB9IGZ1bmN0aW9uIGFuKGUsIHQsIG4sIHIsIGkpIHsgdmFyIG8gPSBuID09PSAociA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIikgPyA0IDogXCJ3aWR0aFwiID09PSB0ID8gMSA6IDAsIGEgPSAwOyBmb3IgKDsgNCA+IG87IG8gKz0gMikgXCJtYXJnaW5cIiA9PT0gbiAmJiAoYSArPSBiLmNzcyhlLCBuICsgWnRbb10sICEwLCBpKSksIHIgPyAoXCJjb250ZW50XCIgPT09IG4gJiYgKGEgLT0gYi5jc3MoZSwgXCJwYWRkaW5nXCIgKyBadFtvXSwgITAsIGkpKSwgXCJtYXJnaW5cIiAhPT0gbiAmJiAoYSAtPSBiLmNzcyhlLCBcImJvcmRlclwiICsgWnRbb10gKyBcIldpZHRoXCIsICEwLCBpKSkpIDogKGEgKz0gYi5jc3MoZSwgXCJwYWRkaW5nXCIgKyBadFtvXSwgITAsIGkpLCBcInBhZGRpbmdcIiAhPT0gbiAmJiAoYSArPSBiLmNzcyhlLCBcImJvcmRlclwiICsgWnRbb10gKyBcIldpZHRoXCIsICEwLCBpKSkpOyByZXR1cm4gYSB9IGZ1bmN0aW9uIHNuKGUsIHQsIG4pIHsgdmFyIHIgPSAhMCwgaSA9IFwid2lkdGhcIiA9PT0gdCA/IGUub2Zmc2V0V2lkdGggOiBlLm9mZnNldEhlaWdodCwgbyA9IFJ0KGUpLCBhID0gYi5zdXBwb3J0LmJveFNpemluZyAmJiBcImJvcmRlci1ib3hcIiA9PT0gYi5jc3MoZSwgXCJib3hTaXppbmdcIiwgITEsIG8pOyBpZiAoMCA+PSBpIHx8IG51bGwgPT0gaSkgeyBpZiAoaSA9IFd0KGUsIHQsIG8pLCAoMCA+IGkgfHwgbnVsbCA9PSBpKSAmJiAoaSA9IGUuc3R5bGVbdF0pLCBZdC50ZXN0KGkpKSByZXR1cm4gaTsgciA9IGEgJiYgKGIuc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSB8fCBpID09PSBlLnN0eWxlW3RdKSwgaSA9IHBhcnNlRmxvYXQoaSkgfHwgMCB9IHJldHVybiBpICsgYW4oZSwgdCwgbiB8fCAoYSA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiksIHIsIG8pICsgXCJweFwiIH0gZnVuY3Rpb24gdW4oZSkgeyB2YXIgdCA9IG8sIG4gPSBHdFtlXTsgcmV0dXJuIG4gfHwgKG4gPSBsbihlLCB0KSwgXCJub25lXCIgIT09IG4gJiYgbiB8fCAoUHQgPSAoUHQgfHwgYihcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIikuY3NzKFwiY3NzVGV4dFwiLCBcImRpc3BsYXk6YmxvY2sgIWltcG9ydGFudFwiKSkuYXBwZW5kVG8odC5kb2N1bWVudEVsZW1lbnQpLCB0ID0gKFB0WzBdLmNvbnRlbnRXaW5kb3cgfHwgUHRbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudCwgdC53cml0ZShcIjwhZG9jdHlwZSBodG1sPjxodG1sPjxib2R5PlwiKSwgdC5jbG9zZSgpLCBuID0gbG4oZSwgdCksIFB0LmRldGFjaCgpKSwgR3RbZV0gPSBuKSwgbiB9IGZ1bmN0aW9uIGxuKGUsIHQpIHsgdmFyIG4gPSBiKHQuY3JlYXRlRWxlbWVudChlKSkuYXBwZW5kVG8odC5ib2R5KSwgciA9IGIuY3NzKG5bMF0sIFwiZGlzcGxheVwiKTsgcmV0dXJuIG4ucmVtb3ZlKCksIHIgfSBiLmVhY2goW1wiaGVpZ2h0XCIsIFwid2lkdGhcIl0sIGZ1bmN0aW9uIChlLCBuKSB7IGIuY3NzSG9va3Nbbl0gPSB7IGdldDogZnVuY3Rpb24gKGUsIHIsIGkpIHsgcmV0dXJuIHIgPyAwID09PSBlLm9mZnNldFdpZHRoICYmIFh0LnRlc3QoYi5jc3MoZSwgXCJkaXNwbGF5XCIpKSA/IGIuc3dhcChlLCBRdCwgZnVuY3Rpb24gKCkgeyByZXR1cm4gc24oZSwgbiwgaSkgfSkgOiBzbihlLCBuLCBpKSA6IHQgfSwgc2V0OiBmdW5jdGlvbiAoZSwgdCwgcikgeyB2YXIgaSA9IHIgJiYgUnQoZSk7IHJldHVybiBvbihlLCB0LCByID8gYW4oZSwgbiwgciwgYi5zdXBwb3J0LmJveFNpemluZyAmJiBcImJvcmRlci1ib3hcIiA9PT0gYi5jc3MoZSwgXCJib3hTaXppbmdcIiwgITEsIGkpLCBpKSA6IDApIH0gfSB9KSwgYi5zdXBwb3J0Lm9wYWNpdHkgfHwgKGIuY3NzSG9va3Mub3BhY2l0eSA9IHsgZ2V0OiBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gSXQudGVzdCgodCAmJiBlLmN1cnJlbnRTdHlsZSA/IGUuY3VycmVudFN0eWxlLmZpbHRlciA6IGUuc3R5bGUuZmlsdGVyKSB8fCBcIlwiKSA/IC4wMSAqIHBhcnNlRmxvYXQoUmVnRXhwLiQxKSArIFwiXCIgOiB0ID8gXCIxXCIgOiBcIlwiIH0sIHNldDogZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4gPSBlLnN0eWxlLCByID0gZS5jdXJyZW50U3R5bGUsIGkgPSBiLmlzTnVtZXJpYyh0KSA/IFwiYWxwaGEob3BhY2l0eT1cIiArIDEwMCAqIHQgKyBcIilcIiA6IFwiXCIsIG8gPSByICYmIHIuZmlsdGVyIHx8IG4uZmlsdGVyIHx8IFwiXCI7IG4uem9vbSA9IDEsICh0ID49IDEgfHwgXCJcIiA9PT0gdCkgJiYgXCJcIiA9PT0gYi50cmltKG8ucmVwbGFjZSgkdCwgXCJcIikpICYmIG4ucmVtb3ZlQXR0cmlidXRlICYmIChuLnJlbW92ZUF0dHJpYnV0ZShcImZpbHRlclwiKSwgXCJcIiA9PT0gdCB8fCByICYmICFyLmZpbHRlcikgfHwgKG4uZmlsdGVyID0gJHQudGVzdChvKSA/IG8ucmVwbGFjZSgkdCwgaSkgOiBvICsgXCIgXCIgKyBpKSB9IH0pLCBiKGZ1bmN0aW9uICgpIHsgYi5zdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHQgfHwgKGIuY3NzSG9va3MubWFyZ2luUmlnaHQgPSB7IGdldDogZnVuY3Rpb24gKGUsIG4pIHsgcmV0dXJuIG4gPyBiLnN3YXAoZSwgeyBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiIH0sIFd0LCBbZSwgXCJtYXJnaW5SaWdodFwiXSkgOiB0IH0gfSksICFiLnN1cHBvcnQucGl4ZWxQb3NpdGlvbiAmJiBiLmZuLnBvc2l0aW9uICYmIGIuZWFjaChbXCJ0b3BcIiwgXCJsZWZ0XCJdLCBmdW5jdGlvbiAoZSwgbikgeyBiLmNzc0hvb2tzW25dID0geyBnZXQ6IGZ1bmN0aW9uIChlLCByKSB7IHJldHVybiByID8gKHIgPSBXdChlLCBuKSwgWXQudGVzdChyKSA/IGIoZSkucG9zaXRpb24oKVtuXSArIFwicHhcIiA6IHIpIDogdCB9IH0gfSkgfSksIGIuZXhwciAmJiBiLmV4cHIuZmlsdGVycyAmJiAoYi5leHByLmZpbHRlcnMuaGlkZGVuID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIDAgPj0gZS5vZmZzZXRXaWR0aCAmJiAwID49IGUub2Zmc2V0SGVpZ2h0IHx8ICFiLnN1cHBvcnQucmVsaWFibGVIaWRkZW5PZmZzZXRzICYmIFwibm9uZVwiID09PSAoZS5zdHlsZSAmJiBlLnN0eWxlLmRpc3BsYXkgfHwgYi5jc3MoZSwgXCJkaXNwbGF5XCIpKSB9LCBiLmV4cHIuZmlsdGVycy52aXNpYmxlID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuICFiLmV4cHIuZmlsdGVycy5oaWRkZW4oZSkgfSksIGIuZWFjaCh7IG1hcmdpbjogXCJcIiwgcGFkZGluZzogXCJcIiwgYm9yZGVyOiBcIldpZHRoXCIgfSwgZnVuY3Rpb24gKGUsIHQpIHsgYi5jc3NIb29rc1tlICsgdF0gPSB7IGV4cGFuZDogZnVuY3Rpb24gKG4pIHsgdmFyIHIgPSAwLCBpID0ge30sIG8gPSBcInN0cmluZ1wiID09IHR5cGVvZiBuID8gbi5zcGxpdChcIiBcIikgOiBbbl07IGZvciAoOyA0ID4gcjsgcisrKSBpW2UgKyBadFtyXSArIHRdID0gb1tyXSB8fCBvW3IgLSAyXSB8fCBvWzBdOyByZXR1cm4gaSB9IH0sIFV0LnRlc3QoZSkgfHwgKGIuY3NzSG9va3NbZSArIHRdLnNldCA9IG9uKSB9KTsgdmFyIGNuID0gLyUyMC9nLCBwbiA9IC9cXFtcXF0kLywgZm4gPSAvXFxyP1xcbi9nLCBkbiA9IC9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSwgaG4gPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7IGIuZm4uZXh0ZW5kKHsgc2VyaWFsaXplOiBmdW5jdGlvbiAoKSB7IHJldHVybiBiLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSkgfSwgc2VyaWFsaXplQXJyYXk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uICgpIHsgdmFyIGUgPSBiLnByb3AodGhpcywgXCJlbGVtZW50c1wiKTsgcmV0dXJuIGUgPyBiLm1ha2VBcnJheShlKSA6IHRoaXMgfSkuZmlsdGVyKGZ1bmN0aW9uICgpIHsgdmFyIGUgPSB0aGlzLnR5cGU7IHJldHVybiB0aGlzLm5hbWUgJiYgIWIodGhpcykuaXMoXCI6ZGlzYWJsZWRcIikgJiYgaG4udGVzdCh0aGlzLm5vZGVOYW1lKSAmJiAhZG4udGVzdChlKSAmJiAodGhpcy5jaGVja2VkIHx8ICFOdC50ZXN0KGUpKSB9KS5tYXAoZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4gPSBiKHRoaXMpLnZhbCgpOyByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IGIuaXNBcnJheShuKSA/IGIubWFwKG4sIGZ1bmN0aW9uIChlKSB7IHJldHVybiB7IG5hbWU6IHQubmFtZSwgdmFsdWU6IGUucmVwbGFjZShmbiwgXCJcXHJcXG5cIil9IH0pIDogeyBuYW1lOiB0Lm5hbWUsIHZhbHVlOiBuLnJlcGxhY2UoZm4sIFwiXFxyXFxuXCIpfSB9KS5nZXQoKSB9IH0pLCBiLnBhcmFtID0gZnVuY3Rpb24gKGUsIG4pIHsgdmFyIHIsIGkgPSBbXSwgbyA9IGZ1bmN0aW9uIChlLCB0KSB7IHQgPSBiLmlzRnVuY3Rpb24odCkgPyB0KCkgOiBudWxsID09IHQgPyBcIlwiIDogdCwgaVtpLmxlbmd0aF0gPSBlbmNvZGVVUklDb21wb25lbnQoZSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0KSB9OyBpZiAobiA9PT0gdCAmJiAobiA9IGIuYWpheFNldHRpbmdzICYmIGIuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSwgYi5pc0FycmF5KGUpIHx8IGUuanF1ZXJ5ICYmICFiLmlzUGxhaW5PYmplY3QoZSkpIGIuZWFjaChlLCBmdW5jdGlvbiAoKSB7IG8odGhpcy5uYW1lLCB0aGlzLnZhbHVlKSB9KTsgZWxzZSBmb3IgKHIgaW4gZSkgZ24ociwgZVtyXSwgbiwgbyk7IHJldHVybiBpLmpvaW4oXCImXCIpLnJlcGxhY2UoY24sIFwiK1wiKSB9OyBmdW5jdGlvbiBnbihlLCB0LCBuLCByKSB7IHZhciBpOyBpZiAoYi5pc0FycmF5KHQpKSBiLmVhY2godCwgZnVuY3Rpb24gKHQsIGkpIHsgbiB8fCBwbi50ZXN0KGUpID8gcihlLCBpKSA6IGduKGUgKyBcIltcIiArIChcIm9iamVjdFwiID09IHR5cGVvZiBpID8gdCA6IFwiXCIpICsgXCJdXCIsIGksIG4sIHIpIH0pOyBlbHNlIGlmIChuIHx8IFwib2JqZWN0XCIgIT09IGIudHlwZSh0KSkgcihlLCB0KTsgZWxzZSBmb3IgKGkgaW4gdCkgZ24oZSArIFwiW1wiICsgaSArIFwiXVwiLCB0W2ldLCBuLCByKSB9IGIuZWFjaChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnVcIi5zcGxpdChcIiBcIiksIGZ1bmN0aW9uIChlLCB0KSB7IGIuZm5bdF0gPSBmdW5jdGlvbiAoZSwgbikgeyByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDAgPyB0aGlzLm9uKHQsIG51bGwsIGUsIG4pIDogdGhpcy50cmlnZ2VyKHQpIH0gfSksIGIuZm4uaG92ZXIgPSBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gdGhpcy5tb3VzZWVudGVyKGUpLm1vdXNlbGVhdmUodCB8fCBlKSB9OyB2YXIgbW4sIHluLCB2biA9IGIubm93KCksIGJuID0gL1xcPy8sIHhuID0gLyMuKiQvLCB3biA9IC8oWz8mXSlfPVteJl0qLywgVG4gPSAvXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKilcXHI/JC9nbSwgTm4gPSAvXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLywgQ24gPSAvXig/OkdFVHxIRUFEKSQvLCBrbiA9IC9eXFwvXFwvLywgRW4gPSAvXihbXFx3ListXSs6KSg/OlxcL1xcLyhbXlxcLz8jOl0qKSg/OjooXFxkKyl8KXwpLywgU24gPSBiLmZuLmxvYWQsIEFuID0ge30sIGpuID0ge30sIERuID0gXCIqL1wiLmNvbmNhdChcIipcIik7IHRyeSB7IHluID0gYS5ocmVmIH0gY2F0Y2ggKExuKSB7IHluID0gby5jcmVhdGVFbGVtZW50KFwiYVwiKSwgeW4uaHJlZiA9IFwiXCIsIHluID0geW4uaHJlZiB9IG1uID0gRW4uZXhlYyh5bi50b0xvd2VyQ2FzZSgpKSB8fCBbXTsgZnVuY3Rpb24gSG4oZSkgeyByZXR1cm4gZnVuY3Rpb24gKHQsIG4pIHsgXCJzdHJpbmdcIiAhPSB0eXBlb2YgdCAmJiAobiA9IHQsIHQgPSBcIipcIik7IHZhciByLCBpID0gMCwgbyA9IHQudG9Mb3dlckNhc2UoKS5tYXRjaCh3KSB8fCBbXTsgaWYgKGIuaXNGdW5jdGlvbihuKSkgd2hpbGUgKHIgPSBvW2krK10pIFwiK1wiID09PSByWzBdID8gKHIgPSByLnNsaWNlKDEpIHx8IFwiKlwiLCAoZVtyXSA9IGVbcl0gfHwgW10pLnVuc2hpZnQobikpIDogKGVbcl0gPSBlW3JdIHx8IFtdKS5wdXNoKG4pIH0gfSBmdW5jdGlvbiBxbihlLCBuLCByLCBpKSB7IHZhciBvID0ge30sIGEgPSBlID09PSBqbjsgZnVuY3Rpb24gcyh1KSB7IHZhciBsOyByZXR1cm4gb1t1XSA9ICEwLCBiLmVhY2goZVt1XSB8fCBbXSwgZnVuY3Rpb24gKGUsIHUpIHsgdmFyIGMgPSB1KG4sIHIsIGkpOyByZXR1cm4gXCJzdHJpbmdcIiAhPSB0eXBlb2YgYyB8fCBhIHx8IG9bY10gPyBhID8gIShsID0gYykgOiB0IDogKG4uZGF0YVR5cGVzLnVuc2hpZnQoYyksIHMoYyksICExKSB9KSwgbCB9IHJldHVybiBzKG4uZGF0YVR5cGVzWzBdKSB8fCAhb1tcIipcIl0gJiYgcyhcIipcIikgfSBmdW5jdGlvbiBNbihlLCBuKSB7IHZhciByLCBpLCBvID0gYi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnMgfHwge307IGZvciAoaSBpbiBuKSBuW2ldICE9PSB0ICYmICgob1tpXSA/IGUgOiByIHx8IChyID0ge30pKVtpXSA9IG5baV0pOyByZXR1cm4gciAmJiBiLmV4dGVuZCghMCwgZSwgciksIGUgfSBiLmZuLmxvYWQgPSBmdW5jdGlvbiAoZSwgbiwgcikgeyBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgZSAmJiBTbikgcmV0dXJuIFNuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHZhciBpLCBvLCBhLCBzID0gdGhpcywgdSA9IGUuaW5kZXhPZihcIiBcIik7IHJldHVybiB1ID49IDAgJiYgKGkgPSBlLnNsaWNlKHUsIGUubGVuZ3RoKSwgZSA9IGUuc2xpY2UoMCwgdSkpLCBiLmlzRnVuY3Rpb24obikgPyAociA9IG4sIG4gPSB0KSA6IG4gJiYgXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiAoYSA9IFwiUE9TVFwiKSwgcy5sZW5ndGggPiAwICYmIGIuYWpheCh7IHVybDogZSwgdHlwZTogYSwgZGF0YVR5cGU6IFwiaHRtbFwiLCBkYXRhOiBuIH0pLmRvbmUoZnVuY3Rpb24gKGUpIHsgbyA9IGFyZ3VtZW50cywgcy5odG1sKGkgPyBiKFwiPGRpdj5cIikuYXBwZW5kKGIucGFyc2VIVE1MKGUpKS5maW5kKGkpIDogZSkgfSkuY29tcGxldGUociAmJiBmdW5jdGlvbiAoZSwgdCkgeyBzLmVhY2gociwgbyB8fCBbZS5yZXNwb25zZVRleHQsIHQsIGVdKSB9KSwgdGhpcyB9LCBiLmVhY2goW1wiYWpheFN0YXJ0XCIsIFwiYWpheFN0b3BcIiwgXCJhamF4Q29tcGxldGVcIiwgXCJhamF4RXJyb3JcIiwgXCJhamF4U3VjY2Vzc1wiLCBcImFqYXhTZW5kXCJdLCBmdW5jdGlvbiAoZSwgdCkgeyBiLmZuW3RdID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIHRoaXMub24odCwgZSkgfSB9KSwgYi5lYWNoKFtcImdldFwiLCBcInBvc3RcIl0sIGZ1bmN0aW9uIChlLCBuKSB7IGJbbl0gPSBmdW5jdGlvbiAoZSwgciwgaSwgbykgeyByZXR1cm4gYi5pc0Z1bmN0aW9uKHIpICYmIChvID0gbyB8fCBpLCBpID0gciwgciA9IHQpLCBiLmFqYXgoeyB1cmw6IGUsIHR5cGU6IG4sIGRhdGFUeXBlOiBvLCBkYXRhOiByLCBzdWNjZXNzOiBpIH0pIH0gfSksIGIuZXh0ZW5kKHsgYWN0aXZlOiAwLCBsYXN0TW9kaWZpZWQ6IHt9LCBldGFnOiB7fSwgYWpheFNldHRpbmdzOiB7IHVybDogeW4sIHR5cGU6IFwiR0VUXCIsIGlzTG9jYWw6IE5uLnRlc3QobW5bMV0pLCBnbG9iYWw6ICEwLCBwcm9jZXNzRGF0YTogITAsIGFzeW5jOiAhMCwgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsIGFjY2VwdHM6IHsgXCIqXCI6IERuLCB0ZXh0OiBcInRleHQvcGxhaW5cIiwgaHRtbDogXCJ0ZXh0L2h0bWxcIiwgeG1sOiBcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIiwganNvbjogXCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIiB9LCBjb250ZW50czogeyB4bWw6IC94bWwvLCBodG1sOiAvaHRtbC8sIGpzb246IC9qc29uLyB9LCByZXNwb25zZUZpZWxkczogeyB4bWw6IFwicmVzcG9uc2VYTUxcIiwgdGV4dDogXCJyZXNwb25zZVRleHRcIiB9LCBjb252ZXJ0ZXJzOiB7IFwiKiB0ZXh0XCI6IGUuU3RyaW5nLCBcInRleHQgaHRtbFwiOiAhMCwgXCJ0ZXh0IGpzb25cIjogYi5wYXJzZUpTT04sIFwidGV4dCB4bWxcIjogYi5wYXJzZVhNTCB9LCBmbGF0T3B0aW9uczogeyB1cmw6ICEwLCBjb250ZXh0OiAhMH0gfSwgYWpheFNldHVwOiBmdW5jdGlvbiAoZSwgdCkgeyByZXR1cm4gdCA/IE1uKE1uKGUsIGIuYWpheFNldHRpbmdzKSwgdCkgOiBNbihiLmFqYXhTZXR0aW5ncywgZSkgfSwgYWpheFByZWZpbHRlcjogSG4oQW4pLCBhamF4VHJhbnNwb3J0OiBIbihqbiksIGFqYXg6IGZ1bmN0aW9uIChlLCBuKSB7IFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgJiYgKG4gPSBlLCBlID0gdCksIG4gPSBuIHx8IHt9OyB2YXIgciwgaSwgbywgYSwgcywgdSwgbCwgYywgcCA9IGIuYWpheFNldHVwKHt9LCBuKSwgZiA9IHAuY29udGV4dCB8fCBwLCBkID0gcC5jb250ZXh0ICYmIChmLm5vZGVUeXBlIHx8IGYuanF1ZXJ5KSA/IGIoZikgOiBiLmV2ZW50LCBoID0gYi5EZWZlcnJlZCgpLCBnID0gYi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgbSA9IHAuc3RhdHVzQ29kZSB8fCB7fSwgeSA9IHt9LCB2ID0ge30sIHggPSAwLCBUID0gXCJjYW5jZWxlZFwiLCBOID0geyByZWFkeVN0YXRlOiAwLCBnZXRSZXNwb25zZUhlYWRlcjogZnVuY3Rpb24gKGUpIHsgdmFyIHQ7IGlmICgyID09PSB4KSB7IGlmICghYykgeyBjID0ge307IHdoaWxlICh0ID0gVG4uZXhlYyhhKSkgY1t0WzFdLnRvTG93ZXJDYXNlKCldID0gdFsyXSB9IHQgPSBjW2UudG9Mb3dlckNhc2UoKV0gfSByZXR1cm4gbnVsbCA9PSB0ID8gbnVsbCA6IHQgfSwgZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOiBmdW5jdGlvbiAoKSB7IHJldHVybiAyID09PSB4ID8gYSA6IG51bGwgfSwgc2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4gPSBlLnRvTG93ZXJDYXNlKCk7IHJldHVybiB4IHx8IChlID0gdltuXSA9IHZbbl0gfHwgZSwgeVtlXSA9IHQpLCB0aGlzIH0sIG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uIChlKSB7IHJldHVybiB4IHx8IChwLm1pbWVUeXBlID0gZSksIHRoaXMgfSwgc3RhdHVzQ29kZTogZnVuY3Rpb24gKGUpIHsgdmFyIHQ7IGlmIChlKSBpZiAoMiA+IHgpIGZvciAodCBpbiBlKSBtW3RdID0gW21bdF0sIGVbdF1dOyBlbHNlIE4uYWx3YXlzKGVbTi5zdGF0dXNdKTsgcmV0dXJuIHRoaXMgfSwgYWJvcnQ6IGZ1bmN0aW9uIChlKSB7IHZhciB0ID0gZSB8fCBUOyByZXR1cm4gbCAmJiBsLmFib3J0KHQpLCBrKDAsIHQpLCB0aGlzIH0gfTsgaWYgKGgucHJvbWlzZShOKS5jb21wbGV0ZSA9IGcuYWRkLCBOLnN1Y2Nlc3MgPSBOLmRvbmUsIE4uZXJyb3IgPSBOLmZhaWwsIHAudXJsID0gKChlIHx8IHAudXJsIHx8IHluKSArIFwiXCIpLnJlcGxhY2UoeG4sIFwiXCIpLnJlcGxhY2Uoa24sIG1uWzFdICsgXCIvL1wiKSwgcC50eXBlID0gbi5tZXRob2QgfHwgbi50eXBlIHx8IHAubWV0aG9kIHx8IHAudHlwZSwgcC5kYXRhVHlwZXMgPSBiLnRyaW0ocC5kYXRhVHlwZSB8fCBcIipcIikudG9Mb3dlckNhc2UoKS5tYXRjaCh3KSB8fCBbXCJcIl0sIG51bGwgPT0gcC5jcm9zc0RvbWFpbiAmJiAociA9IEVuLmV4ZWMocC51cmwudG9Mb3dlckNhc2UoKSksIHAuY3Jvc3NEb21haW4gPSAhKCFyIHx8IHJbMV0gPT09IG1uWzFdICYmIHJbMl0gPT09IG1uWzJdICYmIChyWzNdIHx8IChcImh0dHA6XCIgPT09IHJbMV0gPyA4MCA6IDQ0MykpID09IChtblszXSB8fCAoXCJodHRwOlwiID09PSBtblsxXSA/IDgwIDogNDQzKSkpKSwgcC5kYXRhICYmIHAucHJvY2Vzc0RhdGEgJiYgXCJzdHJpbmdcIiAhPSB0eXBlb2YgcC5kYXRhICYmIChwLmRhdGEgPSBiLnBhcmFtKHAuZGF0YSwgcC50cmFkaXRpb25hbCkpLCBxbihBbiwgcCwgbiwgTiksIDIgPT09IHgpIHJldHVybiBOOyB1ID0gcC5nbG9iYWwsIHUgJiYgMCA9PT0gYi5hY3RpdmUrKyAmJiBiLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIiksIHAudHlwZSA9IHAudHlwZS50b1VwcGVyQ2FzZSgpLCBwLmhhc0NvbnRlbnQgPSAhQ24udGVzdChwLnR5cGUpLCBvID0gcC51cmwsIHAuaGFzQ29udGVudCB8fCAocC5kYXRhICYmIChvID0gcC51cmwgKz0gKGJuLnRlc3QobykgPyBcIiZcIiA6IFwiP1wiKSArIHAuZGF0YSwgZGVsZXRlIHAuZGF0YSksIHAuY2FjaGUgPT09ICExICYmIChwLnVybCA9IHduLnRlc3QobykgPyBvLnJlcGxhY2Uod24sIFwiJDFfPVwiICsgdm4rKykgOiBvICsgKGJuLnRlc3QobykgPyBcIiZcIiA6IFwiP1wiKSArIFwiXz1cIiArIHZuKyspKSwgcC5pZk1vZGlmaWVkICYmIChiLmxhc3RNb2RpZmllZFtvXSAmJiBOLnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLCBiLmxhc3RNb2RpZmllZFtvXSksIGIuZXRhZ1tvXSAmJiBOLnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Ob25lLU1hdGNoXCIsIGIuZXRhZ1tvXSkpLCAocC5kYXRhICYmIHAuaGFzQ29udGVudCAmJiBwLmNvbnRlbnRUeXBlICE9PSAhMSB8fCBuLmNvbnRlbnRUeXBlKSAmJiBOLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgcC5jb250ZW50VHlwZSksIE4uc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLCBwLmRhdGFUeXBlc1swXSAmJiBwLmFjY2VwdHNbcC5kYXRhVHlwZXNbMF1dID8gcC5hY2NlcHRzW3AuZGF0YVR5cGVzWzBdXSArIChcIipcIiAhPT0gcC5kYXRhVHlwZXNbMF0gPyBcIiwgXCIgKyBEbiArIFwiOyBxPTAuMDFcIiA6IFwiXCIpIDogcC5hY2NlcHRzW1wiKlwiXSk7IGZvciAoaSBpbiBwLmhlYWRlcnMpIE4uc2V0UmVxdWVzdEhlYWRlcihpLCBwLmhlYWRlcnNbaV0pOyBpZiAocC5iZWZvcmVTZW5kICYmIChwLmJlZm9yZVNlbmQuY2FsbChmLCBOLCBwKSA9PT0gITEgfHwgMiA9PT0geCkpIHJldHVybiBOLmFib3J0KCk7IFQgPSBcImFib3J0XCI7IGZvciAoaSBpbiB7IHN1Y2Nlc3M6IDEsIGVycm9yOiAxLCBjb21wbGV0ZTogMSB9KSBOW2ldKHBbaV0pOyBpZiAobCA9IHFuKGpuLCBwLCBuLCBOKSkgeyBOLnJlYWR5U3RhdGUgPSAxLCB1ICYmIGQudHJpZ2dlcihcImFqYXhTZW5kXCIsIFtOLCBwXSksIHAuYXN5bmMgJiYgcC50aW1lb3V0ID4gMCAmJiAocyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBOLmFib3J0KFwidGltZW91dFwiKSB9LCBwLnRpbWVvdXQpKTsgdHJ5IHsgeCA9IDEsIGwuc2VuZCh5LCBrKSB9IGNhdGNoIChDKSB7IGlmICghKDIgPiB4KSkgdGhyb3cgQzsgaygtMSwgQykgfSB9IGVsc2UgaygtMSwgXCJObyBUcmFuc3BvcnRcIik7IGZ1bmN0aW9uIGsoZSwgbiwgciwgaSkgeyB2YXIgYywgeSwgdiwgdywgVCwgQyA9IG47IDIgIT09IHggJiYgKHggPSAyLCBzICYmIGNsZWFyVGltZW91dChzKSwgbCA9IHQsIGEgPSBpIHx8IFwiXCIsIE4ucmVhZHlTdGF0ZSA9IGUgPiAwID8gNCA6IDAsIHIgJiYgKHcgPSBfbihwLCBOLCByKSksIGUgPj0gMjAwICYmIDMwMCA+IGUgfHwgMzA0ID09PSBlID8gKHAuaWZNb2RpZmllZCAmJiAoVCA9IE4uZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpLCBUICYmIChiLmxhc3RNb2RpZmllZFtvXSA9IFQpLCBUID0gTi5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIiksIFQgJiYgKGIuZXRhZ1tvXSA9IFQpKSwgMjA0ID09PSBlID8gKGMgPSAhMCwgQyA9IFwibm9jb250ZW50XCIpIDogMzA0ID09PSBlID8gKGMgPSAhMCwgQyA9IFwibm90bW9kaWZpZWRcIikgOiAoYyA9IEZuKHAsIHcpLCBDID0gYy5zdGF0ZSwgeSA9IGMuZGF0YSwgdiA9IGMuZXJyb3IsIGMgPSAhdikpIDogKHYgPSBDLCAoZSB8fCAhQykgJiYgKEMgPSBcImVycm9yXCIsIDAgPiBlICYmIChlID0gMCkpKSwgTi5zdGF0dXMgPSBlLCBOLnN0YXR1c1RleHQgPSAobiB8fCBDKSArIFwiXCIsIGMgPyBoLnJlc29sdmVXaXRoKGYsIFt5LCBDLCBOXSkgOiBoLnJlamVjdFdpdGgoZiwgW04sIEMsIHZdKSwgTi5zdGF0dXNDb2RlKG0pLCBtID0gdCwgdSAmJiBkLnRyaWdnZXIoYyA/IFwiYWpheFN1Y2Nlc3NcIiA6IFwiYWpheEVycm9yXCIsIFtOLCBwLCBjID8geSA6IHZdKSwgZy5maXJlV2l0aChmLCBbTiwgQ10pLCB1ICYmIChkLnRyaWdnZXIoXCJhamF4Q29tcGxldGVcIiwgW04sIHBdKSwgLS1iLmFjdGl2ZSB8fCBiLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSkpIH0gcmV0dXJuIE4gfSwgZ2V0U2NyaXB0OiBmdW5jdGlvbiAoZSwgbikgeyByZXR1cm4gYi5nZXQoZSwgdCwgbiwgXCJzY3JpcHRcIikgfSwgZ2V0SlNPTjogZnVuY3Rpb24gKGUsIHQsIG4pIHsgcmV0dXJuIGIuZ2V0KGUsIHQsIG4sIFwianNvblwiKSB9IH0pOyBmdW5jdGlvbiBfbihlLCBuLCByKSB7IHZhciBpLCBvLCBhLCBzLCB1ID0gZS5jb250ZW50cywgbCA9IGUuZGF0YVR5cGVzLCBjID0gZS5yZXNwb25zZUZpZWxkczsgZm9yIChzIGluIGMpIHMgaW4gciAmJiAobltjW3NdXSA9IHJbc10pOyB3aGlsZSAoXCIqXCIgPT09IGxbMF0pIGwuc2hpZnQoKSwgbyA9PT0gdCAmJiAobyA9IGUubWltZVR5cGUgfHwgbi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSk7IGlmIChvKSBmb3IgKHMgaW4gdSkgaWYgKHVbc10gJiYgdVtzXS50ZXN0KG8pKSB7IGwudW5zaGlmdChzKTsgYnJlYWsgfSBpZiAobFswXSBpbiByKSBhID0gbFswXTsgZWxzZSB7IGZvciAocyBpbiByKSB7IGlmICghbFswXSB8fCBlLmNvbnZlcnRlcnNbcyArIFwiIFwiICsgbFswXV0pIHsgYSA9IHM7IGJyZWFrIH0gaSB8fCAoaSA9IHMpIH0gYSA9IGEgfHwgaSB9IHJldHVybiBhID8gKGEgIT09IGxbMF0gJiYgbC51bnNoaWZ0KGEpLCByW2FdKSA6IHQgfSBmdW5jdGlvbiBGbihlLCB0KSB7IHZhciBuLCByLCBpLCBvLCBhID0ge30sIHMgPSAwLCB1ID0gZS5kYXRhVHlwZXMuc2xpY2UoKSwgbCA9IHVbMF07IGlmIChlLmRhdGFGaWx0ZXIgJiYgKHQgPSBlLmRhdGFGaWx0ZXIodCwgZS5kYXRhVHlwZSkpLCB1WzFdKSBmb3IgKGkgaW4gZS5jb252ZXJ0ZXJzKSBhW2kudG9Mb3dlckNhc2UoKV0gPSBlLmNvbnZlcnRlcnNbaV07IGZvciAoOyByID0gdVsrK3NdOyApIGlmIChcIipcIiAhPT0gcikgeyBpZiAoXCIqXCIgIT09IGwgJiYgbCAhPT0gcikgeyBpZiAoaSA9IGFbbCArIFwiIFwiICsgcl0gfHwgYVtcIiogXCIgKyByXSwgIWkpIGZvciAobiBpbiBhKSBpZiAobyA9IG4uc3BsaXQoXCIgXCIpLCBvWzFdID09PSByICYmIChpID0gYVtsICsgXCIgXCIgKyBvWzBdXSB8fCBhW1wiKiBcIiArIG9bMF1dKSkgeyBpID09PSAhMCA/IGkgPSBhW25dIDogYVtuXSAhPT0gITAgJiYgKHIgPSBvWzBdLCB1LnNwbGljZShzLS0sIDAsIHIpKTsgYnJlYWsgfSBpZiAoaSAhPT0gITApIGlmIChpICYmIGVbXCJ0aHJvd3NcIl0pIHQgPSBpKHQpOyBlbHNlIHRyeSB7IHQgPSBpKHQpIH0gY2F0Y2ggKGMpIHsgcmV0dXJuIHsgc3RhdGU6IFwicGFyc2VyZXJyb3JcIiwgZXJyb3I6IGkgPyBjIDogXCJObyBjb252ZXJzaW9uIGZyb20gXCIgKyBsICsgXCIgdG8gXCIgKyByfSB9IH0gbCA9IHIgfSByZXR1cm4geyBzdGF0ZTogXCJzdWNjZXNzXCIsIGRhdGE6IHR9IH0gYi5hamF4U2V0dXAoeyBhY2NlcHRzOiB7IHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwiIH0sIGNvbnRlbnRzOiB7IHNjcmlwdDogLyg/OmphdmF8ZWNtYSlzY3JpcHQvIH0sIGNvbnZlcnRlcnM6IHsgXCJ0ZXh0IHNjcmlwdFwiOiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gYi5nbG9iYWxFdmFsKGUpLCBlIH0gfSB9KSwgYi5hamF4UHJlZmlsdGVyKFwic2NyaXB0XCIsIGZ1bmN0aW9uIChlKSB7IGUuY2FjaGUgPT09IHQgJiYgKGUuY2FjaGUgPSAhMSksIGUuY3Jvc3NEb21haW4gJiYgKGUudHlwZSA9IFwiR0VUXCIsIGUuZ2xvYmFsID0gITEpIH0pLCBiLmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIiwgZnVuY3Rpb24gKGUpIHsgaWYgKGUuY3Jvc3NEb21haW4pIHsgdmFyIG4sIHIgPSBvLmhlYWQgfHwgYihcImhlYWRcIilbMF0gfHwgby5kb2N1bWVudEVsZW1lbnQ7IHJldHVybiB7IHNlbmQ6IGZ1bmN0aW9uICh0LCBpKSB7IG4gPSBvLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksIG4uYXN5bmMgPSAhMCwgZS5zY3JpcHRDaGFyc2V0ICYmIChuLmNoYXJzZXQgPSBlLnNjcmlwdENoYXJzZXQpLCBuLnNyYyA9IGUudXJsLCBuLm9ubG9hZCA9IG4ub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKGUsIHQpIHsgKHQgfHwgIW4ucmVhZHlTdGF0ZSB8fCAvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KG4ucmVhZHlTdGF0ZSkpICYmIChuLm9ubG9hZCA9IG4ub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbCwgbi5wYXJlbnROb2RlICYmIG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSwgbiA9IG51bGwsIHQgfHwgaSgyMDAsIFwic3VjY2Vzc1wiKSkgfSwgci5pbnNlcnRCZWZvcmUobiwgci5maXJzdENoaWxkKSB9LCBhYm9ydDogZnVuY3Rpb24gKCkgeyBuICYmIG4ub25sb2FkKHQsICEwKSB9IH0gfSB9KTsgdmFyIE9uID0gW10sIEJuID0gLyg9KVxcPyg/PSZ8JCl8XFw/XFw/LzsgYi5hamF4U2V0dXAoeyBqc29ucDogXCJjYWxsYmFja1wiLCBqc29ucENhbGxiYWNrOiBmdW5jdGlvbiAoKSB7IHZhciBlID0gT24ucG9wKCkgfHwgYi5leHBhbmRvICsgXCJfXCIgKyB2bisrOyByZXR1cm4gdGhpc1tlXSA9ICEwLCBlIH0gfSksIGIuYWpheFByZWZpbHRlcihcImpzb24ganNvbnBcIiwgZnVuY3Rpb24gKG4sIHIsIGkpIHsgdmFyIG8sIGEsIHMsIHUgPSBuLmpzb25wICE9PSAhMSAmJiAoQm4udGVzdChuLnVybCkgPyBcInVybFwiIDogXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5kYXRhICYmICEobi5jb250ZW50VHlwZSB8fCBcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpICYmIEJuLnRlc3Qobi5kYXRhKSAmJiBcImRhdGFcIik7IHJldHVybiB1IHx8IFwianNvbnBcIiA9PT0gbi5kYXRhVHlwZXNbMF0gPyAobyA9IG4uanNvbnBDYWxsYmFjayA9IGIuaXNGdW5jdGlvbihuLmpzb25wQ2FsbGJhY2spID8gbi5qc29ucENhbGxiYWNrKCkgOiBuLmpzb25wQ2FsbGJhY2ssIHUgPyBuW3VdID0gblt1XS5yZXBsYWNlKEJuLCBcIiQxXCIgKyBvKSA6IG4uanNvbnAgIT09ICExICYmIChuLnVybCArPSAoYm4udGVzdChuLnVybCkgPyBcIiZcIiA6IFwiP1wiKSArIG4uanNvbnAgKyBcIj1cIiArIG8pLCBuLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHMgfHwgYi5lcnJvcihvICsgXCIgd2FzIG5vdCBjYWxsZWRcIiksIHNbMF0gfSwgbi5kYXRhVHlwZXNbMF0gPSBcImpzb25cIiwgYSA9IGVbb10sIGVbb10gPSBmdW5jdGlvbiAoKSB7IHMgPSBhcmd1bWVudHMgfSwgaS5hbHdheXMoZnVuY3Rpb24gKCkgeyBlW29dID0gYSwgbltvXSAmJiAobi5qc29ucENhbGxiYWNrID0gci5qc29ucENhbGxiYWNrLCBPbi5wdXNoKG8pKSwgcyAmJiBiLmlzRnVuY3Rpb24oYSkgJiYgYShzWzBdKSwgcyA9IGEgPSB0IH0pLCBcInNjcmlwdFwiKSA6IHQgfSk7IHZhciBQbiwgUm4sIFduID0gMCwgJG4gPSBlLkFjdGl2ZVhPYmplY3QgJiYgZnVuY3Rpb24gKCkgeyB2YXIgZTsgZm9yIChlIGluIFBuKSBQbltlXSh0LCAhMCkgfTsgZnVuY3Rpb24gSW4oKSB7IHRyeSB7IHJldHVybiBuZXcgZS5YTUxIdHRwUmVxdWVzdCB9IGNhdGNoICh0KSB7IH0gfSBmdW5jdGlvbiB6bigpIHsgdHJ5IHsgcmV0dXJuIG5ldyBlLkFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKSB9IGNhdGNoICh0KSB7IH0gfSBiLmFqYXhTZXR0aW5ncy54aHIgPSBlLkFjdGl2ZVhPYmplY3QgPyBmdW5jdGlvbiAoKSB7IHJldHVybiAhdGhpcy5pc0xvY2FsICYmIEluKCkgfHwgem4oKSB9IDogSW4sIFJuID0gYi5hamF4U2V0dGluZ3MueGhyKCksIGIuc3VwcG9ydC5jb3JzID0gISFSbiAmJiBcIndpdGhDcmVkZW50aWFsc1wiIGluIFJuLCBSbiA9IGIuc3VwcG9ydC5hamF4ID0gISFSbiwgUm4gJiYgYi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uIChuKSB7IGlmICghbi5jcm9zc0RvbWFpbiB8fCBiLnN1cHBvcnQuY29ycykgeyB2YXIgcjsgcmV0dXJuIHsgc2VuZDogZnVuY3Rpb24gKGksIG8pIHsgdmFyIGEsIHMsIHUgPSBuLnhocigpOyBpZiAobi51c2VybmFtZSA/IHUub3BlbihuLnR5cGUsIG4udXJsLCBuLmFzeW5jLCBuLnVzZXJuYW1lLCBuLnBhc3N3b3JkKSA6IHUub3BlbihuLnR5cGUsIG4udXJsLCBuLmFzeW5jKSwgbi54aHJGaWVsZHMpIGZvciAocyBpbiBuLnhockZpZWxkcykgdVtzXSA9IG4ueGhyRmllbGRzW3NdOyBuLm1pbWVUeXBlICYmIHUub3ZlcnJpZGVNaW1lVHlwZSAmJiB1Lm92ZXJyaWRlTWltZVR5cGUobi5taW1lVHlwZSksIG4uY3Jvc3NEb21haW4gfHwgaVtcIlgtUmVxdWVzdGVkLVdpdGhcIl0gfHwgKGlbXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiKTsgdHJ5IHsgZm9yIChzIGluIGkpIHUuc2V0UmVxdWVzdEhlYWRlcihzLCBpW3NdKSB9IGNhdGNoIChsKSB7IH0gdS5zZW5kKG4uaGFzQ29udGVudCAmJiBuLmRhdGEgfHwgbnVsbCksIHIgPSBmdW5jdGlvbiAoZSwgaSkgeyB2YXIgcywgbCwgYywgcDsgdHJ5IHsgaWYgKHIgJiYgKGkgfHwgNCA9PT0gdS5yZWFkeVN0YXRlKSkgaWYgKHIgPSB0LCBhICYmICh1Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGIubm9vcCwgJG4gJiYgZGVsZXRlIFBuW2FdKSwgaSkgNCAhPT0gdS5yZWFkeVN0YXRlICYmIHUuYWJvcnQoKTsgZWxzZSB7IHAgPSB7fSwgcyA9IHUuc3RhdHVzLCBsID0gdS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdS5yZXNwb25zZVRleHQgJiYgKHAudGV4dCA9IHUucmVzcG9uc2VUZXh0KTsgdHJ5IHsgYyA9IHUuc3RhdHVzVGV4dCB9IGNhdGNoIChmKSB7IGMgPSBcIlwiIH0gcyB8fCAhbi5pc0xvY2FsIHx8IG4uY3Jvc3NEb21haW4gPyAxMjIzID09PSBzICYmIChzID0gMjA0KSA6IHMgPSBwLnRleHQgPyAyMDAgOiA0MDQgfSB9IGNhdGNoIChkKSB7IGkgfHwgbygtMSwgZCkgfSBwICYmIG8ocywgYywgcCwgbCkgfSwgbi5hc3luYyA/IDQgPT09IHUucmVhZHlTdGF0ZSA/IHNldFRpbWVvdXQocikgOiAoYSA9ICsrV24sICRuICYmIChQbiB8fCAoUG4gPSB7fSwgYihlKS51bmxvYWQoJG4pKSwgUG5bYV0gPSByKSwgdS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSByKSA6IHIoKSB9LCBhYm9ydDogZnVuY3Rpb24gKCkgeyByICYmIHIodCwgITApIH0gfSB9IH0pOyB2YXIgWG4sIFVuLCBWbiA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLywgWW4gPSBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiICsgeCArIFwiKShbYS16JV0qKSRcIiwgXCJpXCIpLCBKbiA9IC9xdWV1ZUhvb2tzJC8sIEduID0gW25yXSwgUW4gPSB7IFwiKlwiOiBbZnVuY3Rpb24gKGUsIHQpIHsgdmFyIG4sIHIsIGkgPSB0aGlzLmNyZWF0ZVR3ZWVuKGUsIHQpLCBvID0gWW4uZXhlYyh0KSwgYSA9IGkuY3VyKCksIHMgPSArYSB8fCAwLCB1ID0gMSwgbCA9IDIwOyBpZiAobykgeyBpZiAobiA9ICtvWzJdLCByID0gb1szXSB8fCAoYi5jc3NOdW1iZXJbZV0gPyBcIlwiIDogXCJweFwiKSwgXCJweFwiICE9PSByICYmIHMpIHsgcyA9IGIuY3NzKGkuZWxlbSwgZSwgITApIHx8IG4gfHwgMTsgZG8gdSA9IHUgfHwgXCIuNVwiLCBzIC89IHUsIGIuc3R5bGUoaS5lbGVtLCBlLCBzICsgcik7IHdoaWxlICh1ICE9PSAodSA9IGkuY3VyKCkgLyBhKSAmJiAxICE9PSB1ICYmIC0tbCkgfSBpLnVuaXQgPSByLCBpLnN0YXJ0ID0gcywgaS5lbmQgPSBvWzFdID8gcyArIChvWzFdICsgMSkgKiBuIDogbiB9IHJldHVybiBpIH0gXSB9OyBmdW5jdGlvbiBLbigpIHsgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBYbiA9IHQgfSksIFhuID0gYi5ub3coKSB9IGZ1bmN0aW9uIFpuKGUsIHQpIHsgYi5lYWNoKHQsIGZ1bmN0aW9uICh0LCBuKSB7IHZhciByID0gKFFuW3RdIHx8IFtdKS5jb25jYXQoUW5bXCIqXCJdKSwgaSA9IDAsIG8gPSByLmxlbmd0aDsgZm9yICg7IG8gPiBpOyBpKyspIGlmIChyW2ldLmNhbGwoZSwgdCwgbikpIHJldHVybiB9KSB9IGZ1bmN0aW9uIGVyKGUsIHQsIG4pIHsgdmFyIHIsIGksIG8gPSAwLCBhID0gR24ubGVuZ3RoLCBzID0gYi5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbiAoKSB7IGRlbGV0ZSB1LmVsZW0gfSksIHUgPSBmdW5jdGlvbiAoKSB7IGlmIChpKSByZXR1cm4gITE7IHZhciB0ID0gWG4gfHwgS24oKSwgbiA9IE1hdGgubWF4KDAsIGwuc3RhcnRUaW1lICsgbC5kdXJhdGlvbiAtIHQpLCByID0gbiAvIGwuZHVyYXRpb24gfHwgMCwgbyA9IDEgLSByLCBhID0gMCwgdSA9IGwudHdlZW5zLmxlbmd0aDsgZm9yICg7IHUgPiBhOyBhKyspIGwudHdlZW5zW2FdLnJ1bihvKTsgcmV0dXJuIHMubm90aWZ5V2l0aChlLCBbbCwgbywgbl0pLCAxID4gbyAmJiB1ID8gbiA6IChzLnJlc29sdmVXaXRoKGUsIFtsXSksICExKSB9LCBsID0gcy5wcm9taXNlKHsgZWxlbTogZSwgcHJvcHM6IGIuZXh0ZW5kKHt9LCB0KSwgb3B0czogYi5leHRlbmQoITAsIHsgc3BlY2lhbEVhc2luZzoge30gfSwgbiksIG9yaWdpbmFsUHJvcGVydGllczogdCwgb3JpZ2luYWxPcHRpb25zOiBuLCBzdGFydFRpbWU6IFhuIHx8IEtuKCksIGR1cmF0aW9uOiBuLmR1cmF0aW9uLCB0d2VlbnM6IFtdLCBjcmVhdGVUd2VlbjogZnVuY3Rpb24gKHQsIG4pIHsgdmFyIHIgPSBiLlR3ZWVuKGUsIGwub3B0cywgdCwgbiwgbC5vcHRzLnNwZWNpYWxFYXNpbmdbdF0gfHwgbC5vcHRzLmVhc2luZyk7IHJldHVybiBsLnR3ZWVucy5wdXNoKHIpLCByIH0sIHN0b3A6IGZ1bmN0aW9uICh0KSB7IHZhciBuID0gMCwgciA9IHQgPyBsLnR3ZWVucy5sZW5ndGggOiAwOyBpZiAoaSkgcmV0dXJuIHRoaXM7IGZvciAoaSA9ICEwOyByID4gbjsgbisrKSBsLnR3ZWVuc1tuXS5ydW4oMSk7IHJldHVybiB0ID8gcy5yZXNvbHZlV2l0aChlLCBbbCwgdF0pIDogcy5yZWplY3RXaXRoKGUsIFtsLCB0XSksIHRoaXMgfSB9KSwgYyA9IGwucHJvcHM7IGZvciAodHIoYywgbC5vcHRzLnNwZWNpYWxFYXNpbmcpOyBhID4gbzsgbysrKSBpZiAociA9IEduW29dLmNhbGwobCwgZSwgYywgbC5vcHRzKSkgcmV0dXJuIHI7IHJldHVybiBabihsLCBjKSwgYi5pc0Z1bmN0aW9uKGwub3B0cy5zdGFydCkgJiYgbC5vcHRzLnN0YXJ0LmNhbGwoZSwgbCksIGIuZngudGltZXIoYi5leHRlbmQodSwgeyBlbGVtOiBlLCBhbmltOiBsLCBxdWV1ZTogbC5vcHRzLnF1ZXVlIH0pKSwgbC5wcm9ncmVzcyhsLm9wdHMucHJvZ3Jlc3MpLmRvbmUobC5vcHRzLmRvbmUsIGwub3B0cy5jb21wbGV0ZSkuZmFpbChsLm9wdHMuZmFpbCkuYWx3YXlzKGwub3B0cy5hbHdheXMpIH0gZnVuY3Rpb24gdHIoZSwgdCkgeyB2YXIgbiwgciwgaSwgbywgYTsgZm9yIChpIGluIGUpIGlmIChyID0gYi5jYW1lbENhc2UoaSksIG8gPSB0W3JdLCBuID0gZVtpXSwgYi5pc0FycmF5KG4pICYmIChvID0gblsxXSwgbiA9IGVbaV0gPSBuWzBdKSwgaSAhPT0gciAmJiAoZVtyXSA9IG4sIGRlbGV0ZSBlW2ldKSwgYSA9IGIuY3NzSG9va3Nbcl0sIGEgJiYgXCJleHBhbmRcIiBpbiBhKSB7IG4gPSBhLmV4cGFuZChuKSwgZGVsZXRlIGVbcl07IGZvciAoaSBpbiBuKSBpIGluIGUgfHwgKGVbaV0gPSBuW2ldLCB0W2ldID0gbykgfSBlbHNlIHRbcl0gPSBvIH0gYi5BbmltYXRpb24gPSBiLmV4dGVuZChlciwgeyB0d2VlbmVyOiBmdW5jdGlvbiAoZSwgdCkgeyBiLmlzRnVuY3Rpb24oZSkgPyAodCA9IGUsIGUgPSBbXCIqXCJdKSA6IGUgPSBlLnNwbGl0KFwiIFwiKTsgdmFyIG4sIHIgPSAwLCBpID0gZS5sZW5ndGg7IGZvciAoOyBpID4gcjsgcisrKSBuID0gZVtyXSwgUW5bbl0gPSBRbltuXSB8fCBbXSwgUW5bbl0udW5zaGlmdCh0KSB9LCBwcmVmaWx0ZXI6IGZ1bmN0aW9uIChlLCB0KSB7IHQgPyBHbi51bnNoaWZ0KGUpIDogR24ucHVzaChlKSB9IH0pOyBmdW5jdGlvbiBucihlLCB0LCBuKSB7IHZhciByLCBpLCBvLCBhLCBzLCB1LCBsLCBjLCBwLCBmID0gdGhpcywgZCA9IGUuc3R5bGUsIGggPSB7fSwgZyA9IFtdLCBtID0gZS5ub2RlVHlwZSAmJiBubihlKTsgbi5xdWV1ZSB8fCAoYyA9IGIuX3F1ZXVlSG9va3MoZSwgXCJmeFwiKSwgbnVsbCA9PSBjLnVucXVldWVkICYmIChjLnVucXVldWVkID0gMCwgcCA9IGMuZW1wdHkuZmlyZSwgYy5lbXB0eS5maXJlID0gZnVuY3Rpb24gKCkgeyBjLnVucXVldWVkIHx8IHAoKSB9KSwgYy51bnF1ZXVlZCsrLCBmLmFsd2F5cyhmdW5jdGlvbiAoKSB7IGYuYWx3YXlzKGZ1bmN0aW9uICgpIHsgYy51bnF1ZXVlZC0tLCBiLnF1ZXVlKGUsIFwiZnhcIikubGVuZ3RoIHx8IGMuZW1wdHkuZmlyZSgpIH0pIH0pKSwgMSA9PT0gZS5ub2RlVHlwZSAmJiAoXCJoZWlnaHRcIiBpbiB0IHx8IFwid2lkdGhcIiBpbiB0KSAmJiAobi5vdmVyZmxvdyA9IFtkLm92ZXJmbG93LCBkLm92ZXJmbG93WCwgZC5vdmVyZmxvd1ldLCBcImlubGluZVwiID09PSBiLmNzcyhlLCBcImRpc3BsYXlcIikgJiYgXCJub25lXCIgPT09IGIuY3NzKGUsIFwiZmxvYXRcIikgJiYgKGIuc3VwcG9ydC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0ICYmIFwiaW5saW5lXCIgIT09IHVuKGUubm9kZU5hbWUpID8gZC56b29tID0gMSA6IGQuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCIpKSwgbi5vdmVyZmxvdyAmJiAoZC5vdmVyZmxvdyA9IFwiaGlkZGVuXCIsIGIuc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzIHx8IGYuYWx3YXlzKGZ1bmN0aW9uICgpIHsgZC5vdmVyZmxvdyA9IG4ub3ZlcmZsb3dbMF0sIGQub3ZlcmZsb3dYID0gbi5vdmVyZmxvd1sxXSwgZC5vdmVyZmxvd1kgPSBuLm92ZXJmbG93WzJdIH0pKTsgZm9yIChpIGluIHQpIGlmIChhID0gdFtpXSwgVm4uZXhlYyhhKSkgeyBpZiAoZGVsZXRlIHRbaV0sIHUgPSB1IHx8IFwidG9nZ2xlXCIgPT09IGEsIGEgPT09IChtID8gXCJoaWRlXCIgOiBcInNob3dcIikpIGNvbnRpbnVlOyBnLnB1c2goaSkgfSBpZiAobyA9IGcubGVuZ3RoKSB7IHMgPSBiLl9kYXRhKGUsIFwiZnhzaG93XCIpIHx8IGIuX2RhdGEoZSwgXCJmeHNob3dcIiwge30pLCBcImhpZGRlblwiIGluIHMgJiYgKG0gPSBzLmhpZGRlbiksIHUgJiYgKHMuaGlkZGVuID0gIW0pLCBtID8gYihlKS5zaG93KCkgOiBmLmRvbmUoZnVuY3Rpb24gKCkgeyBiKGUpLmhpZGUoKSB9KSwgZi5kb25lKGZ1bmN0aW9uICgpIHsgdmFyIHQ7IGIuX3JlbW92ZURhdGEoZSwgXCJmeHNob3dcIik7IGZvciAodCBpbiBoKSBiLnN0eWxlKGUsIHQsIGhbdF0pIH0pOyBmb3IgKGkgPSAwOyBvID4gaTsgaSsrKSByID0gZ1tpXSwgbCA9IGYuY3JlYXRlVHdlZW4ociwgbSA/IHNbcl0gOiAwKSwgaFtyXSA9IHNbcl0gfHwgYi5zdHlsZShlLCByKSwgciBpbiBzIHx8IChzW3JdID0gbC5zdGFydCwgbSAmJiAobC5lbmQgPSBsLnN0YXJ0LCBsLnN0YXJ0ID0gXCJ3aWR0aFwiID09PSByIHx8IFwiaGVpZ2h0XCIgPT09IHIgPyAxIDogMCkpIH0gfSBmdW5jdGlvbiBycihlLCB0LCBuLCByLCBpKSB7IHJldHVybiBuZXcgcnIucHJvdG90eXBlLmluaXQoZSwgdCwgbiwgciwgaSkgfSBiLlR3ZWVuID0gcnIsIHJyLnByb3RvdHlwZSA9IHsgY29uc3RydWN0b3I6IHJyLCBpbml0OiBmdW5jdGlvbiAoZSwgdCwgbiwgciwgaSwgbykgeyB0aGlzLmVsZW0gPSBlLCB0aGlzLnByb3AgPSBuLCB0aGlzLmVhc2luZyA9IGkgfHwgXCJzd2luZ1wiLCB0aGlzLm9wdGlvbnMgPSB0LCB0aGlzLnN0YXJ0ID0gdGhpcy5ub3cgPSB0aGlzLmN1cigpLCB0aGlzLmVuZCA9IHIsIHRoaXMudW5pdCA9IG8gfHwgKGIuY3NzTnVtYmVyW25dID8gXCJcIiA6IFwicHhcIikgfSwgY3VyOiBmdW5jdGlvbiAoKSB7IHZhciBlID0gcnIucHJvcEhvb2tzW3RoaXMucHJvcF07IHJldHVybiBlICYmIGUuZ2V0ID8gZS5nZXQodGhpcykgOiByci5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpIH0sIHJ1bjogZnVuY3Rpb24gKGUpIHsgdmFyIHQsIG4gPSByci5wcm9wSG9va3NbdGhpcy5wcm9wXTsgcmV0dXJuIHRoaXMucG9zID0gdCA9IHRoaXMub3B0aW9ucy5kdXJhdGlvbiA/IGIuZWFzaW5nW3RoaXMuZWFzaW5nXShlLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBlLCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24pIDogZSwgdGhpcy5ub3cgPSAodGhpcy5lbmQgLSB0aGlzLnN0YXJ0KSAqIHQgKyB0aGlzLnN0YXJ0LCB0aGlzLm9wdGlvbnMuc3RlcCAmJiB0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSwgdGhpcy5ub3csIHRoaXMpLCBuICYmIG4uc2V0ID8gbi5zZXQodGhpcykgOiByci5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLCB0aGlzIH0gfSwgcnIucHJvdG90eXBlLmluaXQucHJvdG90eXBlID0gcnIucHJvdG90eXBlLCByci5wcm9wSG9va3MgPSB7IF9kZWZhdWx0OiB7IGdldDogZnVuY3Rpb24gKGUpIHsgdmFyIHQ7IHJldHVybiBudWxsID09IGUuZWxlbVtlLnByb3BdIHx8IGUuZWxlbS5zdHlsZSAmJiBudWxsICE9IGUuZWxlbS5zdHlsZVtlLnByb3BdID8gKHQgPSBiLmNzcyhlLmVsZW0sIGUucHJvcCwgXCJcIiksIHQgJiYgXCJhdXRvXCIgIT09IHQgPyB0IDogMCkgOiBlLmVsZW1bZS5wcm9wXSB9LCBzZXQ6IGZ1bmN0aW9uIChlKSB7IGIuZnguc3RlcFtlLnByb3BdID8gYi5meC5zdGVwW2UucHJvcF0oZSkgOiBlLmVsZW0uc3R5bGUgJiYgKG51bGwgIT0gZS5lbGVtLnN0eWxlW2IuY3NzUHJvcHNbZS5wcm9wXV0gfHwgYi5jc3NIb29rc1tlLnByb3BdKSA/IGIuc3R5bGUoZS5lbGVtLCBlLnByb3AsIGUubm93ICsgZS51bml0KSA6IGUuZWxlbVtlLnByb3BdID0gZS5ub3cgfSB9IH0sIHJyLnByb3BIb29rcy5zY3JvbGxUb3AgPSByci5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHsgc2V0OiBmdW5jdGlvbiAoZSkgeyBlLmVsZW0ubm9kZVR5cGUgJiYgZS5lbGVtLnBhcmVudE5vZGUgJiYgKGUuZWxlbVtlLnByb3BdID0gZS5ub3cpIH0gfSwgYi5lYWNoKFtcInRvZ2dsZVwiLCBcInNob3dcIiwgXCJoaWRlXCJdLCBmdW5jdGlvbiAoZSwgdCkgeyB2YXIgbiA9IGIuZm5bdF07IGIuZm5bdF0gPSBmdW5jdGlvbiAoZSwgciwgaSkgeyByZXR1cm4gbnVsbCA9PSBlIHx8IFwiYm9vbGVhblwiID09IHR5cGVvZiBlID8gbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogdGhpcy5hbmltYXRlKGlyKHQsICEwKSwgZSwgciwgaSkgfSB9KSwgYi5mbi5leHRlbmQoeyBmYWRlVG86IGZ1bmN0aW9uIChlLCB0LCBuLCByKSB7IHJldHVybiB0aGlzLmZpbHRlcihubikuY3NzKFwib3BhY2l0eVwiLCAwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7IG9wYWNpdHk6IHQgfSwgZSwgbiwgcikgfSwgYW5pbWF0ZTogZnVuY3Rpb24gKGUsIHQsIG4sIHIpIHsgdmFyIGkgPSBiLmlzRW1wdHlPYmplY3QoZSksIG8gPSBiLnNwZWVkKHQsIG4sIHIpLCBhID0gZnVuY3Rpb24gKCkgeyB2YXIgdCA9IGVyKHRoaXMsIGIuZXh0ZW5kKHt9LCBlKSwgbyk7IGEuZmluaXNoID0gZnVuY3Rpb24gKCkgeyB0LnN0b3AoITApIH0sIChpIHx8IGIuX2RhdGEodGhpcywgXCJmaW5pc2hcIikpICYmIHQuc3RvcCghMCkgfTsgcmV0dXJuIGEuZmluaXNoID0gYSwgaSB8fCBvLnF1ZXVlID09PSAhMSA/IHRoaXMuZWFjaChhKSA6IHRoaXMucXVldWUoby5xdWV1ZSwgYSkgfSwgc3RvcDogZnVuY3Rpb24gKGUsIG4sIHIpIHsgdmFyIGkgPSBmdW5jdGlvbiAoZSkgeyB2YXIgdCA9IGUuc3RvcDsgZGVsZXRlIGUuc3RvcCwgdChyKSB9OyByZXR1cm4gXCJzdHJpbmdcIiAhPSB0eXBlb2YgZSAmJiAociA9IG4sIG4gPSBlLCBlID0gdCksIG4gJiYgZSAhPT0gITEgJiYgdGhpcy5xdWV1ZShlIHx8IFwiZnhcIiwgW10pLCB0aGlzLmVhY2goZnVuY3Rpb24gKCkgeyB2YXIgdCA9ICEwLCBuID0gbnVsbCAhPSBlICYmIGUgKyBcInF1ZXVlSG9va3NcIiwgbyA9IGIudGltZXJzLCBhID0gYi5fZGF0YSh0aGlzKTsgaWYgKG4pIGFbbl0gJiYgYVtuXS5zdG9wICYmIGkoYVtuXSk7IGVsc2UgZm9yIChuIGluIGEpIGFbbl0gJiYgYVtuXS5zdG9wICYmIEpuLnRlc3QobikgJiYgaShhW25dKTsgZm9yIChuID0gby5sZW5ndGg7IG4tLTsgKSBvW25dLmVsZW0gIT09IHRoaXMgfHwgbnVsbCAhPSBlICYmIG9bbl0ucXVldWUgIT09IGUgfHwgKG9bbl0uYW5pbS5zdG9wKHIpLCB0ID0gITEsIG8uc3BsaWNlKG4sIDEpKTsgKHQgfHwgIXIpICYmIGIuZGVxdWV1ZSh0aGlzLCBlKSB9KSB9LCBmaW5pc2g6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlICE9PSAhMSAmJiAoZSA9IGUgfHwgXCJmeFwiKSwgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsgdmFyIHQsIG4gPSBiLl9kYXRhKHRoaXMpLCByID0gbltlICsgXCJxdWV1ZVwiXSwgaSA9IG5bZSArIFwicXVldWVIb29rc1wiXSwgbyA9IGIudGltZXJzLCBhID0gciA/IHIubGVuZ3RoIDogMDsgZm9yIChuLmZpbmlzaCA9ICEwLCBiLnF1ZXVlKHRoaXMsIGUsIFtdKSwgaSAmJiBpLmN1ciAmJiBpLmN1ci5maW5pc2ggJiYgaS5jdXIuZmluaXNoLmNhbGwodGhpcyksIHQgPSBvLmxlbmd0aDsgdC0tOyApIG9bdF0uZWxlbSA9PT0gdGhpcyAmJiBvW3RdLnF1ZXVlID09PSBlICYmIChvW3RdLmFuaW0uc3RvcCghMCksIG8uc3BsaWNlKHQsIDEpKTsgZm9yICh0ID0gMDsgYSA+IHQ7IHQrKykgclt0XSAmJiByW3RdLmZpbmlzaCAmJiByW3RdLmZpbmlzaC5jYWxsKHRoaXMpOyBkZWxldGUgbi5maW5pc2ggfSkgfSB9KTsgZnVuY3Rpb24gaXIoZSwgdCkgeyB2YXIgbiwgciA9IHsgaGVpZ2h0OiBlIH0sIGkgPSAwOyBmb3IgKHQgPSB0ID8gMSA6IDA7IDQgPiBpOyBpICs9IDIgLSB0KSBuID0gWnRbaV0sIHJbXCJtYXJnaW5cIiArIG5dID0gcltcInBhZGRpbmdcIiArIG5dID0gZTsgcmV0dXJuIHQgJiYgKHIub3BhY2l0eSA9IHIud2lkdGggPSBlKSwgciB9IGIuZWFjaCh7IHNsaWRlRG93bjogaXIoXCJzaG93XCIpLCBzbGlkZVVwOiBpcihcImhpZGVcIiksIHNsaWRlVG9nZ2xlOiBpcihcInRvZ2dsZVwiKSwgZmFkZUluOiB7IG9wYWNpdHk6IFwic2hvd1wiIH0sIGZhZGVPdXQ6IHsgb3BhY2l0eTogXCJoaWRlXCIgfSwgZmFkZVRvZ2dsZTogeyBvcGFjaXR5OiBcInRvZ2dsZVwifSB9LCBmdW5jdGlvbiAoZSwgdCkgeyBiLmZuW2VdID0gZnVuY3Rpb24gKGUsIG4sIHIpIHsgcmV0dXJuIHRoaXMuYW5pbWF0ZSh0LCBlLCBuLCByKSB9IH0pLCBiLnNwZWVkID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsgdmFyIHIgPSBlICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgPyBiLmV4dGVuZCh7fSwgZSkgOiB7IGNvbXBsZXRlOiBuIHx8ICFuICYmIHQgfHwgYi5pc0Z1bmN0aW9uKGUpICYmIGUsIGR1cmF0aW9uOiBlLCBlYXNpbmc6IG4gJiYgdCB8fCB0ICYmICFiLmlzRnVuY3Rpb24odCkgJiYgdCB9OyByZXR1cm4gci5kdXJhdGlvbiA9IGIuZngub2ZmID8gMCA6IFwibnVtYmVyXCIgPT0gdHlwZW9mIHIuZHVyYXRpb24gPyByLmR1cmF0aW9uIDogci5kdXJhdGlvbiBpbiBiLmZ4LnNwZWVkcyA/IGIuZnguc3BlZWRzW3IuZHVyYXRpb25dIDogYi5meC5zcGVlZHMuX2RlZmF1bHQsIChudWxsID09IHIucXVldWUgfHwgci5xdWV1ZSA9PT0gITApICYmIChyLnF1ZXVlID0gXCJmeFwiKSwgci5vbGQgPSByLmNvbXBsZXRlLCByLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgeyBiLmlzRnVuY3Rpb24oci5vbGQpICYmIHIub2xkLmNhbGwodGhpcyksIHIucXVldWUgJiYgYi5kZXF1ZXVlKHRoaXMsIHIucXVldWUpIH0sIHIgfSwgYi5lYXNpbmcgPSB7IGxpbmVhcjogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUgfSwgc3dpbmc6IGZ1bmN0aW9uIChlKSB7IHJldHVybiAuNSAtIE1hdGguY29zKGUgKiBNYXRoLlBJKSAvIDIgfSB9LCBiLnRpbWVycyA9IFtdLCBiLmZ4ID0gcnIucHJvdG90eXBlLmluaXQsIGIuZngudGljayA9IGZ1bmN0aW9uICgpIHsgdmFyIGUsIG4gPSBiLnRpbWVycywgciA9IDA7IGZvciAoWG4gPSBiLm5vdygpOyBuLmxlbmd0aCA+IHI7IHIrKykgZSA9IG5bcl0sIGUoKSB8fCBuW3JdICE9PSBlIHx8IG4uc3BsaWNlKHItLSwgMSk7IG4ubGVuZ3RoIHx8IGIuZnguc3RvcCgpLCBYbiA9IHQgfSwgYi5meC50aW1lciA9IGZ1bmN0aW9uIChlKSB7IGUoKSAmJiBiLnRpbWVycy5wdXNoKGUpICYmIGIuZnguc3RhcnQoKSB9LCBiLmZ4LmludGVydmFsID0gMTMsIGIuZnguc3RhcnQgPSBmdW5jdGlvbiAoKSB7IFVuIHx8IChVbiA9IHNldEludGVydmFsKGIuZngudGljaywgYi5meC5pbnRlcnZhbCkpIH0sIGIuZnguc3RvcCA9IGZ1bmN0aW9uICgpIHsgY2xlYXJJbnRlcnZhbChVbiksIFVuID0gbnVsbCB9LCBiLmZ4LnNwZWVkcyA9IHsgc2xvdzogNjAwLCBmYXN0OiAyMDAsIF9kZWZhdWx0OiA0MDAgfSwgYi5meC5zdGVwID0ge30sIGIuZXhwciAmJiBiLmV4cHIuZmlsdGVycyAmJiAoYi5leHByLmZpbHRlcnMuYW5pbWF0ZWQgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gYi5ncmVwKGIudGltZXJzLCBmdW5jdGlvbiAodCkgeyByZXR1cm4gZSA9PT0gdC5lbGVtIH0pLmxlbmd0aCB9KSwgYi5mbi5vZmZzZXQgPSBmdW5jdGlvbiAoZSkgeyBpZiAoYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGUgPT09IHQgPyB0aGlzIDogdGhpcy5lYWNoKGZ1bmN0aW9uICh0KSB7IGIub2Zmc2V0LnNldE9mZnNldCh0aGlzLCBlLCB0KSB9KTsgdmFyIG4sIHIsIG8gPSB7IHRvcDogMCwgbGVmdDogMCB9LCBhID0gdGhpc1swXSwgcyA9IGEgJiYgYS5vd25lckRvY3VtZW50OyBpZiAocykgcmV0dXJuIG4gPSBzLmRvY3VtZW50RWxlbWVudCwgYi5jb250YWlucyhuLCBhKSA/ICh0eXBlb2YgYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgIT09IGkgJiYgKG8gPSBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSwgciA9IG9yKHMpLCB7IHRvcDogby50b3AgKyAoci5wYWdlWU9mZnNldCB8fCBuLnNjcm9sbFRvcCkgLSAobi5jbGllbnRUb3AgfHwgMCksIGxlZnQ6IG8ubGVmdCArIChyLnBhZ2VYT2Zmc2V0IHx8IG4uc2Nyb2xsTGVmdCkgLSAobi5jbGllbnRMZWZ0IHx8IDApIH0pIDogbyB9LCBiLm9mZnNldCA9IHsgc2V0T2Zmc2V0OiBmdW5jdGlvbiAoZSwgdCwgbikgeyB2YXIgciA9IGIuY3NzKGUsIFwicG9zaXRpb25cIik7IFwic3RhdGljXCIgPT09IHIgJiYgKGUuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCIpOyB2YXIgaSA9IGIoZSksIG8gPSBpLm9mZnNldCgpLCBhID0gYi5jc3MoZSwgXCJ0b3BcIiksIHMgPSBiLmNzcyhlLCBcImxlZnRcIiksIHUgPSAoXCJhYnNvbHV0ZVwiID09PSByIHx8IFwiZml4ZWRcIiA9PT0gcikgJiYgYi5pbkFycmF5KFwiYXV0b1wiLCBbYSwgc10pID4gLTEsIGwgPSB7fSwgYyA9IHt9LCBwLCBmOyB1ID8gKGMgPSBpLnBvc2l0aW9uKCksIHAgPSBjLnRvcCwgZiA9IGMubGVmdCkgOiAocCA9IHBhcnNlRmxvYXQoYSkgfHwgMCwgZiA9IHBhcnNlRmxvYXQocykgfHwgMCksIGIuaXNGdW5jdGlvbih0KSAmJiAodCA9IHQuY2FsbChlLCBuLCBvKSksIG51bGwgIT0gdC50b3AgJiYgKGwudG9wID0gdC50b3AgLSBvLnRvcCArIHApLCBudWxsICE9IHQubGVmdCAmJiAobC5sZWZ0ID0gdC5sZWZ0IC0gby5sZWZ0ICsgZiksIFwidXNpbmdcIiBpbiB0ID8gdC51c2luZy5jYWxsKGUsIGwpIDogaS5jc3MobCkgfSB9LCBiLmZuLmV4dGVuZCh7IHBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7IGlmICh0aGlzWzBdKSB7IHZhciBlLCB0LCBuID0geyB0b3A6IDAsIGxlZnQ6IDAgfSwgciA9IHRoaXNbMF07IHJldHVybiBcImZpeGVkXCIgPT09IGIuY3NzKHIsIFwicG9zaXRpb25cIikgPyB0ID0gci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IChlID0gdGhpcy5vZmZzZXRQYXJlbnQoKSwgdCA9IHRoaXMub2Zmc2V0KCksIGIubm9kZU5hbWUoZVswXSwgXCJodG1sXCIpIHx8IChuID0gZS5vZmZzZXQoKSksIG4udG9wICs9IGIuY3NzKGVbMF0sIFwiYm9yZGVyVG9wV2lkdGhcIiwgITApLCBuLmxlZnQgKz0gYi5jc3MoZVswXSwgXCJib3JkZXJMZWZ0V2lkdGhcIiwgITApKSwgeyB0b3A6IHQudG9wIC0gbi50b3AgLSBiLmNzcyhyLCBcIm1hcmdpblRvcFwiLCAhMCksIGxlZnQ6IHQubGVmdCAtIG4ubGVmdCAtIGIuY3NzKHIsIFwibWFyZ2luTGVmdFwiLCAhMCl9IH0gfSwgb2Zmc2V0UGFyZW50OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoKSB7IHZhciBlID0gdGhpcy5vZmZzZXRQYXJlbnQgfHwgby5kb2N1bWVudEVsZW1lbnQ7IHdoaWxlIChlICYmICFiLm5vZGVOYW1lKGUsIFwiaHRtbFwiKSAmJiBcInN0YXRpY1wiID09PSBiLmNzcyhlLCBcInBvc2l0aW9uXCIpKSBlID0gZS5vZmZzZXRQYXJlbnQ7IHJldHVybiBlIHx8IG8uZG9jdW1lbnRFbGVtZW50IH0pIH0gfSksIGIuZWFjaCh7IHNjcm9sbExlZnQ6IFwicGFnZVhPZmZzZXRcIiwgc2Nyb2xsVG9wOiBcInBhZ2VZT2Zmc2V0XCIgfSwgZnVuY3Rpb24gKGUsIG4pIHsgdmFyIHIgPSAvWS8udGVzdChuKTsgYi5mbltlXSA9IGZ1bmN0aW9uIChpKSB7IHJldHVybiBiLmFjY2Vzcyh0aGlzLCBmdW5jdGlvbiAoZSwgaSwgbykgeyB2YXIgYSA9IG9yKGUpOyByZXR1cm4gbyA9PT0gdCA/IGEgPyBuIGluIGEgPyBhW25dIDogYS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbaV0gOiBlW2ldIDogKGEgPyBhLnNjcm9sbFRvKHIgPyBiKGEpLnNjcm9sbExlZnQoKSA6IG8sIHIgPyBvIDogYihhKS5zY3JvbGxUb3AoKSkgOiBlW2ldID0gbywgdCkgfSwgZSwgaSwgYXJndW1lbnRzLmxlbmd0aCwgbnVsbCkgfSB9KTsgZnVuY3Rpb24gb3IoZSkgeyByZXR1cm4gYi5pc1dpbmRvdyhlKSA/IGUgOiA5ID09PSBlLm5vZGVUeXBlID8gZS5kZWZhdWx0VmlldyB8fCBlLnBhcmVudFdpbmRvdyA6ICExIH0gYi5lYWNoKHsgSGVpZ2h0OiBcImhlaWdodFwiLCBXaWR0aDogXCJ3aWR0aFwiIH0sIGZ1bmN0aW9uIChlLCBuKSB7IGIuZWFjaCh7IHBhZGRpbmc6IFwiaW5uZXJcIiArIGUsIGNvbnRlbnQ6IG4sIFwiXCI6IFwib3V0ZXJcIiArIGUgfSwgZnVuY3Rpb24gKHIsIGkpIHsgYi5mbltpXSA9IGZ1bmN0aW9uIChpLCBvKSB7IHZhciBhID0gYXJndW1lbnRzLmxlbmd0aCAmJiAociB8fCBcImJvb2xlYW5cIiAhPSB0eXBlb2YgaSksIHMgPSByIHx8IChpID09PSAhMCB8fCBvID09PSAhMCA/IFwibWFyZ2luXCIgOiBcImJvcmRlclwiKTsgcmV0dXJuIGIuYWNjZXNzKHRoaXMsIGZ1bmN0aW9uIChuLCByLCBpKSB7IHZhciBvOyByZXR1cm4gYi5pc1dpbmRvdyhuKSA/IG4uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIgKyBlXSA6IDkgPT09IG4ubm9kZVR5cGUgPyAobyA9IG4uZG9jdW1lbnRFbGVtZW50LCBNYXRoLm1heChuLmJvZHlbXCJzY3JvbGxcIiArIGVdLCBvW1wic2Nyb2xsXCIgKyBlXSwgbi5ib2R5W1wib2Zmc2V0XCIgKyBlXSwgb1tcIm9mZnNldFwiICsgZV0sIG9bXCJjbGllbnRcIiArIGVdKSkgOiBpID09PSB0ID8gYi5jc3MobiwgciwgcykgOiBiLnN0eWxlKG4sIHIsIGksIHMpIH0sIG4sIGEgPyBpIDogdCwgYSwgbnVsbCkgfSB9KSB9KSwgZS5qUXVlcnkgPSBlLiQgPSBiLCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kICYmIGRlZmluZS5hbWQualF1ZXJ5ICYmIGRlZmluZShcImpxdWVyeVwiLCBbXSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYiB9KVxyXG59KSh3aW5kb3cpOyIsIi8qIVxuICogalF1ZXJ5IENvb2tpZSBQbHVnaW4gdjEuNC4xXG4gKiBodHRwczovL2dpdGh1Yi5jb20vY2FyaGFydGwvanF1ZXJ5LWNvb2tpZVxuICpcbiAqIENvcHlyaWdodCAyMDEzIEtsYXVzIEhhcnRsXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqL1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyBBTURcblx0XHRkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG5cdFx0Ly8gQ29tbW9uSlNcblx0XHRmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcblx0fSBlbHNlIHtcblx0XHQvLyBCcm93c2VyIGdsb2JhbHNcblx0XHRmYWN0b3J5KGpRdWVyeSk7XG5cdH1cbn0oZnVuY3Rpb24gKCQpIHtcblxuXHR2YXIgcGx1c2VzID0gL1xcKy9nO1xuXG5cdGZ1bmN0aW9uIGVuY29kZShzKSB7XG5cdFx0cmV0dXJuIGNvbmZpZy5yYXcgPyBzIDogZW5jb2RlVVJJQ29tcG9uZW50KHMpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGVjb2RlKHMpIHtcblx0XHRyZXR1cm4gY29uZmlnLnJhdyA/IHMgOiBkZWNvZGVVUklDb21wb25lbnQocyk7XG5cdH1cblxuXHRmdW5jdGlvbiBzdHJpbmdpZnlDb29raWVWYWx1ZSh2YWx1ZSkge1xuXHRcdHJldHVybiBlbmNvZGUoY29uZmlnLmpzb24gPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgOiBTdHJpbmcodmFsdWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlQ29va2llVmFsdWUocykge1xuXHRcdGlmIChzLmluZGV4T2YoJ1wiJykgPT09IDApIHtcblx0XHRcdC8vIFRoaXMgaXMgYSBxdW90ZWQgY29va2llIGFzIGFjY29yZGluZyB0byBSRkMyMDY4LCB1bmVzY2FwZS4uLlxuXHRcdFx0cyA9IHMuc2xpY2UoMSwgLTEpLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKS5yZXBsYWNlKC9cXFxcXFxcXC9nLCAnXFxcXCcpO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHQvLyBSZXBsYWNlIHNlcnZlci1zaWRlIHdyaXR0ZW4gcGx1c2VzIHdpdGggc3BhY2VzLlxuXHRcdFx0Ly8gSWYgd2UgY2FuJ3QgZGVjb2RlIHRoZSBjb29raWUsIGlnbm9yZSBpdCwgaXQncyB1bnVzYWJsZS5cblx0XHRcdC8vIElmIHdlIGNhbid0IHBhcnNlIHRoZSBjb29raWUsIGlnbm9yZSBpdCwgaXQncyB1bnVzYWJsZS5cblx0XHRcdHMgPSBkZWNvZGVVUklDb21wb25lbnQocy5yZXBsYWNlKHBsdXNlcywgJyAnKSk7XG5cdFx0XHRyZXR1cm4gY29uZmlnLmpzb24gPyBKU09OLnBhcnNlKHMpIDogcztcblx0XHR9IGNhdGNoKGUpIHt9XG5cdH1cblxuXHRmdW5jdGlvbiByZWFkKHMsIGNvbnZlcnRlcikge1xuXHRcdHZhciB2YWx1ZSA9IGNvbmZpZy5yYXcgPyBzIDogcGFyc2VDb29raWVWYWx1ZShzKTtcblx0XHRyZXR1cm4gJC5pc0Z1bmN0aW9uKGNvbnZlcnRlcikgPyBjb252ZXJ0ZXIodmFsdWUpIDogdmFsdWU7XG5cdH1cblxuXHR2YXIgY29uZmlnID0gJC5jb29raWUgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgb3B0aW9ucykge1xuXG5cdFx0Ly8gV3JpdGVcblxuXHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmICEkLmlzRnVuY3Rpb24odmFsdWUpKSB7XG5cdFx0XHRvcHRpb25zID0gJC5leHRlbmQoe30sIGNvbmZpZy5kZWZhdWx0cywgb3B0aW9ucyk7XG5cblx0XHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5leHBpcmVzID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHR2YXIgZGF5cyA9IG9wdGlvbnMuZXhwaXJlcywgdCA9IG9wdGlvbnMuZXhwaXJlcyA9IG5ldyBEYXRlKCk7XG5cdFx0XHRcdHQuc2V0VGltZSgrdCArIGRheXMgKiA4NjRlKzUpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gKGRvY3VtZW50LmNvb2tpZSA9IFtcblx0XHRcdFx0ZW5jb2RlKGtleSksICc9Jywgc3RyaW5naWZ5Q29va2llVmFsdWUodmFsdWUpLFxuXHRcdFx0XHRvcHRpb25zLmV4cGlyZXMgPyAnOyBleHBpcmVzPScgKyBvcHRpb25zLmV4cGlyZXMudG9VVENTdHJpbmcoKSA6ICcnLCAvLyB1c2UgZXhwaXJlcyBhdHRyaWJ1dGUsIG1heC1hZ2UgaXMgbm90IHN1cHBvcnRlZCBieSBJRVxuXHRcdFx0XHRvcHRpb25zLnBhdGggICAgPyAnOyBwYXRoPScgKyBvcHRpb25zLnBhdGggOiAnJyxcblx0XHRcdFx0b3B0aW9ucy5kb21haW4gID8gJzsgZG9tYWluPScgKyBvcHRpb25zLmRvbWFpbiA6ICcnLFxuXHRcdFx0XHRvcHRpb25zLnNlY3VyZSAgPyAnOyBzZWN1cmUnIDogJydcblx0XHRcdF0uam9pbignJykpO1xuXHRcdH1cblxuXHRcdC8vIFJlYWRcblxuXHRcdHZhciByZXN1bHQgPSBrZXkgPyB1bmRlZmluZWQgOiB7fTtcblxuXHRcdC8vIFRvIHByZXZlbnQgdGhlIGZvciBsb29wIGluIHRoZSBmaXJzdCBwbGFjZSBhc3NpZ24gYW4gZW1wdHkgYXJyYXlcblx0XHQvLyBpbiBjYXNlIHRoZXJlIGFyZSBubyBjb29raWVzIGF0IGFsbC4gQWxzbyBwcmV2ZW50cyBvZGQgcmVzdWx0IHdoZW5cblx0XHQvLyBjYWxsaW5nICQuY29va2llKCkuXG5cdFx0dmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUgPyBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsgJykgOiBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwLCBsID0gY29va2llcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTtcblx0XHRcdHZhciBuYW1lID0gZGVjb2RlKHBhcnRzLnNoaWZ0KCkpO1xuXHRcdFx0dmFyIGNvb2tpZSA9IHBhcnRzLmpvaW4oJz0nKTtcblxuXHRcdFx0aWYgKGtleSAmJiBrZXkgPT09IG5hbWUpIHtcblx0XHRcdFx0Ly8gSWYgc2Vjb25kIGFyZ3VtZW50ICh2YWx1ZSkgaXMgYSBmdW5jdGlvbiBpdCdzIGEgY29udmVydGVyLi4uXG5cdFx0XHRcdHJlc3VsdCA9IHJlYWQoY29va2llLCB2YWx1ZSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQcmV2ZW50IHN0b3JpbmcgYSBjb29raWUgdGhhdCB3ZSBjb3VsZG4ndCBkZWNvZGUuXG5cdFx0XHRpZiAoIWtleSAmJiAoY29va2llID0gcmVhZChjb29raWUpKSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHJlc3VsdFtuYW1lXSA9IGNvb2tpZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xuXG5cdGNvbmZpZy5kZWZhdWx0cyA9IHt9O1xuXG5cdCQucmVtb3ZlQ29va2llID0gZnVuY3Rpb24gKGtleSwgb3B0aW9ucykge1xuXHRcdGlmICgkLmNvb2tpZShrZXkpID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBNdXN0IG5vdCBhbHRlciBvcHRpb25zLCB0aHVzIGV4dGVuZGluZyBhIGZyZXNoIG9iamVjdC4uLlxuXHRcdCQuY29va2llKGtleSwgJycsICQuZXh0ZW5kKHt9LCBvcHRpb25zLCB7IGV4cGlyZXM6IC0xIH0pKTtcblx0XHRyZXR1cm4gISQuY29va2llKGtleSk7XG5cdH07XG5cbn0pKTtcbiIsIihmdW5jdGlvbigkKSB7XG4gICAgdmFyIG92ZXJsYXlJc09wZW4gPSBmYWxzZSxcbiAgICAgICAgb3ZlcmxheVJlc2l6ZVRpbWVvdXQsXG4gICAgICAgIHBvcHVwSXNPcGVuID0gZmFsc2UsXG4gICAgICAgICRkb2MgPSAkKGRvY3VtZW50KSxcbiAgICAgICAgJHdpbiA9ICQod2luZG93KTtcblxuICAgICQub3ZlcmxheSA9IHtcbiAgICAgICAgcHJvcDoge1xuICAgICAgICAgICAgYW5pbToge1xuICAgICAgICAgICAgICAgIG9wZW46IHtcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDMwMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2xvc2U6IHtcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDMwMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcGFjaXR5OiAuNyxcbiAgICAgICAgICAgIGlzSW5pdDogZmFsc2UsXG4gICAgICAgICAgICAkb3ZlcmxheTogbnVsbCxcbiAgICAgICAgICAgICRjYW52YXM6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgc2V0V0g6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYoISQub3ZlcmxheS5wcm9wLmlzSW5pdCB8fCAhJC5vdmVybGF5LnByb3AuJGNhbnZhcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vJC5vdmVybGF5LnByb3AuJG92ZXJsYXkuY3NzKHt3aWR0aDogJC5vdmVybGF5LnByb3AuJGNhbnZhcy53aWR0aCgpLCBoZWlnaHQ6ICQub3ZlcmxheS5wcm9wLiRjYW52YXMuaGVpZ2h0KCl9KTtcbiAgICAgICAgICAgICQub3ZlcmxheS5wcm9wLiRvdmVybGF5LmNzcyh7d2lkdGg6ICcxMDAlJywgaGVpZ2h0OiAkLm92ZXJsYXkucHJvcC4kY2FudmFzLmhlaWdodCgpIH0pO1xuICAgICAgICB9LFxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCQub3ZlcmxheS5wcm9wLmlzSW5pdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQub3ZlcmxheS5wcm9wLiRvdmVybGF5ID0gJCgnPGRpdiBjbGFzcz1cIm92ZXJsYXlcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCQub3ZlcmxheS5wcm9wLiRvdmVybGF5KTtcbiAgICAgICAgICAgICQub3ZlcmxheS5wcm9wLmlzSW5pdCA9IHRydWU7XG4gICAgICAgICAgICAkLm92ZXJsYXkuc2V0V0goKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJC5vdmVybGF5LnByb3AuJG92ZXJsYXkub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCgnYm9keScpLnRyaWdnZXIoJ292ZXJsYXkuY2xpY2snKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkd2luLm9uKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZihvdmVybGF5SXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChvdmVybGF5UmVzaXplVGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXlSZXNpemVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQub3ZlcmxheS5zZXRXSCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvcGVuOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgJC5vdmVybGF5LmluaXQoKTtcbiAgICAgICAgICAgICQub3ZlcmxheS5wcm9wLiRvdmVybGF5LmZhZGVUbygkLm92ZXJsYXkucHJvcC5hbmltLm9wZW4uc3BlZWQsICQub3ZlcmxheS5wcm9wLm9wYWNpdHksIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIG92ZXJsYXlJc09wZW4gPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBjbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZighJC5vdmVybGF5LnByb3AuaXNJbml0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJC5vdmVybGF5LnByb3AuJG92ZXJsYXkuZmFkZU91dCgkLm92ZXJsYXkucHJvcC5hbmltLmNsb3NlLnNwZWVkKTtcbiAgICAgICAgICAgIG92ZXJsYXlJc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNPcGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAhIW92ZXJsYXlJc09wZW47XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHBvcHVwT3BlblRpbWVvdXQgPSBudWxsO1xuICAgIHZhciBwb3B1cCA9IHtcbiAgICAgICAgb3BlbjogZnVuY3Rpb24oc2VsZWN0b3IsIGlzQ2xlYXJFcnIsIGlzUmVzZXRGb3JtKVxuICAgICAgICB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHBvcHVwT3BlblRpbWVvdXQpO1xuICAgICAgICAgICAgcG9wdXBPcGVuVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9wdXAuX29wZW4oc2VsZWN0b3IsIGlzQ2xlYXJFcnIsIGlzUmVzZXRGb3JtKTtcbiAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgIH0sXG4gICAgICAgIF9vcGVuOiBmdW5jdGlvbihzZWxlY3RvciwgaXNDbGVhckVyciwgaXNSZXNldEZvcm0pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciAkcG9wdXAgPSBwb3B1cC5fZ2V0UG9wdXAoc2VsZWN0b3IpLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvblByb3AsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU2V0dXAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gJHBvcHVwLm91dGVySGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgd2hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICBpc0NsZWFyRXJyID0gaXNDbGVhckVyciB8fCB0cnVlLFxuICAgICAgICAgICAgICAgIGlzUmVzZXRGb3JtID0gaXNSZXNldEZvcm0gfHwgdHJ1ZTtcblxuICAgICAgICAgICAgaWYoISRwb3B1cCB8fCAkcG9wdXAuaGFzQ2xhc3MoJ2lzLW9wZW4nKSkgeyByZXR1cm47IH1cblxuICAgICAgICAgICAgaWYoISFpc1Jlc2V0Rm9ybSAmJiAhJHBvcHVwLmhhc0NsYXNzKCdub3QtcmVzZXQnKSkge1xuICAgICAgICAgICAgICAgIHBvcHVwLnJlc2V0Rm9ybSgkcG9wdXApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZighIWlzQ2xlYXJFcnIpIHtcbiAgICAgICAgICAgICAgICBwb3B1cC5jbGVhckVycm9ycygkcG9wdXApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhbmltYXRpb25Qcm9wID0gJHBvcHVwLmF0dHIoJ2RhdGEtYW5pbWF0aW9uJykgfHwgJ29wYWNpdHknO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwb3NpdGlvbiA9IHBvcHVwLmdldFBvc2l0aW9uKCRwb3B1cCk7XG5cbiAgICAgICAgICAgIGlmKGFuaW1hdGlvblByb3AgPT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvblNldHVwID0ge1xuICAgICAgICAgICAgICAgICAgICAncmlnaHQnOiBwb3NpdGlvbi5yaWdodCxcbiAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHknOiAnc2hvdydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcG9zaXRpb24ucmlnaHQgPSBwYXJzZUludCgkcG9wdXAuaW5uZXJXaWR0aCgpKSotMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TZXR1cCA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHknOiAnc2hvdydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBvc2l0aW9uLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgIGlmKCBoZWlnaHQgPj0gJCh3aW5kb3cpLmhlaWdodCgpIClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24ubWFyZ2luID0gJzUwcHggYXV0byAxMDBweCc7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24ubGVmdCA9ICdhdXRvICFpbXBvcnRhbnQnO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uLnJpZ2h0ID0gJ2F1dG8gIWltcG9ydGFudCc7XG5cbiAgICAgICAgICAgICAgICAkcG9wdXAud3JhcCggXCI8ZGl2IGNsYXNzPSdwb3B1cC13cmFwcGVyJz48L2Rpdj5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRwb3B1cC5jc3MoIHBvc2l0aW9uICk7XG5cbiAgICAgICAgICAgIHBvcHVwLmNsb3NlQWxsKCk7XG4gICAgICAgICAgICAkLm92ZXJsYXkub3BlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkcG9wdXAuYW5pbWF0ZShhbmltYXRpb25TZXR1cCwgMjUwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLnRyaWdnZXIoJ3BvcHVwLmFmdGVyX29wZW4nLCAkcG9wdXApO1xuICAgICAgICAgICAgICAgIH0pLmFkZENsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdwb3B1cC1vcGVuJyk7XG4gICAgICAgICAgICAkKCdib2R5JykudHJpZ2dlcigncG9wdXAub3BlbicsICRwb3B1cCk7XG5cbiAgICAgICAgICAgIHBvcHVwSXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgY2xlYXJFcnJvcnM6IGZ1bmN0aW9uKCRwb3B1cCkge1xuICAgICAgICAgICAgJHBvcHVwLmZpbmQoJy5lcnJvcicpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuICAgICAgICAgICAgJHBvcHVwLmZpbmQoJy5wb3B1cC1lcnJvckxpc3QnKS5hZGRDbGFzcygnaGlkZScpLmVtcHR5KCk7XG4gICAgICAgICAgICAkcG9wdXAuZmluZCgnLmhpZGUtb24tb3BlbicpLmhpZGUoKTtcbiAgICAgICAgICAgICRwb3B1cC5maW5kKCcudG9vbHRpcCcpLnJlbW92ZSgpO1xuICAgICAgICB9LFxuICAgICAgICByZXNldEZvcm06IGZ1bmN0aW9uKCRwb3B1cCkge1xuICAgICAgICAgICAgJGZvcm0gPSAkcG9wdXAuaXMoJ2Zvcm0nKSA/ICRwb3B1cCA6ICRwb3B1cC5maW5kKCdmb3JtJyk7XG4gICAgICAgICAgICAkZm9ybS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHBvcHVwLmZpbmQoJy5oaWRlJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICRwb3B1cC5maW5kKCdpbWcnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRpbWcgPSAkKHRoaXMpLCAkZGVmYXVsdEltZ1NyYyA9ICRpbWcuYXR0cignZGF0YS1kZWZhdWx0LXVybCcpO1xuICAgICAgICAgICAgICAgIGlmKCRkZWZhdWx0SW1nU3JjKSB7XG4gICAgICAgICAgICAgICAgICAgICRpbWcuYXR0cignc3JjJywgJGRlZmF1bHRJbWdTcmMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBjbG9zZTogZnVuY3Rpb24oaXNDbG9zZU92ZXJsYXkpIHtcbiAgICAgICAgICAgICQub3ZlcmxheS5jbG9zZSgpO1xuICAgICAgICB9LFxuICAgICAgICBjbG9zZUFsbDogZnVuY3Rpb24oaXNDbG9zZU92ZXJsYXksIGNoZWNrQnRuQ2xvc2UpIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygncG9wdXAtb3BlbicpO1xuICAgICAgICAgICAgdmFyICRwb3B1cHMgPSAkKCdib2R5JykuZmluZCgnLnBvcHVwLmlzLW9wZW4nKTtcblxuICAgICAgICAgICAgJHBvcHVwcy51bndyYXAoKTtcblxuICAgICAgICAgICAgaWYoISFjaGVja0J0bkNsb3NlICYmICEkcG9wdXBzLmZpbmQoJy5wb3B1cC1idG4tY2xvc2UsIC5idG4tY2xvc2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRwb3B1cHMuYW5pbWF0ZSh7b3BhY2l0eTogJ2hpZGUnfSwgMjUwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkcG9wdXBzLmZpbHRlcignLnRlbXAnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBpZighIWlzQ2xvc2VPdmVybGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICQub3ZlcmxheS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKCdib2R5JykudHJpZ2dlcigncG9wdXAuYWZ0ZXJfY2xvc2UnLCAkcG9wdXBzKTtcbiAgICAgICAgICAgIH0pLnJlbW92ZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICAgICBwb3B1cElzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICByZVBvc2l0aW9uOiBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgICAgICAgdmFyICRwb3B1cCA9IHBvcHVwLl9nZXRQb3B1cChzZWxlY3RvciksXG5cbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHBvcHVwLmdldFBvc2l0aW9uKCRwb3B1cCk7XG4gICAgICAgICAgICAkcG9wdXAuY3NzKHBvc2l0aW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgZmluZFJlYWxXcmFwcGVyOiBmdW5jdGlvbigkcG9wdXApIHtcbiAgICAgICAgICAgIHZhciAkcmVhbFdyYXBwZXIgPSBudWxsO1xuICAgICAgICAgICAgJHBvcHVwLnBhcmVudHMoKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmKCQodGhpcykuY3NzKCdwb3NpdGlvbicpID09ICdyZWxhdGl2ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgJHJlYWxXcmFwcGVyID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICRyZWFsV3JhcHBlcjtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UG9zaXRpb246IGZ1bmN0aW9uKCRwb3B1cCkge1xuICAgICAgICAgICAgdmFyIHd3ID0gJHdpbi53aWR0aCgpLFxuICAgICAgICAgICAgICAgIHdoID0gJHdpbi5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICBkdyA9ICRkb2Mud2lkdGgoKSxcbiAgICAgICAgICAgICAgICBkaCA9ICRkb2MuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgcHcgPSAkcG9wdXAub3V0ZXJXaWR0aCgpLFxuICAgICAgICAgICAgICAgIHBoID0gJHBvcHVwLm91dGVySGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgc3QgPSAkd2luLnNjcm9sbFRvcCgpLFxuXG4gICAgICAgICAgICAgICAgbGVmdCA9IDAsXG4gICAgICAgICAgICAgICAgdG9wID0gMCxcbiAgICAgICAgICAgICAgICBjc3MgPSB7fSxcblxuICAgICAgICAgICAgICAgIHBvc1R5cGUgPSAkcG9wdXAuYXR0cignZGF0YS1wb3NpdGlvbicpLFxuXG4gICAgICAgICAgICAgICAgJHJlYWxXcmFwcGVyID0gbnVsbDtcblxuICAgICAgICAgICAgaWYoJHBvcHVwLmhhc0NsYXNzKCdzbWFydC1wb3NpdGlvbmluZycpKSB7XG4gICAgICAgICAgICAgICAgJHJlYWxXcmFwcGVyID0gcG9wdXAuZmluZFJlYWxXcmFwcGVyKCRwb3B1cCk7XG4gICAgICAgICAgICAgICAgaWYoJHJlYWxXcmFwcGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGR3ID0gJHJlYWxXcmFwcGVyLmlubmVyV2lkdGgoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgaWYoZHcgPj0gcHcpIHtcbiAgICAgICAgICAgICAgICBsZWZ0ID0gTWF0aC5yb3VuZCgoZHcgLSBwdykvMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHdoID49IHBoKSB7XG4gICAgICAgICAgICAgICAgLy90b3AgPSBzdCtNYXRoLnJvdW5kKCh3aCAtIHBoKS8yKTtcbiAgICAgICAgICAgICAgICBjc3MucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICAgICAgICAgIHRvcCA9ICc1MCUnO1xuICAgICAgICAgICAgICAgIGNzcy5tYXJnaW5Ub3AgPSAnLScgKyBNYXRoLmZsb29yKCBwaCAvIDIgKSArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgZWxzZSBpZihkaCA+PSBzdCtwaCkge1xuICAgICAgICAgICAgICAgIHRvcCA9IHN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b3AgPSA2MDtcbiAgICAgICAgICAgICAgICAkcG9wdXAuYWRkQ2xhc3MoJ3BvcHVwLWxvbmcnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgbGFyID0gd3cgLyAyIC0gcHcgLzIgLSAzNSxcbiAgICAgICAgICAgICAgICAgICAgcmFyID0gd3cgLyAyIC0gcHcgLzIgLSAzNTtcblxuICAgICAgICAgICAgICAgICRwb3B1cC5maW5kKCcucG9wdXAtYXJyX19wcmV2JykuY3NzKCAnbGVmdCcsIGxhciApO1xuICAgICAgICAgICAgICAgICRwb3B1cC5maW5kKCcucG9wdXAtYXJyX19uZXh0JykuY3NzKCAncmlnaHQnLCByYXIgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY3NzLnRvcCA9IHRvcDtcblxuICAgICAgICAgICAgaWYocG9zVHlwZSA9PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgY3NzLnJpZ2h0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNzcy5sZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNzcztcbiAgICAgICAgfSxcbiAgICAgICAgX2dldFBvcHVwOiBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgICAgICAgdmFyICRwb3B1cDtcblxuICAgICAgICAgICAgaWYodHlwZW9mKHNlbGVjdG9yKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RvcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHBvcHVwID0gJCgnIycrc2VsZWN0b3IpO1xuICAgICAgICAgICAgcmV0dXJuICRwb3B1cC5sZW5ndGggPyAkcG9wdXAgOiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICQucG9wdXAgPSBwb3B1cDtcblxuICAgICQuaW5pdFBvcHVwcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm9wZW4tcG9wdXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IsIGlzUmVzZXRGb3JtLCBpc0NsZWFyRXJyb3I7XG5cbiAgICAgICAgICAgIGlzQ2xlYXJFcnJvciA9ICEkKHRoaXMpLmRhdGEoJ25vY2xlYXItZm9ybScpO1xuICAgICAgICAgICAgaXNSZXNldEZvcm0gPSAhJCh0aGlzKS5kYXRhKCdub3Jlc2V0LWZvcm0nKTtcblxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCA/IGUucHJldmVudERlZmF1bHQoKSA6IGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYoJCh0aGlzKS5nZXQoMCkudGFnTmFtZSA9PSAnQScpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvciA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgICAgIHBvcHVwLm9wZW4oc2VsZWN0b3Iuc3Vic3RyKDEpLCBpc0NsZWFyRXJyb3IsIGlzUmVzZXRGb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wb3B1cC1idG4tY2xvc2UsIC5idG4tY2xvc2UnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBwb3B1cC5jbG9zZUFsbCh0cnVlKTtcbiAgICAgICAgfSlcblxuICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PSAyNykge1xuICAgICAgICAgICAgICAgIHBvcHVwLmNsb3NlQWxsKHRydWUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignb3ZlcmxheS5jbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcG9wdXAuY2xvc2VBbGwodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucG9wdXAtd3JhcHBlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmKCAkKGUudGFyZ2V0KS5jbG9zZXN0KCcucG9wdXAnKS5sZW5ndGggPT0gMCApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcG9wdXAuY2xvc2VBbGwodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICR3aW4ub24oJ3Jlc2l6ZS5wb3B1cCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyICRwb3B1cHM7XG5cbiAgICAgICAgICAgIGlmKHBvcHVwSXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmZpbmQoJy5wb3B1cC5pcy1vcGVuJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAucmVQb3NpdGlvbigkKHRoaXMpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICQucG9wdXAubWVzc2FnZSA9IGZ1bmN0aW9uKHRpdGxlLCB0ZXh0LCBidG4pIHtcbiAgICAgICAgdmFyIGJ0biA9IGJ0biB8fCBudWxsO1xuXG4gICAgICAgICRwb3B1cCA9ICQodG1wbCgndG1wbF9wb3B1cC1tZXNzYWdlJywgeyd0aXRsZSc6IHRpdGxlLCAndGV4dCc6IHRleHQsICdidG4nOiBidG59KSk7XG5cbiAgICAgICAgJHBvcHVwLmFkZENsYXNzKCd0ZW1wJyk7XG5cbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkcG9wdXApO1xuXG4gICAgICAgIHBvcHVwLm9wZW4oJHBvcHVwKTtcbiAgICB9XG4gICAgXG4gICAgJC5wb3B1cC5lcnJvciA9IGZ1bmN0aW9uKHRpdGxlLCB0ZXh0KSB7XG4gICAgICAgICRwb3B1cCA9ICQodG1wbCgndG1wbF9wb3B1cC1lcnJvcicsIHsndGl0bGUnOiB0aXRsZSwgJ3RleHQnOiB0ZXh0fSkpO1xuXG4gICAgICAgICRwb3B1cC5hZGRDbGFzcygndGVtcCcpO1xuXG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJHBvcHVwKTtcblxuICAgICAgICBwb3B1cC5vcGVuKCRwb3B1cCk7XG4gICAgfVxuXG59KShqUXVlcnkpOyJdfQ==
